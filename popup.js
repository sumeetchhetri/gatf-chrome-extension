let startstop = document.getElementById('startstop');
let timer = document.getElementById('timer');
let minutesLabel = document.getElementById("minutes");
let secondsLabel = document.getElementById("seconds");
let timerInt;
let totalSeconds = 0;

chrome.storage.local.get(["script"], function(data) {
	if(data && !data.script) {
		chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
			chrome.scripting.executeScript({
				target: { tabId: tabs[0].id },
				function: loadScript
			}, function() {
				chrome.storage.local.set({script: true}, function() {});
			});
		});
	}
});

chrome.storage.local.get(["state"], function(data) {
	if(data && data.state && data.state.s=="Stop Recording") {
		totalSeconds = data.state.c + Math.round(Math.abs((new Date().getTime() - data.state.t) / 1000));
		setTime();
		handleStart();
	}
});

function setTime() {
	++totalSeconds;
	secondsLabel.innerHTML = pad(totalSeconds % 60);
	minutesLabel.innerHTML = pad(parseInt(totalSeconds / 60));
}

function pad(val) {
	var valString = val + "";
	if (valString.length < 2) {
		return "0" + valString;
	} else {
		return valString;
	}
}

function handleStart() {
	startstop.innerHTML = "Stop Recording";
	timer.style.display = "block";
	timerInt = setInterval(setTime, 1000);
	//console.log('popup sent message: start');
	chrome.storage.local.set({state: {s: startstop.innerHTML, t: new Date().getTime(), c: totalSeconds}}, function() {
		chrome.storage.local.set({event: "start"}, function() {
		});
	});
	/*chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
		chrome.tabs.sendMessage(tabs[0].id, { type: "start" }, function handler(response) {
			//console.log(`popup received reply: ${response.type}`);
			console.log(JSON.stringify(response));
		});
	});*/
}

startstop.addEventListener('click', async () => {
	if (startstop.innerHTML == "Start Recording") {
		handleStart();
	} else {
		timerInt = undefined;
		startstop.innerHTML = "Start Recording";
		timer.style.display = "none";
		//console.log('popup sent message: stop');
		chrome.storage.local.remove(["state"], function() {
			chrome.storage.local.set({event: "stop"}, function() {
			});
		});
		/*chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
			chrome.tabs.sendMessage(tabs[0].id, { type: "stop" }, function handler(response) {
				//console.log(`popup received reply: ${response.type}`);
				console.log(JSON.stringify(response));
			});
		});*/
	}
});

function loadScript() {
	/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
	!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
	console.log("loaded jquery...");
	window['onlyFaugCore'] = true;
	window['noFaugExtension'] = true;
	var Faug=new function(){var e,t,a,r,i,n,s,o,l,d,u={},c={},f={},m={},h={},g={},p={"":{}},v={},y={},b=void 0,_={},w={},F={},x=!1,O=!0,k="c",T="u",S="d",A="ra",N="YYYY-MM-DD",C="YYYY-MM-DD HH:mm:ss",P="HH:mm:ss",j="X",D={defaultroute:"",routes:{}},I=!1,B="faug-freeze-element",E=void 0,z=0,V={},M=!0,R={},L="__SCOPED_VAR__"+(new Date).getTime()+"__",U="__EVERY__"+(new Date).getTime()+"__",q=void 0,H=void 0,J=0,W={},X={},G="__RARGS__"+(new Date).getTime()+"__",Y=void 0,Q=!1,K=void 0,Z=void 0,ee=!1,te="USD",ae=!1,re={},ie="",ne=!1,se=void 0,oe=!1,le=!1,de={},ue={},ce=!1,fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},me={},he=!1,ge=!1,pe=!1,ve=-2,ye={},be=!1,_e=void 0,we=void 0,Fe=void 0,xe=void 0,Oe=void 0,$e=void 0,ke=void 0,Te={form:{ele:"form",style:"width:95%;",class:"form",validationErrorMsg:"Please Fill all the mandatory fields",file:{maxSizeMb:null,errorFunc:null},element:{container:{class:"form-group",ele:"div",style:"",attrs:{},class:""},label:{ele:"label",style:"",attrs:{},class:"",requiredHtml:"<span style='color:red'>*</span>"},icon:{ele:"i",style:"",attrs:{},class:""},this:{class:"form-control",style:"",attrs:{}},helptext:{class:"help-block",ele:"span",errorSeparator:"<br/>",errorClass:"has-error",successClass:"has-success",errorText:" is Required",errorPos:"append",style:"",attrs:{}}},radio:{this:{ele:"input",style:"",attrs:{},class:""},label:{ele:"label",style:"",attrs:{},class:""},container:{class:"radio",ele:"div",style:"",attrs:{}}},checkbox:{this:{ele:"input",style:"",attrs:{},class:""},label:{ele:"label",style:"",attrs:{},class:""},container:{class:"radio",ele:"div",style:"",attrs:{}}},groupMarker:{html:'<div class="clearfix">&nbsp;</div>'},object:{section:{ele:"div",style:"",attrs:{},class:""},container:{class:"form-group clearfix",ele:"div",style:"",attrs:{}}},array:{container:{style:"border:1px dotted black;",class:"form-group clearfix",attrs:{}},section:{ele:"div",eleIfAbsent:"b",style:"margin-top:10px;display:inline-block;",attrs:{}},header:{ele:"div",style:"",attrs:{},class:""},addButton:{ele:"button",style:"float:right",attrs:{},class:""},remButton:{ele:"button",style:"float:right",attrs:{},class:""},this:{class:"div",header:{ele:"div",style:"",attrs:{},class:"",remButton:{ele:"button",style:"float:right",attrs:{},class:""},minlabel:{ele:"span",style:"",attrs:{},class:""},minmaxButton:{ele:"span",style:"float:right",attrs:{}}},container:{class:"form-group clearfix",ele:"div",style:"",attrs:{}}}},actionsArea:{ele:"ul",class:"list-group",style:"",attrs:{},edit:{ele:"li",style:"",class:"list-group-item",label:"Edit",attrs:{}},delete:{ele:"li",style:"",class:"list-group-item",label:"Delete",attrs:{}},appendTo:"body"},submitButton:{ele:"input",label:"Create",style:"",attrs:{},class:""},resetButton:{ele:"button",class:"btn-primary pull-right",style:"margin-bottom:20px;",text:"Reset",attrs:{}},progress:{ele:"progress",style:"",attrs:{},class:""}},viewer:{editButton:{ele:"button",style:"",attrs:{},class:""},deleteButton:{ele:"button",msg:"Are you sure?",style:"",attrs:{},class:""},this:{table:{ele:"table",style:"width:100%;",class:"table table-striped table-bordered table-hover",container:{ele:"div",style:"overflow-x:auto",attrs:{},class:""},header:{ele:"thead",rowEle:"tr",colEle:"th",style:"",attrs:{},class:""},row:{ele:"tr",style:"",attrs:{},class:""},column:{ele:"td",style:"",attrs:{},class:""}},default:{ele:"div",style:"",attrs:{},class:""},dropdown:{ele:"ul",class:"dropdown-menu",itemEle:"li",style:"",attrs:{}}},pagination:{html:'<button class="faug-trigger-read-prev-button">Previous</button><button class="faug-trigger-read-next-button">Next</button>'}},helperForm:{ele:"form",style:"width:95%;",class:"form",attrs:{}},search:{selector:null,regex:null,errorFunc:null},input:{regex:null,errorFunc:null},table:{search:{regex:null},settings:{template:"<div class='container-fluid'><div class='row'><div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'><ul class='_t_stg_lst list-group column-list'><%itemshtml%></ul></div><div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'><button class='_t_stg_but btn btn-success pull-right'>Apply</button></div></div></div>",items:{itemshtml:{template:"<li class='ui-state-default list-group-item <%active%>' style='margin: 2px 2px;border-radius: 0px;cursor: move;text-transform: capitalize;'><i class='glyphicon glyphicon-resize-vertical margin-right-15 font-size-12'></i><%name%></li>"}}},container:{template:"<div class='_t_mc container-fluid col-md-12'><%header%><%body%><%notfound%><%footer%></div>",items:{header:{template:"<div class='_t_hc row' style='margin:20px 0 20px 0'><%itemperpage_yes%><%itemperpage_no%><%blank%><%searchdownload%></div>",items:{itemperpage_yes:{cond:"|=|true:object@page_enabled",template:"<div class='_t_h1 col-md-2 row' style='padding-left: 0px;'><div class='col-md-2'><i style='font-size:25px;padding-top:5px;' class='_t_stg fa fa-cog cursor-pointer' aria-hidden='true'></i></div><div class='col-md-10'><select class='_t_ps form-control'><%options%></select></div></div>"},itemperpage_no:{cond:"|!=|true:object@page_enabled",template:"<div class='_t_h1 col-md-1' style='padding-left: 0px;'><div class='col-md-2'><i style='font-size:25px;padding-top:5px;' class='_t_stg fa fa-cog cursor-pointer' aria-hidden='true'></i></div></div>"},blank:"<div class='_t_h2 col-md-6'>&nbsp;</div>",searchdownload:{template:"<div class='_t_h3 col-md-4 col-sm-12 col-xs-12' style='padding-right: 0px;'><div class='_t_h3_s col-md-10'><%search%></div><%download%><%downloadpdf%></div>",items:{search:{cond:"|=|true:object@search_enabled",template:"<input type='text' class='_t_sb form-control' placeholder='Search' value='<%_f_search_text%>'/>"},download:{cond:"|=|true:object@dwnld_enabled",template:"<div class='_t_h3_d floatingRightBtn'><i style='font-size:25px;padding-top:5px;' class='_t_dw fa fa-download'></i></div>"},downloadpdf:{cond:"|=|true:object@dwnldpdf_enabled",template:"<div class='_t_h3_dp floatingRightBtn'><i style='font-size:25px;padding-top:5px;' class='_t_dwpdf fa fa-file-pdf'></i></div>"}}}}},body:"<div class='_t_bc'></div>",notfound:"<div class='_t_gc row hidden' style='margin:20px 0 20px 0'><center><p>No Data Found</p></center></div>",footer:{template:"<div class='_t_fc row' style='margin:20px 0 20px 0'><%previous%><%pagination%><%next%></div>",items:{previous:"<div class='_t_f1 col-md-1' style='padding-left: 0px;'><button type='button' class='_t_f11 previous btn'>Previous</button></div>",pagination:{template:"<div class='_t_f2 col-md-10 <%isHidden%>'><center><div class='_t_f21'>Page <span class='_t_f211w'><input type='text' class='_t_f211'></span> of <span class='_t_f212'></span></div></center></div>",items:{isHidden:{cond:"|=|true:object@invoke_apionchange",template:"hidden"}}},next:{template:"<div class='_t_f3 col-md-1 <%pullRight%>' style='padding-right: 0px;'><button type='button' class='_t_f31 btn next pull-right'>Next</button></div>",items:{pullRight:{cond:"|=|true:object@invoke_apionchange",template:"pull-right"}}}}}}},items:{table:"<table class='_t_tl table'>",thead:"<thead class='_t_th'>",theadtr:"<tr class='_t_hr'>",theadth:"<th class='_t_hc'>",tbody:"<tbody class='_t_tb'>",tbodytr:"<tr class='_t_rw'>",tbodytd:"<td><%content%></td>",pagelistitem:"<option value='<%pagenum%>' <%selected%>><%display%></option>",sorthtml:"<i class='fa fa-fw fa-sort'></i>"}},freezeLoaderHtml:'<h3><img src="resources/busy.gif" /> Just a moment...</h3>',freezeUiContainer:"",modal:{template:"<div id='<%id%>' class='modal fade' role='dialog'><div class='modal-dialog' style='<%width%><%height%>'><div class='modal-content'><%header%><%body%><%footer%></div></div></div>",items:{header:{template:"<div class='modal-header'><%closebutton%><%headerContent%></div>",items:{closebutton:{cond:"|=|true:object@isCloseAllwd",template:"<button type='button' class='close' data-dismiss='modal'>&times;</button>"}}},body:"<div class='modal-body clearfix'><%html%></div>",footer:"<div class='modal-footer'><%footerContent%></div>"}}};this.escapeHtml=function(e){return Pe(e)?"":String(e).replace(/[&<>"'`=\/]/g,(function(e){return fe[e]}))},this.eh=this.escapeHtml,this.unEscapeHtml=function(e){return Pe(e)?"":e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")).replace(/&#x2F;/g,"/")).replace(/&#x60;/g,"`")).replace(/&#x3D;/g,"=")).replace(/&#34;/g,'"')},this.ueh=this.unEscapeHtml,this.getConfigPath=function(){return"fjs-config.json"},this.copy=function(e){if(Ne("Object",e)){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=this.copy(e[a]));return t}if(Ne("Array",e)){t=[];for(var r=0;r<e.length;r++)t.push(this.copy(e[r]));return t}return e},this.getProperty=function(t){return"loadconfigafterauth"==t?Q:"stateFreeze"==t?K:"inited"==t?rt:"initialLoaderScreen"==t?M:"isRecord"==t?le:"baseUrl"==t?ie:"templateResources"==t?this.copy(e):"debugEnabled"==t?x:"catchApiUncaughtExceptions"==t?O:"prefilterRegex"==t?se:"generateCorrelationId"==t?oe:"authObject"==t?b:"errFn"==t?ke:"errRegex"==t?$e:"numApiWebWorkers"==t?J:void 0},this.gp=this.getProperty,this.setProperty=function(e,t){"loadconfigafterauth"==e&&Ne("Boolean",t)?Q=t:"stateFreeze"!=e||void 0!==t&&!Ne("Array",t)?"recorder"==e?n=t:"previousElement"==e?q=t:"cdfs"==e?Te=t:"catchApiUncaughtExceptions"==e&&(O=t):K=t},this.sp=this.setProperty,this.getString=function(e){return e?e+"":e},this.getSchemaHtmlTemplatesStr=function(){return JSON.stringify(W)},this.getOtherHtmlTemplatesStr=function(){return JSON.stringify(X)},this.getSchemaMapStr=function(){return JSON.stringify(c)},this.getRouteArgs=function(){return this.copy(F[G])};var Se=[["resources/javascript-xpath-latest-cmp.js"],["resources/bootstrap.min.js"],["resources/json2.js"],["resources/jquery.dataTables.js"],["resources/dataTables.bootstrap.js"],["resources/canvas-datagrid.js"],["resources/jspdf.min.js"],["resources/jspdf.plugin.autotable.min.js"],["resources/csv.min.js"]];this.dependencies=function(e,t){if(e&&e.length>0){var a=!0===window.onlyFaugCore;t&&(this.deps=[]);for(var r=0;r<e.length;r++)a||this.deps.push([e[r]])}};var Ae=this.dependencies;this.settings=function(e,t,a,r,i,n,s,o,l,d,u,c,f,m){t&&(x=t),a&&(k=a),r&&r,i&&(T=i),n&&(S=n),s&&(A=s),o&&(N=o),l&&(C=l),d&&(P=d),u&&(j=u),c&&(I=c),f&&(B=f),m&&(E=m)},this.initAuthObject=function(e,t,a,r){Fg.isN(r)&&(r=!0),b={aTokenName:e,aTokenValue:t,aTokenWhere:a},Q&&r&&__loadfaugconfig(b)},this.ia=this.initAuthObject,this.getSchemaMap=function(){return this.copy(c)};this.getSchemaMap;this.gsm=this.getSchemaMap,this.is=function(e,t){var a=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&a===e};var Ne=this.is;this.isNode=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName};this.isNode;this.isElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};this.isElement;this.ise=this.isElement,this.byId=function(e){return Pe(e)?$(""):0==e.indexOf("#")?$(document.getElementById(e.substring(1))):$(document.getElementById(e))};var Ce=this.byId;this.bi=this.byId,this.byName=function(e){return $(document.getElementsByName(e))};this.byName;this.bn=this.byName,this.byIdEsc=function(e){if(!Pe(e))try{return $(e).length>0?$(e):0==e.indexOf("#")?$(document.getElementById(e.substring(1))):$(document.getElementById(e))}catch(t){return 0==e.indexOf("#")?$(document.getElementById(e.substring(1))):$(document.getElementById(e))}return $("")};this.byIdEsc;this.byie=this.byIdEsc,this.isN=function(e){return void 0===e||null==e||""===e};var Pe=this.isN;this.returnIfN=function(e,t){return Pe(e)?t:e};var je=this.returnIfN;function De(e,t,a){var r=t[e],i=a.split("|");if("len"==i[0]||"length"==i[0])r=r.length;else if("regex"==i[0])return V[i[2]]||(V[i[2]]=new RegExp(i[2])),V[i[2]].test(r);return"="==i[1]?r==i[2]:"!="==i[1]?r!=i[2]:"<"==i[1]?r<i[2]:"<="==i[1]?r<=i[2]:">"==i[1]?r>i[2]:">="==i[1]?r>=i[2]:"!n"==i[1]?null!==r:"n"==i[1]?null===r:"u"==i[1]?void 0===r:"!u"==i[1]&&void 0!==r}function Ie(e,t){if(!e)return[!1];var a,r=e.split("@");r.length>3?a=r[3].trim():("this"==r[0]&&3==r.length||"parent"==r[0]&&3==r.length)&&(a=r[2].trim());var i=!1;if("id"==r[0]){var n="#"+r[2];t=$(n)}else if("parent"==r[0])t=t.parent();else if("name"==r[0]){n='[name="'+r[2]+'"]';t=$(n)}else if("class"==r[0]){n="."+r[2];t=$(n)}else if("selector"==r[0]){n=r[2];t=$(n)}else if(0==r[0].indexOf("group:")){var s=r[0].split(":");if(s.length>=5)for(var o=s[1],l=s[2],d=s[3],u=s[4],c=s.length>5?s[5]:"",f=r[2],m=0;m<o;m++){n=("id"==u?"#":"")+f+(m+1);if("class"==l&&$(n).hasClass(d)){i=!0,t=$(n);break}if("attr"==l&&""!=c&&$(n).attr(d)==c||$(n).is("["+d+"]")){i=!0,t=$(n);break}}}return!i||0==r[0].indexOf("group:")&&i?function(e,t,a){var r,i=!0,n=t[0],s=t[1],o=0==n.indexOf("constant:"),l="value"==n,d="var"==n,u="gvar"==n,c="data"==n,f="route"==n,m="form"==n;if(e&&"object"==n)return(r=e[t[1]])&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[!0,r];if(!e||0==e.length||o||d||l||u||c||f||m){if(d)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),(r=Fg.getVar(t[1]))&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[!0,v?!r:r];if(u)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),(r=It()[t[1]])&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[!0,v?!r:r];if(f)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),(r=F[G][t[1]])&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[!0,v?!r:r];if(c){(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1));var h=Ht(e);if(h)return(r=h[t[1]])&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[!0,v?!r:r]}else if(m){(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1));var g=function(e){var t=e.closest(".faug-form");if(t.length>0&&void 0!==t.attr("faug-sch-name"))return t.serializeObject(t.attr("faug-sch-name"))}(e);if(g)return(r=g[t[1]])&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[!0,v?!r:r]}else{if(o){var p=n.substring(9);return"undefined"==p?[!0,void 0]:"null"==p?[!0,null]:"true"==p?[!0,!0]:"false"==p?[!0,!1]:(a&&(r=wt(a,{value:p},!1,void 0,!1)),[!0,r])}var v;if(t.length>1)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),r=t[1],t[1]&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[!0,v?!r:r]}return[!1]}return"value"==s?r=e.first().val():"text"==s?r=e.first().text():"html"==s?r=e.first().html():-1!=s.indexOf("a:")?r=e.first().attr(s.substring(2)):"valuetrim"==s?r=e.first().val().trim():"texttrim"==s?r=e.first().text().trim():"htmltrim"==s?r=e.first().html().trim():i=!1,i&&r&&a&&(r=wt(a,{value:r},!1,void 0,!1)),[i,r]}(t,r,a):[!1]}function Be(e,t,a,r){if(-1!=e.indexOf(":")){var i,n=e.substring(0,e.indexOf(":")),s=e.substring(e.indexOf(":")+1);if("func"==n){var o=Je(s,[t,a,r]);return!!o.valid&&o.result}var l=n.split("|"),d=a&&t.length>0?a:Ie(s,t);if(d[0]){if(void 0===d[1])return!1;if(i=d[1]+"","len"==l[0]||"length"==l[0])i=i.trim().length;else if("regex"==l[0])return V[l[2]]||(V[l[2]]=new RegExp(l[2])),V[l[2]].test(i);try{if(!isNaN(i)){var u=1*l[2];isNaN(u)||(l[2]=u)}}catch(e){}if("="==l[1])return i==l[2];if("!="==l[1])return i!=l[2];if("<"==l[1])return i<l[2];if("<="==l[1])return i<=l[2];if(">"==l[1])return i>l[2];if(">="==l[1])return i>=l[2];if("!tb"==l[1])return i&&""!=i.trim();if("tb"==l[1])return i&&""==i.trim();if("!n"==l[1])return null!==i;if("n"==l[1])return null===i;if("u"==l[1])return void 0===i;if("!u"==l[1])return void 0!==i}}return!0}this.infixToPostfixEvaluate=function(e){if(!e||0==e.length)return!0;if(1==e.length)return e[0];for(var t,a,r,i=[],n=[],s=0;s<e.length;s++)if("&&"==e[s]||"||"==e[s]||"("==e[s])i.push(e[s]);else if(")"==e[s])for(;i.length>0;){var o=i[i.length-1];i.splice(-1,1),"("!=o&&n.push(o)}else n.push(e[s]),i.length>0&&("&&"==i[i.length-1]||"||"==i[i.length-1])&&(n.push(i[i.length-1]),i.splice(-1,1));n=n.reverse();for(var l=0,d=[];l<n.length;)if("&&"==n[l]||"||"==n[l]?(r&&d.push(r),r=n[l],t=void 0,a=void 0):void 0!==r&&void 0===a?a=n[l]:void 0!==r&&void 0!==a&&void 0===t?t=n[l]:d.push(n[l]),void 0!==t&&void 0!==a&&void 0!==r&&(a="&&"==r?t&&a:t||a,t=void 0,r=void 0,d.push(a)),++l==n.length&&d.length>0){if(n=d,1==d.length)break;d=[],l=0}return n[0]};var Ee=this.infixToPostfixEvaluate;function ze(e,t,a){var r=!0;if(e){Ne("String",e)&&(e=[e]);for(var i=[],n=0;n<e.length;n++){var s=e[n];Pe(s)||("&&"==s.trim()||"||"==s.trim()||"("==s.trim()||")"==s.trim()?i.push(s.trim()):i.push(Be(s,t,void 0,a)))}r=Ee(i)}return r}function Ve(e,t,a){var r=!0,i=[];if(e&&e.cond)for(var n=0;n<e.cond.length;n++){var s=e.cond[n];if(s.length>1&&s[0]){var o=Be(s[0],t,a);!o&&s[1]?i.push(s[1]):i.push(void 0),r&=o}}return[r,i]}function Me(e){var a=t.getDialog(e,Le);return a||Le(e)}function Re(e,t){var a=e.cond;if((e.show||e.hide)&&ze(a,t)){var r=e.showclass?e.showclass:void 0,i=e.hideclass?e.hideclass:void 0,n=e.show,s=e.hide;if(n&&n.length>0)for(var o=0;o<n.length;o++)r&&i?(Ce(n[o]).removeClass(i),Ce(n[o]).addClass(r)):r?Ce(n[o]).addClass(r):i?Ce(n[o]).removeClass(i):Ce(n[o]).show();if(s&&s.length>0)for(o=0;o<s.length;o++)r&&!i?(Ce(s[o]).removeClass(r),Ce(s[o]).addClass(i)):r?Ce(s[o]).removeClass(r):i?Ce(s[o]).addClass(i):Ce(s[o]).hide()}}function Le(e){return function(t,a,r,i,n){t&&!a&&(a=$(t.currentTarget),t.stopPropagation()),H=q,t&&"hashchange"!=t.type&&(q=$(t.currentTarget));var s=F[G],o=Ht(H),l=Ht(q),d=(e.crudop,e.load),u={};if(e.vars)for(var c in e.vars){if(e.vars.hasOwnProperty(c))(h=Ie(e.vars[c],a))[0]&&(u[c]=h[1])}var m=[t,a,l,o,s,r,u];if(e.varAssign)for(var c in e.varAssign){var h;if(e.varAssign.hasOwnProperty(c))(h=Ie(e.varAssign[c],a))[0]&&(F[c]=h[1])}var g=ze(e.cond,a,m);if(g||!0===n){var p=!0;if(!Pe(d)&&!Pe(d.selector)&&!Pe(d.template)&&(!d.checkPresence||d.checkPresence&&0==$(d.checkPresence).length)){p=!1;if(ze(d.cond,a)||!0===n)if(!Pe(d.store_var)&&!Pe(d.store_var.name)&&!Pe(d.store_var.key)&&f[d.store_var.name]&&F[d.store_var.key]&&f[d.store_var.name][F[d.store_var.key]]){var v=f[d.store_var.name][F[d.store_var.key]];$.get(d.template,function(e,t,a,r,i){return function(n){Ue(e,t,r,e.load.selector,a,n,i)}}(e,m,v,a,i))}else $(d.selector).load(d.template,function(e,t,a){return function(){Ue(e,t,a,void 0,void 0,void 0,i)}}(e,m,a))}p&&Ue(e,m,a,void 0,void 0,void 0,i)}return g}}function Ue(e,a,r,n,s,o,l){var d=e.eleid,u=e.jqselector,f=e.func,m=e.outfunc,h=(e.load,e.crudop),g=e.showhide,p=e.routeTo,v=e.preRouteTo,y=e.draw,b=e.every,_=e.forRoute;if(ye)for(var w in ye)"windows"!=w&&ye.hasOwnProperty(w)&&w!=i&&(clearInterval(ye[w]),delete ye[w]);h&&!Ne("Array",h)&&(h=[h]),y&&!Ne("Array",y)&&(y=[y]),a.push(!0);var x=[];if(l){for(var O=0;O<l.length;O++)x.push(l[O]);for(O=3;O<a.length;O++)x.push(a[O])}else for(O=0;O<a.length;O++)x.push(a[O]);if(n&&o&&(o=t.templateEngine(o,s,!1),$(n).html(o)),v){var k={};if(a[4]){var T=a[4];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}if(a[6]){T=a[6];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}v=wt(v,k,void 0,void 0,!1),Xt(v)}if(Pe(f)||Je(f,x),h)for(var A=0;A<h.length;A++){var N=c[h[A].schemaName].crud[h[A].op];if(h[A].vars)for(var S in N.transientVars={},h[A].vars){if(h[A].vars.hasOwnProperty(S))(C=Ie(h[A].vars[S],a[1]))[0]&&(N.transientVars[S]=C[1])}if(a[4]){N.transientVars||(N.transientVars={});T=a[4];for(var S in T)T.hasOwnProperty(S)&&(N.transientVars[S]=T[S])}if(a[6]){N.transientVars||(N.transientVars={});T=a[6];for(var S in T)T.hasOwnProperty(S)&&(N.transientVars[S]=T[S])}if(h[A].setVars)for(var S in h[A].setVars){if(h[A].setVars.hasOwnProperty(S))(C=Ie(h[A].setVars[S],a[1]))[0]&&Fg.addVar(S,C[1])}if(h[A].setGlobals)for(var S in h[A].setGlobals){var C;if(h[A].setGlobals.hasOwnProperty(S))(C=Ie(h[A].setGlobals[S],a[1]))[0]&&Fg.addGlobalVar(S,C[1])}Tt(1==h.length?f:null,h[A],[a[0],a[1]],d,u)}if(y)for(A=0;A<y.length;A++){var P=y[A];if(P.schemaName){var j=!0===P.show;"edit"===P.type?ut(P.schemaName,void 0,j):"editCM"===P.type?ut(P.schemaName,a[2],j):"editPM"===P.type?ut(P.schemaName,a[3],j):"reset"===P.type?ct(P.schemaName):dt(P.schemaName,void 0,j)}}if(g)for(A=0;A<g.length;A++)Re(g[A],r);if(Pe(m)||Je(m,x),b&&b.duration&&!isNaN(b.duration)){var D=!0;if(b.forRoute)for(var I=0;I<b.forRoute.length;I++)D|=i==_[I];if(D&&!ye[i])return void(ye[i]=setInterval((function(){F[U]=!0,Fg.routeTo(Fg.getRoute()),F[U]=!1}),b.duration))}if(p){k={};if(a[4]){T=a[4];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}if(a[6]){T=a[6];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}p=wt(p,k,void 0,void 0,!1),Xt(p)}}this.execSchemaCallBack=function(e,t,a,r,i){if(e in c){var n=c[e];if(n.crud&&t in n.crud){var s=n.crud[t];"callbacks"in s&&He(s.callbacks,a,[r],i)}}};this.execSchemaCallBack;this.escb=this.execSchemaCallBack;var qe=null;this.execCallBack=function(e,t,a,r){void 0===r&&(r=!0),r&&a.unshift(t);var i={valid:!1,result:void 0},n={};if(e){if(void 0!==e&&void 0!==e[t]){e[t];var s=void 0;if(Ne("Object",e[t])){for(var o in e[t])if(e[t].hasOwnProperty(o)&&"controlEvents"==o&&Ne("Array",e[t][o]))for(var l=e[t][o],d=0;d<l.length;d++){var u=l[d].jqselector,c=l[d].eleid,f=l[d].event;if(Ne("Array",l[d].cond)||(l[d].cond=[l[d].cond]),f)for(var m=f.split(","),h=0;h<m.length;h++)Pe(c)?Pe(u)?$(window).off(m[h]+".fg"):$(u).off(m[h]+".fg"):Pe(u)?Ce(c).off(m[h]+".fg"):Ce(c).off(m[h]+".fg",u)}for(var o in e[t])if(e[t].hasOwnProperty(o)&&"controlEvents"==o&&Ne("Array",e[t][o]))for(l=e[t][o],d=0;d<l.length;d++){u=l[d].jqselector,c=l[d].eleid,f=l[d].event;var g=l[d].delay;l[d].crudop;if(Ne("Array",l[d].cond)||(l[d].cond=[l[d].cond]),f)for(m=f.split(","),h=0;h<m.length;h++){var p=function(e,t){return function(a){if($(this).attr("data-regex")&&ke){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!new RegExp($(this).attr("data-regex")).test($(this).val()))return Fg.execFunc(ke,[$(this)]),a.stopPropagation(),!1}else if($e&&ke){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!$e.test($(this).val()))return Fg.execFunc(ke,[$(this)]),a.stopPropagation(),!1}else if(_e&&(_e===e.jqselector||_e===e.eleid)&&we&&"file"!=$(this).prop("type")&&""!=$(this).val()&&!we.test($(this).val()))return Fg.execFunc(Fe,[$(this)]),!1;if($(".faug-scrollable-menu").attr("prev-child-bgc")||$(".faug-scrollable-menu").attr("prev-child-bgc",$(".faug-scrollable-menu").children().eq(0).css("background-color")),$(".faug-scrollable-menu").is(":visible")&&(38==a.keyCode||40==a.keyCode||13==a.keyCode))return 38==a.keyCode?(-2==ve&&(ve=1),0==ve&&(ve=faugScrollableListLength),--ve>=0&&($(".faug-scrollable-menu").children().css("background-color",$(".faug-scrollable-menu").attr("prev-child-bgc")),$(".faug-scrollable-menu").children().eq(ve).css("background-color","#cccccc"),$(".faug-scrollable-menu").children().eq(ve)[0].scrollIntoView(!1))):40==a.keyCode?(-2==ve&&(ve=-1),++ve==faugScrollableListLength&&(ve=0),ve<faugScrollableListLength&&($(".faug-scrollable-menu").children().css("background-color",$(".faug-scrollable-menu").attr("prev-child-bgc")),$(".faug-scrollable-menu").children().eq(ve).css("background-color","#cccccc"),$(".faug-scrollable-menu").children().eq(ve)[0].scrollIntoView(!1))):13==a.keyCode?$(".faug-scrollable-menu").children().eq(ve>=0?ve:0).trigger("click"):console.log(a.keyCode),a.stopPropagation(),!1;var r=Me;"keyup"!=t.toLowerCase()&&"keydown"!=t.toLowerCase()&&"keypress"!=t.toLowerCase()||(g||(g=1e3),r=function(e){return function(t,a){clearTimeout(qe),qe=setTimeout(function(t,a){return function(){13==t.keyCode&&t.stopPropagation(),Me(e)(t,a)}}(t,a),g)}}),r(e)(a)}};Pe(c)?Pe(u)?$(window).off(m[h]+".fg",p(l[d],m[h])):($(u).on(m[h]+".fg",p(l[d],m[h])),"INPUT"!=$(u).prop("tagName")&&"TEXTAREA"!=Ce(c).prop("tagName")||$(u).attr("data-rgo","1")):Pe(u)?(Ce(c).on(m[h]+".fg",p(l[d],m[h])),"INPUT"!=Ce(c).prop("tagName")&&"TEXTAREA"!=Ce(c).prop("tagName")||Ce(c).attr("data-rgo","1")):(Ce(c).on(m[h]+".fg",u,p(l[d],m[h])),"INPUT"!=Ce(c).prop("tagName")&&"TEXTAREA"!=Ce(c).prop("tagName")||Ce(c).attr("data-rgo","1"))}}else n[o]=e[t][o]}Le(n)(void 0,void 0,void 0,a)}}else if(t){var v=F[G],y={};if(s)for(var b in s)if(s.hasOwnProperty(b)){var _=Ie(s[b],void 0);_[0]&&(y[b]=_[1])}a.push(v),a.push(y),i=Je(t,a)}return i};var He=this.execCallBack;this.ecb=this.execCallBack,this.execFunc=function(e,t,a){var r={valid:!1,result:void 0};try{if(e){if("function"==typeof e)r.result=a?e.apply(null,t):e(t),r.valid=!0;else if(Ne("String",e)){var i=window[e];-1!=e.indexOf(".")&&(i=it(window,e)),"function"==typeof i&&(r.result=a?i.apply(null,t):i(t),r.valid=!0)}}else;}catch(e){console.error(e)}return r};var Je=this.execFunc;function We(t,a){t=templateFile;var r={rows:null,options:null,row:null},i=0;Ne("Array",e[templateFile])&&(t=e[templateFile][0],r=e[templateFile][1],i=3==e[templateFile].length?e[templateFile][2]:0),$.get(t,function(e,t,a,r,i){return function(n){W[t]=a?[n,3,a]:[n,r],e(t,n,a,a?3:0),i()}}(_t,t,r,i,a))}function Xe(e,t,a){$.get(e,function(e,t){return function(a){try{try{var r=JSON.stringify(a,Kt);a=JSON.parse(r)}catch(t){t+=" ("+e+")",console.log("Problem templatizing schema "+t)}gt(a,!1,!1,!1,!1,!1,!0,t)}catch(t){t+=" ("+e+")",console.log("Problem parsing schema "+t)}}}(t,a))}function Ge(e){return e.headers?{headers:e.headers,status:e.status,responseURL:e.responseURL,responseText:e.responseText,responseXML:e.responseXML,responseJSON:e.responseJSON,statusText:e.statusText,readyState:e.readyState,getAllResponseHeaders:function(){return this.headers},statusCode:function(){return this.status},getResponseHeader:function(e){for(var t=this.headers.split("\n"),a=[],r=0;r<t.length;r++){e==t[r].substring(0,t[r].indexOf(": "))&&a.push(t[r].substring(t[r].indexOf(": ")+2))}return 1==a.length?a[0]:0!=a.length?a:void 0}}:e}this.ef=this.execFunc,this.clearApiCache=function(e,t,a){if(!Pe(e)&&!Pe(t)){var r=e+t;for(var i in Pe(a)||(r=a),ue)ue.hasOwnProperty(i)&&0==i.indexOf(r)&&delete ue[i]}},this.cac=this.clearApiCache,this.ajaxGet=function(e,t,a,r,i,n,s,o,l){Ye(e,"GET",t,"",null,a,r,i,n,s,o,l)},this.aj=this.ajaxGet,this.ajaxPost=function(e,t,a,r,i,n,s,o,l,d,u){Ye(e,"POST",t,a,r,i,n,s,o,l,d,u)},this.apo=this.ajaxPost,this.ajaxPut=function(e,t,a,r,i,n,s,o,l,d,u){Ye(e,"PUT",t,a,r,i,n,s,o,l,d,u)},this.apu=this.ajaxPut,this.ajaxDelete=function(e,t,a,r,i,n,s,o,l,d,u){Ye(e,"DELETE",t,a,r,i,n,s,o,l,d,u)},this.ad=this.ajaxDelete,this.ajaxCall=function(e,t,a,r,i,n,s,o,l,d,u,c){if(null==l&&(l=!0),l){var f=t+a+i;Qe(e,t,a,r,i,n,c).done(function(e,t,a){return function(r,i,n){null==r&&(r=n.responseText),c&&!isNaN(c)&&(ue[t]={t:(new Date).getTime(),d:r}),a&&(e?(e.unshift(r),a.apply(null,e)):a(r))}}(d,f,s)).fail(function(e,t,a){return function(t,r){null==t&&(t=r.responseText),a&&(e?(e.unshift(t),a.apply(null,e)):a(t))}}(u,0,o))}else{n=n||{},b&&("queryparam"===b.aTokenWhere?-1===a.indexOf("?")?a+="?"+b.aTokenName+"="+b.aTokenValue:"?"===a[a.length-1]?a+=b.aTokenName+"="+b.aTokenValue:a+="&"+b.aTokenName+"="+b.aTokenValue:"header"!==b.aTokenWhere||n.hasOwnProperty(b.aTokenName)||(n[b.aTokenName]=b.aTokenValue)),"application/json"===r&&!Fg.isN(i)&&Fg.is("String",i)&&JSON.parse(i),e&&St(!0);f=t+a+i;if(Ne("String",oe)){var m=Fg.execFunc(oe,[a,t]);m.valid&&m.result&&(n["X-Correlation-Id"]=m.result,-1==a.indexOf("?")?a+="?X_Correlation_Id="+m.result:"?"==a[a.length-1]?a+="X_Correlation_Id="+m.result:a+="&X_Correlation_Id="+m.result)}if(/get/i.test(t)&&(i=void 0,r=void 0),c&&ue[f]&&(new Date).getTime()-ue[f].t<c){e&&St(!1);var h=ue[f].d;s&&(d?(d.unshift(h),s.apply(null,d)):s(h))}else $.ajax({headers:n,type:t,processData:!1,url:a,contentType:r,data:i,async:l}).done((function(t,a,r){e&&St(!1);var i=r.responseJSON;if(null==i)try{i=JSON.parse(r.responseText)}catch(e){r.parseErr=e,i=r.responseText}c&&!isNaN(c)&&(ue[f]={t:(new Date).getTime(),d:i}),s&&(d?(d.unshift(i),s.apply(null,d)):s(i))})).fail((function(t,a,r){e&&St(!1);var i=t.responseJSON;if(null==i)try{i=JSON.parse(t.responseText)}catch(e){t.parseErr=e,i=t.responseText}o&&(u?(u.unshift(i),o.apply(null,u)):o(i))}))}};var Ye=this.ajaxCall;this.ac=this.ajaxCall,this.get=function(e,t,a,r){return Qe(e,"GET",t,"",null,a,r)},this.post=function(e,t,a,r,i,n){return Qe(e,"POST",t,a,r,i,n)},this.put=function(e,t,a,r,i,n){return Qe(e,"PUT",t,a,r,i,n)},this.del=function(e,t,a,r,i,n){return Qe(e,"DELETE",t,a,r,i,n)},this.api=function(e,t,a,r,i,n,s){if(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")||window.cordova||0==J){n=n||{},b&&("queryparam"==b.aTokenWhere?-1==a.indexOf("?")?a+="?"+b.aTokenName+"="+b.aTokenValue:"?"==a[a.length-1]?a+=b.aTokenName+"="+b.aTokenValue:a+="&"+b.aTokenName+"="+b.aTokenValue:"header"==b.aTokenWhere&&!n.hasOwnProperty(b.aTokenName)&&b.aTokenValue&&(n[b.aTokenName]=b.aTokenValue)),"application/json"==r&&!Fg.isN(i)&&Fg.is("String",i)&&JSON.parse(i),e&&St(!0);var l=t+a+i;if(Ne("String",oe))(u=Fg.execFunc(oe,[a,t])).valid&&u.result&&(n["X-Correlation-Id"]=u.result,-1==a.indexOf("?")?a+="?X_Correlation_Id="+u.result:"?"==a[a.length-1]?a+="X_Correlation_Id="+u.result:a+="&X_Correlation_Id="+u.result);if(/get/i.test(t)&&(i=void 0,r=void 0),s){if(ue[l]&&(new Date).getTime()-ue[l].t<s){var d=ue[l].d;return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,t){return function(){t&&Fg.freezeUI(!1),e._d&&e._d(d)}}(this,e),100),this}}.init()}return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,o){return function(){$.ajax({headers:n,type:t,processData:!1,dataType:"text",url:a,contentType:r,data:i,async:!0}).always((function(e,t,a){o&&St(!1)})).done((function(t,a,r){if(t="json"===r.responseType?r.response:void 0,204!=r.status&&!t&&r.responseText)try{t=JSON.parse(r.responseText),r.responseJSON=t}catch(e){r.parseErr=e,t=r.responseText}s&&!isNaN(s)&&(ue[l]={t:(new Date).getTime(),d:t}),e._d&&e._d(t,a,r)})).fail((function(t,a,r){if(r="json"===t.responseType?t.response:void 0,204!=t.status&&!r&&t.responseText)try{r=JSON.parse(t.responseText),t.responseJSON=r}catch(r){t.parseErr=r,r=t.responseText}e._f&&e._f(r,t,a)}))}}(this,e),100),this}}.init()}return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,s){return function(){$.ajax({headers:n,type:t,processData:!1,dataType:"text",url:a,contentType:r,data:i,async:!0}).always((function(e,t,a){s&&St(!1)})).done((function(t,a,r){if(t="json"===r.responseType?r.response:void 0,204!=r.status&&!t&&r.responseText)try{t=JSON.parse(r.responseText),r.responseJSON=t}catch(e){r.parseErr=e,t=r.responseText}e._d&&e._d(t,a,r)})).fail((function(t,a,r){if(r="json"===t.responseType?t.response:void 0,204!=t.status&&!r&&t.responseText)try{r=JSON.parse(t.responseText),t.responseJSON=r}catch(r){t.parseErr=r,r=t.responseText}e._f&&e._f(r,t,a)}))}}(this,e),100),this}}.init()}if(J>0){n=n||{},b&&("queryparam"==b.aTokenWhere?-1==a.indexOf("?")?a+="?"+b.aTokenName+"="+b.aTokenValue:"?"==a[a.length-1]?a+=b.aTokenName+"="+b.aTokenValue:a+="&"+b.aTokenName+"="+b.aTokenValue:"header"!=b.aTokenWhere||n.hasOwnProperty(b.aTokenName)||(n[b.aTokenName]=b.aTokenValue)),"application/json"==r&&!Fg.isN(i)&&Fg.is("String",i)&&JSON.parse(i);var u;l=t+a+i;if(Ne("String",oe))(u=Fg.execFunc(oe,[a,t])).valid&&u.result&&(n["X-Correlation-Id"]=u.result,-1==a.indexOf("?")?a+="?X_Correlation_Id="+u.result:"?"==a[a.length-1]?a+="X_Correlation_Id="+u.result:a+="&X_Correlation_Id="+u.result);/get/i.test(t)&&(i=void 0,r=void 0),se&&!Fg.isN(ie)&&se.test(a)&&0!=a.indexOf(ie)&&(a=0==a.indexOf("/")?ie+a:ie+"/"+a),e&&St(!0);var c=[t,a,r,i,n,s,e];if(s){if(ue[l]&&(new Date).getTime()-ue[l].t<s){d=ue[l].d;return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,t){return function(){t&&Fg.freezeUI(!1),e._d&&e._d(d)}}(this,e),100),this}}.init()}var f=o.execute(c);return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,t){f.done((function(a,r,i){s&&!isNaN(s)&&(ue[l]={t:(new Date).getTime(),d:a}),t&&Fg.freezeUI(!1),e._d&&e._d(a,r,i)})).fail((function(a,r){t&&St(!1),e._f&&e._f(a,r)}))}(this,e),100),this}}.init()}return o.execute(c)}};var Qe=this.api;function Ke(e,t,a,r,i){var n="";if(Ne("Object",r)){for(var s in r)r.hasOwnProperty(s)&&null!=r[s]&&void 0!==r[s]&&(n+=s+'="'+Ut(Fg.eh(r[s]))+'" ');r=n}if(null==i&&(i="div"),null==e||void 0===e)return[t,a,r,i];var o="",l="",d="";if(e.hasOwnProperty("el")&&(i=e.el),e.hasOwnProperty("attrpos")&&(o=e.attrpos),e.hasOwnProperty("stylepos")&&(l=e.stylepos),e.hasOwnProperty("classpos")&&(d=e.classpos),""==o&&(o="append"),""==l&&(l="append"),""==d&&(d="append"),void 0!==e.style&&""!=e.style&&("append"==l?t+=";"+e.style+";":t="prepend"==l?e.style+";"+t:e.style+";"),void 0!==e.attrs){var u="";for(var s in e.attrs)e.attrs.hasOwnProperty(s)&&null!=e.attrs[s]&&void 0!==e.attrs[s]&&(u+=s+'="'+Ut(Fg.eh(e.attrs[s]))+'" ');"append"==o?r+=" "+u:"prepend"==o?t=r+" "+u:r=u}return void 0!==e.class&&""!=e.class&&("append"==d?a+=" "+Fg.eh(e.class):a="prepend"==d?" "+Fg.eh(e.class)+" "+a:Fg.eh(e.class)+" "),[Ut(t),Ut(a),r,i]}function Ze(e,t,a,r,i,n,s,o,l,d,u,c,f,m,h){var g,p;s&&Ne("Array",s)?(g=s[0],s.length>1&&(p=s[1])):g=s;var v=!1;n&&n.hasOwnProperty("showhelptext")&&(v=1==n.showhelptext||1==n.showhelptext);var y,b,_=Fg.getString(Te.form.element.container.style),w=Fg.copy(Te.form.element.container.attrs),x=Fg.getString(Te.form.element.container.class),O=Fg.getString(Te.form.element.container.ele),$=Fg.getString(Te.form.element.label.style),k=Fg.copy(Te.form.element.label.attrs),T=Fg.getString(Te.form.element.label.class),S=Fg.getString(Te.form.element.label.ele),A=Fg.getString(Te.form.element.this.style),N=Fg.copy(Te.form.element.this.attrs),C=Fg.getString(Te.form.element.this.class),P=e,j=Fg.getString(Te.form.element.icon.style),D=Fg.copy(Te.form.element.icon.attrs),I=Fg.getString(Te.form.element.icon.class),B=Fg.getString(Te.form.element.icon.ele),E=void 0;void 0!==t&&(_=t[0],x=t[1],w=t[2],O=t.length>3?t[3]:O),void 0!==a&&($=a[0],T=a[1],k=a[2],S=a[3]>3?a[3]:S),void 0!==i&&(A=i[0],C=i[1],N=i[2],P=i[3]>3?i[3]:P),void 0!==r&&(j=r[0],I=r[1],D=r[2],B=r[3]>3?r[3]:B),!n||!0!==n.transient&&"true"!==n.transient||(N["faug-transient"]="yes");var z=void 0,V=void 0,M=void 0,R=void 0,L=void 0,U=void 0;Pe(o)||(z=o,o&&(void 0!==o.label&&(V=o.label.custom),void 0!==o.container&&(M=o.container.custom),void 0!==o.helpText&&(R=o.helpText.custom),void 0!==o.icon&&(L=o.icon.custom),b=o.customTemplate),"radio"!=E&&"checkbox"!=E||(C=C.replace("form-control",""))),Pe(n)||(z=n.custom,n.hasOwnProperty("custom")&&(void 0!==n.custom.label&&(V=n.custom.label.custom),void 0!==n.custom.container&&(M=n.custom.container.custom),void 0!==n.custom.helpText&&(y=n.custom.helpText,R=n.custom.helpText.custom),void 0!==n.custom.icon&&(L=n.custom.icon.custom),void 0!==n.custom.opts&&(U=n.custom.opts),void 0!==n.custom.customTemplate&&(b=n.custom.customTemplate)),"radio"!=(E=n.ui)&&"checkbox"!=E||(C=C.replace("form-control","")));var q=N.value,H=N.id;N.id=void 0;var J="";-1!=C.indexOf("faug-comp-add-button")?J=" faug-comp-add-button":-1!=C.indexOf("faug-comp-remove-button")?J=" faug-comp-remove-button":-1!=C.indexOf("faug-comp-min-button")?J=" faug-comp-min-button":-1!=C.indexOf("faug-comp-max-button")?J=" faug-comp-max-button":-1!=C.indexOf("faug-input-reset")?J=" faug-input-reset":-1!=C.indexOf("faug-input-submit")&&(J=" faug-input-submit"),-1!=C.indexOf("faug-comp-min-state")?J=" faug-comp-min-state":-1!=C.indexOf("faug-comp-max-state")&&(J=" faug-comp-max-state");var W=Ke(z,A,C,N,P);if(A=W[0],C=W[1],N=W[2],P=W[3],C+=J,$=(W=Ke(V,$,T,k,S))[0],T=W[1],k=W[2],S=W[3],j=(W=Ke(L,j,I,D,B))[0],I=W[1],D=W[2],B=W[3],_=(W=Ke(M,_,x,w,O))[0],x=W[1],w=W[2],O=W[3],O=je(O,"div"),S=je(S,"label"),P=je(P,e),B=je(B,"i"),n&&"html"==n.type&&n.value){var X=n.value;return!0===n.isTemplate&&(X=wt(X,It())),!0===n.container&&(X=Bt(O,null,_,x,w,X,!0)),X}Pe(n)||(n.type?N+=' faug-data-type="'+Ut(Fg.eh(n.type))+'" ':N+=' faug-data-type="other" ');var Y="";if(v){var Q=Fg.getString(Te.form.element.helptext.style),K=Fg.getString(Te.form.element.helptext.class),Z=Fg.copy(Te.form.element.helptext.attrs),ee=Fg.getString(Te.form.element.helptext.ele);!y||void 0!==y.show&&y.show||(Q="display:none;"),y&&(Y=y.value),Q=(W=Ke(R,Q,K,Z,ee))[0],K=W[1],Z=W[2],ee=W[3],Y=Bt(ee=je(ee,"span"),null,Q,K,Z,Y,!0)}var te="";L&&L.html&&(te=L.html);var ae=d?Bt(B,null,j,I,D,te,!0):"";V&&V.html&&(u=V.html),n.required&&n.required+"".toLowerCase()=="true"&&(V&&V.requiredHtml?u+=V.requiredHtml:Te.form.element.label.requiredHtml&&(u+=Te.form.element.label.requiredHtml));var re,ie=l?Bt(S,null,$,T,k,u,!0):"";n&&n.posistioning&&(re=n.posistioning,(""!=ie&&-1==re.indexOf("label")||""!=ae&&-1==re.indexOf("icon")||""!=Y&&-1==re.indexOf("helptext")||-1==re.indexOf("this"))&&(re=void 0)),re||(re=["label","icon","this","helptext","html"]);var ne=n?n.html:"";ne||(ne="");var se="value";(void 0!==n&&n.serializeValuePosition&&0==(se=n.serializeValuePosition).indexOf("a:")&&(se=se.substring(2)),void 0!==n&&n.serializeValueFunction)&&(N+=' faug-serialize-function="'+Ut(n.serializeValueFunction)+'" ');if(N+=' faug-serialize-position="'+Ut(Fg.eh(se))+'" ',(h=!0===h)&&(w+=' faug-read-only="true"'),void 0!==n&&c){var oe="",le=n.hasOwnProperty("default")?n.default:null,de=n.attrAssign;!Ne("Array",n.attrAssign)&&de&&(de=[n.attrAssign]),de||(de=[]);for(var ue=0;ue<de.length;ue++){var ce=de[ue];ce&&ce.to&&(ce.fromVar?oe=Ut(ce.to)+'"'+Ut(Fg.eh(It()[ce.fromVar]))+'" ':ce.fromRoute?oe=Ut(ce.to)+'"'+Ut(Fg.eh(F[G][ce.fromRoute]))+'" ':p&&ce.fromData&&(oe=Ut(ce.to)+'"'+Ut(Fg.eh(p[ce.fromData]))+'" '))}var fe=n.valueAssign;!Ne("Array",n.valueAssign)&&fe&&(fe=[n.valueAssign]),fe||(fe=[]);for(ue=0;ue<fe.length;ue++){var me=fe[ue];me&&(le=p&&me.fromData?p[me.fromData]:me.fromVar?It()[me.fromVar]:me.fromRoute?F[G][me.fromRoute]:It()[me])}var he=n.hasOwnProperty("defaultIndex")?n.defaultIndex:null;if(N+=n.hasOwnProperty("multiple")&&n.multiple?"multiple=true ":"",void 0!==E&&null!=E||(E="select"),E=E.toLowerCase(),null==(null!=f&&he<f.length&&he>=0?he:null)&&null!=le&&null==g&&(g=le),null!=g&&null!=f){he=null;for(ue=0;ue<f.length;ue++)if(f[ue][0]==g+""){he=ue;break}}var ge="";if(null!=g){var pe="str@"+g;Ne("Array",g)&&g.length>1&&(pe="jsn@"+Ut(JSON.stringify(g))),w+=' acvalue="'+Fg.eh(pe)+'"'}else he&&(w+=' acvalue="ind@'+he+'"');if(h)ge=Bt(P="div",null,A,C,N,ge="",!0);else if("select"==E){if(!0===n.addId&&(N+=' id="'+Ut(H)+'" '),n.hasOwnProperty("multiple")&&n.multiple?(N+="multiple=true ",C+=" faug-input-select-multiple "):C+=" faug-input-select ",P="select",null!=f){Pe(he);for(ue=0;ue<f.length;ue++){var ve=f[ue].length>1?f[ue][1]:f[ue][0],ye=null!=he&&he==ue?"selected":"";ge+='<option value="'+Ut(Fg.eh(f[ue][0]))+'" '+oe+ye+">"+Fg.eh(ve)+"</option>"}}ge=Bt(P,null,A,C,N,ge,!0)}else if("radio"==E){var be=Fg.getString(Te.form.radio.label.style),_e=Fg.copy(Te.form.radio.label.attrs),we=Fg.getString(Te.form.radio.label.class),Fe=Fg.getString(Te.form.radio.label.ele),xe=Fg.getString(Te.form.radio.container.style),Oe=Fg.copy(Te.form.radio.container.attrs),$e=Fg.getString(Te.form.radio.container.class),ke=Fg.getString(Te.form.radio.container.ele);z&&(z.innerlabel&&(Ie=z.innerlabel.custom),z.innercontainer&&(Be=z.innercontainer.custom)),xe=(W=Ke(Be,xe,$e,Oe,ke))[0],$e=W[1],Oe=W[2],ke=W[3],be=(W=Ke(Ie,be,we,null,Fe))[0],we=W[1],Fe=W[3];var Se="";if(Ie&&void 0!==Ie.labelpos&&null!==Ie.labelpos&&(Se=Ie.labelpos),""==Se&&(Se="contained"),null!=f){Pe(he),P=Fg.getString(Te.form.radio.this.ele),N+='type="radio" '+oe,C+=" faug-input-radio ";for(ue=0;ue<f.length;ue++){var Ae=N+'type="radio" value="'+Ut(Fg.eh(f[ue][0]))+'" ';H&&(Ae+=' id="'+Ut(H+ue)+'" ',_e||(_e={}),_e.for=H+ue);var Ce=(W=Ke(Ie,null,null,_e,null))[2];ve=f[ue].length>1?Fg.eh(f[ue][1]):Fg.eh(f[ue][0]);Ae+=null!=he&&he==ue?"checked":"";var De="";"before"==Se?(De=Bt(Fe,null,be,we,Ce,ve,!0),De+=Bt(P,null,A,C,Ae,null,!0)):"contained"==Se?(De=Bt(P,null,A,C,Ae,null,!0),De=Bt(Fe,null,be,we,Ce,ve+De,!0)):"after"==Se&&(De=Bt(P,null,A,C,Ae,null,!0),De+=Bt(Fe,null,be,we,Ce,ve,!0)),ge+=Bt(ke,null,xe,$e,Oe,De,!0)}}}else if("checkbox"==E){var Ie,Be;be=Fg.getString(Te.form.checkbox.label.style),_e=Fg.copy(Te.form.checkbox.label.attrs),we=Fg.getString(Te.form.checkbox.label.class),Fe=Fg.getString(Te.form.checkbox.label.ele),xe=Fg.getString(Te.form.checkbox.container.style),Oe=Fg.copy(Te.form.checkbox.container.attrs),$e=Fg.getString(Te.form.checkbox.container.class),ke=Fg.getString(Te.form.checkbox.container.ele);z&&(z.innerlabel&&(Ie=z.innerlabel.custom),z.innercontainer&&(Be=z.innercontainer.custom)),xe=(W=Ke(Be,xe,$e,null,ke))[0],$e=W[1],Oe=W[2],ke=W[3],be=(W=Ke(Ie,be,we,null,Fe))[0],we=W[1],Fe=W[3];Se="";if(Ie&&void 0!==Ie.labelpos&&null!==Ie.labelpos&&(Se=Ie.labelpos),""==Se&&(Se="contained"),null!=f){Pe(he),P=Fg.getString(Te.form.checkbox.this.ele),N+='type="checkbox" ',C+=" faug-input-checkbox ";for(ue=0;ue<f.length;ue++){Ae=N+'type="checkbox" value="'+Ut(f[ue][0])+'" ';H&&(Ae+=' id="'+Ut(H+ue)+'" ',_e||(_e={}),_e.for=H+ue);Ce=(W=Ke(Ie,null,null,_e,null))[2],ve=f[ue].length>1?Fg.eh(f[ue][1]):Fg.eh(f[ue][0]);Ae+=null!=he&&he==ue?'checked="checked"':"";De="";"before"==Se?(De=Bt(Fe,null,be,we,Ce,ve,!0),De+=Bt(P,null,A,C,Ae,null,!0)):"contained"==Se?(De=Bt(P,null,A,C,Ae,null,!0),De=Bt(Fe,null,be,we,Ce,ve+De,!0)):"after"==Se&&(De=Bt(P,null,A,C,Ae,null,!0),De+=Bt(Fe,null,be,we,Ce,ve,!0)),ge+=Bt(ke,null,xe,$e,Oe,De,!0)}}}if(b&&!1!==n.show){var Ee={label:ie,icon:ae,helptext:Y,html:ne,element:ge,cc:x,cs:_,ca:w};if(U)for(var ze in U)U.hasOwnProperty(ze)&&!/label|icon|helptext|customhtml|element|cc|cs|ca/.test(ze)&&(Ee[ze]=U[ze]);return wt(b,Ee,!1)}var Ve=ge;ge="";for(var Me=0;Me<re.length;Me++)"label"==re[Me]?ge+=ie:"icon"==re[Me]?ge+=ae:"helptext"==re[Me]?ge+=Y:"this"==re[Me]?ge+=Ve:"html"==re[Me]&&(ge+=ne);return Bt(O,null,_,x,w,ge,!0)}if(n&&!0===n.addId&&(N+=' id="'+Ut(H)+'" '),h&&(g=q,P="div"),("input"==P||"hidden"==P||Pe(g))&&(g=""),m)return Bt(P,null,A,C,N,g,!0);"input"!=P&&"hidden"!=P&&"textarea"!=P||E&&(C+=" faug-input-"+E+" ");var Re=n.elementHtml?n.elementHtml:Bt(P,null,A,C,N,Fg.eh(g),!0);if(!b||n&&!1===n.show){ge="";for(Me=0;Me<re.length;Me++)"label"==re[Me]?ge+=ie:"icon"==re[Me]?ge+=ae:"helptext"==re[Me]?ge+=Y:"this"==re[Me]?ge+=Re:"html"==re[Me]&&(ge+=ne);return Bt(O,null,_,x,w,ge,!0)}return wt(b,Ee={label:ie,icon:ae,helptext:Y,html:ne,element:Re,cc:x,cs:_,ca:w},!1)}var et="abcdefghijklmnopqrstuvwxyz ~`!@#$%^&*()_+-=[]\\;'/.,<>?:\"{}|";function tt(e,t){void 0===t&&(t=e.getAttribute("faug-data-type")),"boolean"==(t=t.toLowerCase())?isBoolean(e.value)||x&&alert("A Boolean value was expected.."):"number"==t||"integer"==t?isNumber(e.value)||(x&&alert("A Numeric value was expected.."),e.value=""):"aplha-strict"==t?isStrictAlpha(e.value)||(x&&alert("A Strict alphabetical value was expected.."),e.value=""):"alpha"==t?isAlpha(e.value)||(x&&alert("A Alphabetical value was expected.."),e.value=""):"alpha-numeric"==t?isAlphaNumeric(e.value)||(x&&alert("An Alphanumeric value was expected.."),e.value=""):"float"==t||"double"==t?isFloat(e.value)||(x&&alert("A Floating point value was expected.."),e.value=""):"char"==t&&1!=e.value.length&&x&&alert("A Character value was expected..")}function at(e,a,r,i,n,s,o,u,c,f,g,v){var b,x,O;if(v=!0===v,s&&Ne("Array",s)?(b=s[0],s.length>1&&(x=s[1])):b=s,Fg.isN(r)||Fg.isN(r.type))return"";if("copyof"==r.type&&!Pe(r.target)){if(e.properties&&e.properties[r.target]){var k=JSON.parse(JSON.stringify(e.properties[r.target]));return Pe(r.show)||(k.show=r.show),Pe(r.display)||(k.display=r.display),Pe(r.events)||(k.events=r.events),Pe(r.section)||(k.section=r.section),Pe(r.groupMarker)||(k.groupMarker=r.groupMarker),at(e,a,k,i,n,s,o,u,c,f,void 0,v)}return""}if("html"==r.type&&r.value){if(r.showForAliases&&r.showForAliases.length>0&&-1==r.showForAliases.indexOf(a.name)||r.hideForAliases&&r.hideForAliases.length>0&&-1!=r.hideForAliases.indexOf(a.name))return"";if(r.condition&&!ze(r.condition,void 0,[a,r,b]))return"";var T=Fg.getString(Te.form.element.container.style),S=Fg.copy(Te.form.element.container.attrs),A=Fg.getString(Te.form.element.container.class);if(r.custom&&r.custom.container&&"clear"!==r.custom.container.classpos&&(A=Fg.getString(Te.form.element.container.class)),null!=n&&void 0!==n)if(Ne("Array",n))for(var D=0;D<n.length;D++)for(var I in n[D])n[D].hasOwnProperty(I)&&(S[I]=n[D][I]);else if(Ne("Object",n))for(var I in n)S[I]=n[I];var B=!0;return r.hasOwnProperty("show")&&(B=r.show),B||(T+="display:none;"),/true|yes|1/.test(r.required)&&(A+=" required has-error"),S.id=i+"_cont",Ze(Te.form.element.container.ele+"",[T,A,S],void 0,void 0,void 0,r,void 0,f,!1,!1,"",!0,[],void 0,v)}if("string"==(O=r.type)||"number"==O||"integer"==O||"file"==O||"fileasbase64"==O||"boolean"==O||"date"==O||"float"==O||"double"==O||"decimal"==O||"datetime"==O||"time"==O||"timestamp"==O||"customdate"==O||"email"==O||"url"==O||"password"==O){if(r.showForAliases&&r.showForAliases.length>0&&-1==r.showForAliases.indexOf(a.name)||r.hideForAliases&&r.hideForAliases.length>0&&-1!=r.hideForAliases.indexOf(a.name))return"";if(r.condition&&!ze(r.condition,void 0,[a,r,b]))return"";var E=!1,z=(T=Fg.getString(Te.form.element.container.style),S=Fg.copy(Te.form.element.container.attrs),A=Fg.getString(Te.form.element.container.class),Fg.getString(Te.form.element.container.ele)),V=Fg.getString(Te.form.element.label.style),M=Fg.copy(Te.form.element.label.attrs),R=Fg.getString(Te.form.element.label.class),L=(Fg.getString(Te.form.element.label.ele),Fg.getString(Te.form.element.this.style)),U=Fg.copy(Te.form.element.this.attrs),q=Fg.getString(Te.form.element.this.class),H=(Fg.getString(Te.form.element.this.ele),Fg.getString(Te.form.element.icon.style)),J=Fg.copy(Te.form.element.icon.attrs),W=Fg.getString(Te.form.element.icon.class);Fg.getString(Te.form.element.icon.ele);(r.custom&&r.custom.container&&"clear"!==r.custom.container.classpos||!r.custom||!r.custom.container)&&(A=Fg.getString(Te.form.element.container.class));var X=null==b?"":b,Y=b;if("string"==typeof X&&""!=X&&(X=X.replace(/"/g,"&quot;")),null!=n&&void 0!==n)if(Ne("Array",n))for(D=0;D<n.length;D++)for(var I in n[D])n[D].hasOwnProperty(I)&&(S[I]=n[D][I]);else if(Ne("Object",n))for(var I in n)S[I]=n[I];var Q={};Q.name=i,Q.id=i,r.hasOwnProperty("isattr")&&(Q.isattr=r.isattr),m[a.name]&&r.hasOwnProperty("edit")&&!r.edit&&(Q.disabled=!0),r.hasOwnProperty("showlabel")&&(u&=1==r.showlabel||1==r.showlabel),r.hasOwnProperty("showicon")&&(E=1==r.showicon||1==r.showicon),(r.custom&&"clear"!==r.custom.classpos||!r.custom)&&(q=Fg.getString(Te.form.element.this.class));var K=null;null!=c&&(K=c.substring(0,1).toUpperCase()+c.substring(1)),r.hasOwnProperty("display")&&(K=ee&&!1!==r.translate?Fg.translate(r.display):r.display);B=!0;r.hasOwnProperty("show")&&(B=r.show);var Z=!1;B&&!1!==r.decoratePicker&&("date"==r.type?(Z=!0,q+=" faug-date ",Q["faug-date-format"]=N):"datetime"==r.type?(Z=!0,q+=" faug-datetime ",Q["faug-date-format"]=C):"time"==r.type?(Z=!0,q+=" faug-time ",Q["faug-date-format"]=P):"timestamp"==r.type?(Z=!0,q+=" faug-timestamp ",Q["faug-date-format"]=j):"customdate"==r.type&&(Z=!0,q+=" faug-customdate "),r.dateFormat&&(Q["faug-date-format"]=r.dateFormat),""===r.default?(X=null,Q["faug-date-default"]=""):Q["faug-date-default"]="val"),B||(T+="display:none;");var te={};r.hasOwnProperty("events")&&(te=Fg.copy(r.events)),r.validations&&r.validations.cond||(r.validations=void 0),/true|yes|1/.test(r.required+"")&&!0!==r["added--required"]&&(r.validations||(r.validations={},r.validations.cond=[]),r.validations.cond.push(["len|>|0:this@value",K+Te.form.element.helptext.errorText]),r.validations.errorselector="helpText",r["added--required"]=!0);r.hasOwnProperty("multiple")&&r.multiple;var ae=function(e,t,a,r){return function(r,i){var n=!0;if((e.validationForAliases&&e.validationForAliases.length>0&&-1==e.validationForAliases.indexOf(t.name)||e.noValidationForAliases&&e.noValidationForAliases.length>0&&-1!=e.noValidationForAliases.indexOf(t.name))&&(n=!1),n&&e.validations){if(!/true|yes|1/.test(e.required)&&Fg.isN(r.val()))return;var s=Ve(e.validations,r);if(s[0]){if("helpText"==e.validations.errorselector)0==(u=(o=r.parent()).find(".help-block")).length?(u=(o=Ce(a+"_cont")).find(".help-block")).length>0&&u.hide():u.hide(),o.addClass("has-success"),o.removeClass("has-error")}else{for(var o,u,c=s[1],f="",m=0;m<c.length;m++)if(c[m]){f+=Fg.eh(c[m])+"<br/>";break}if("helpText"==e.validations.errorselector)0==(u=(o=r.parent()).find(".help-block")).length?(u=(o=Ce(a+"_cont")).find(".help-block")).length>0&&(u.html(f),u.show()):(u.html(f),u.show()),o.addClass("has-error"),o.removeClass("has-success");tt(r[0],e.type),"text"!=r.attr("type")&&"number"!=r.attr("type")&&"url"!=r.attr("type")&&"email"!=r.attr("type")||r.val("")}}else n&&tt(r[0],e.type);if(He(t.callbacks,"modelChanged",[r]),!Pe(e.copyto)){var h=e.copyto.split(",");for(var g in h){var p="";-1!=a.lastIndexOf("['")?(p=a.substring(0,a.lastIndexOf("['")),p+="['"+h[g]+"']"):p=h[g],r.val()&&$('[name="'+p+'"]').val(r.val())}}if(void 0!==t.__ishelper&&void 0===t.form.submit){void 0!==t.resetStartOnModelChange&&t.resetStartOnModelChange&&void 0!==t.crudop&&(t.crudop.start=0);var v=Ce(t.id).serializeObject(t.name,!0);(n=ze(e.cond,r))&&yt({schemaName:t.schemaName,op:t.crudopName},t.defviewerId,!0,!0,v)}if($(r).attr("ftype")&&"file"==$(r).attr("type")&&(r[0].files[0].size/1024/1024).toFixed(4)>l)return Fg.execFunc(d,[r]),!1;if($(r).attr("ftype")&&"base64"==$(r).attr("ftype")&&"file"==$(r).attr("type")){var y=new FileReader;y.onloadend=function(e){return function(){var t=this.result;if(-1!=t.indexOf("data:image")&&$(e).attr("compress")&&1*$(e).attr("compress")<100&&1*$(e).attr("compress")>0)try{var a=1*$(e).attr("compress"),r=t.substring(t.indexOf(":")+1,t.indexOf(";")),i=new Image;i.src=t;var n=document.createElement("canvas");n.width=i.naturalWidth,n.height=i.naturalHeight;n.getContext("2d").drawImage(i,0,0);t=n.toDataURL(r,a/100)}catch(e){}e.data=t.substring(t.indexOf(",")+1)}}(r[0]),y.readAsDataURL(r[0].files[0])}}}(r,a,i),re="change",ie=!1;if(!r.noevents){void 0===te[re]?(te[re]=[],te[re][0]=ae):te[re].push(ae);var ne=function(e,t){if(("INPUT"==e.prop("tagName")||"TEXTAREA"==e.prop("tagName"))&&$e&&ke)if(e.attr("data-rgo","1"),e.attr("data-regex")&&ke){if(""!=e.val()&&"file"!=e.prop("type")&&!new RegExp(e.attr("data-regex")).test(e.val()))return Fg.execFunc(ke,[e]),t.stopPropagation(),!1}else if("file"!=e.prop("type")&&""!=e.val()&&!$e.test(e.val()))return Fg.execFunc(ke,[e]),t.stopPropagation(),!1};if(void 0===te.input?(te.input=[],te.input[0]=ne):te.input.push(ne),Z&&r.dateConfig){var se=function(e,a,r,i){return function(a,r){var i=N;a.attr("faug-date-format")&&(i=a.attr("faug-date-format"));var n,s=!a.hasClass("faug-date");a.val()?n=a.val():""===e.dateConfig.value||""===a.attr("faug-date-default")?n=void 0:"val"===a.attr("faug-date-default")&&(n=t.formatDate(null,i)),t.configureDateTimePicker(a,e.dateConfig,Le,r,i,n,s)}}(r);void 0===te[re="default"]?(te[re]=[],te[re][0]=se):te[re].push(se)}if((r.templateFile||r.genericTemplateFile)&&r.enum&&r.enum.length>0){ie=!0;var oe=function(e,t,a,r,i,n){return function(r,s){var o=e.hasOwnProperty("default")?e.default:null;Pe(i)&&(i=o);var l=e.valueAssign;!Ne("Array",e.valueAssign)&&l&&(l=[e.valueAssign]),l||(l=[]);for(var d=0;d<l.length;d++){var u=l[d];u&&(i=n&&u.fromData?n[u.fromData]:u.fromVar?It()[u.fromVar]:u.fromRoute?F[G][u.fromRoute]:It()[u])}var c={};for(var f in e.vars)if(e.vars.hasOwnProperty(f)){var h=Ie(e.vars[f],r);h[0]&&(c[f]=h[1])}var g=e.templateFile?"templateFile":"genericTemplateFile",p=void 0!==a.__ishelper?a.id:void 0;p||(m[a.name]&&(p=a.editForm.id),p||(p=a.form.id));var v={isTransient:!0===e.transient||"true"===e.transient,elName:t,rows:e.enum,selectedVal:i,details:a,vars:c},y=xt(e[g],v);Faug.byId(t+"_cont").append(y),Nt(void 0,a,p,t,!0)}}(r,i,a,void 0!==a.__ishelper?a.id:a.form.id,Y,x);void 0===te[re="defaultOnce"]?(te[re]=[],te[re][0]=oe):te[re].push(oe)}}if(h[a.name][i]=te,U=mergeVars(U,Q),/true|yes|1/.test(r.required)&&(q+=" required",A+=" required",U.required=!0),q+=" faug-"+r.type+"-type",U["faug-data-type"]=r.type,S.id=i+"_cont","boolean"==r.type)return Ze("select",[T,A,S],[V,R,M],[H,W,J],[L,q,U],r,[Y,x],f,u,E,K,!0,[["false"],["true"]],void 0,v);if(r.hasOwnProperty("enum")){var le=null;if(Ne("Array",r.enum)&&r.enum.length>0)le=r.enum;else if(Ne("String",r.enum)){le=null;var de=window[r.enum];le="function"==typeof de?de():de}return ie&&(le=[]),Ze("select",[T,A,S],[V,R,M],[H,W,J],[L,q,U],r,[Y,x],f,u,E,K,!0,le,void 0,v)}if(r.hasOwnProperty("ui")&&"textarea"==r.ui){var ue=r.hasOwnProperty("default")?r.default:null;Pe(X)&&(X=ue);var ce=r.attrAssign;!Ne("Array",r.attrAssign)&&ce&&(ce=[r.attrAssign]),ce||(ce=[]);for(var fe=0;fe<ce.length;fe++){(ge=ce[fe])&&ge.to&&(ge.fromVar?U[ge.to]=It()[ge.fromVar]:ge.fromRoute?U[ge.to]=F[G][ge.fromRoute]:x&&ge.fromData&&(U[ge.to]=x[ge.fromData]))}var me=r.valueAssign;!Ne("Array",r.valueAssign)&&me&&(me=[r.valueAssign]),me||(me=[]);for(fe=0;fe<me.length;fe++){(pe=me[fe])&&(X=x&&pe.fromData?x[pe.fromData]:pe.fromVar?It()[pe.fromVar]:pe.fromRoute?F[G][pe.fromRoute]:It()[pe])}return Ze("textarea",[T,A,S],[V,R,M],[H,W,J],[L,q,U],r,[X,x],f,u,E,K,void 0,void 0,void 0,v)}var he=r.ui;void 0!==he&&null!=he||(he="text"),"file"==r.type?(y[a.name]=!0,he="file"):"fileasbase64"==r.type?(he="file",U.ftype="base64"):"url"==r.type?(he="url",U.ftype="url"):"email"==r.type?(he="email",U.ftype="email"):"password"==r.type?(he="password",U.ftype="password"):r.type,U.type=he;ue=!Z&&r.hasOwnProperty("default")?r.default:null;Pe(X)&&(X=ue);ce=r.attrAssign;!Ne("Array",r.attrAssign)&&ce&&(ce=[r.attrAssign]),ce||(ce=[]);for(fe=0;fe<ce.length;fe++){var ge;(ge=ce[fe])&&ge.to&&(ge.fromVar?U[ge.to]=It()[ge.fromVar]:ge.fromRoute?U[ge.to]=F[G][ge.fromRoute]:x&&ge.fromData&&(U[ge.to]=x[ge.fromData]))}me=r.valueAssign;!Ne("Array",r.valueAssign)&&me&&(me=[r.valueAssign]),me||(me=[]);for(fe=0;fe<me.length;fe++){var pe;(pe=me[fe])&&(X=x&&pe.fromData?x[pe.fromData]:pe.fromVar?It()[pe.fromVar]:pe.fromRoute?F[G][pe.fromRoute]:It()[pe])}return U.value=X,r.ui=r.ui?r.ui:he,Ze("input",[T,A,S],[V,R,M],[H,W,J],[L,q,U],r,null,f,u,E,K,void 0,void 0,void 0,v)}if("object"==r.type){if(r.showForAliases&&r.showForAliases.length>0&&-1==r.showForAliases.indexOf(a.name)||r.hideForAliases&&r.hideForAliases.length>0&&-1!=r.hideForAliases.indexOf(a.name))return"";if(r.condition&&!ze(r.condition,void 0,[a,r,b]))return"";if(r.hasOwnProperty("properties")){var ve;""==i&&(i=a.name),ve=i+"_cont";var ye=null==b?{}:b,be="";r.hasOwnProperty("section")&&(be=Bt(Fg.getString(Te.form.object.section.ele),r.custom.headerlb,"",null,null,r.section,!0,!1,!1,null,null));B=!0;r.hasOwnProperty("show")&&(B=r.show);T=Fg.getString(Te.form.object.container.style),S={id:ve},A=Fg.getString(Te.form.object.container.class),z=Fg.getString(Te.form.object.container.ele);if(B||(T+="display:none;"),T=(vt=Ke(r.custom,T,A,S,z))[0],A=vt[1],S=vt[2],z=vt[3],z=je(z,"div"),null!=n&&void 0!==n)if(Ne("Array",n))for(D=0;D<n.length;D++)for(var I in n[D])n[D].hasOwnProperty(I)&&(S+=" "+Fg.eh(I)+'="'+Fg.eh(n[D][I])+'" ');else if(Ne("Object",n))for(var I in n)S+=" "+Fg.eh(I)+'="'+Fg.eh(n[I])+'" ';null!=b&&void 0!==r.editMinimize&&r.editMinimize&&(T+=";display:none;");var _e=i;0==_e.indexOf(a.name)&&(_e=_e.replace(a.name,""));var we="",Fe=!Pe(r.template)||!Pe(r.templateFile),xe={};Fe||(we=be);var Oe=!1;if(r.propertyOrder)for(var Se=0;Se<r.propertyOrder.length;Se++)if(r.propertyOrder[Se]in r.properties){Oe=!0;break}for(var Ae in r.properties)if(r.properties.hasOwnProperty(Ae)){(St=i)&&""!=St?St+="['"+Ae+"']":St=Ae,null!=b&&void 0!==r.editMinimize&&r.editMinimize,o=o&&r.hasOwnProperty("isSpan")&&r.isSpan,r.hasOwnProperty("nolabel")&&r.nolabel&&(u=!1);var De=r.properties[Ae],Be=_e.replace("['",".").replace(/'|\[|\]|[\[0-9\]]+/g,"")+"."+Ae;0==Be.indexOf(".")&&(Be=Be.substring(1));var Ee=at(r,a,De,St,[{"ffead-pth":Be}],[ye[Ae],ye],o,u,Ae,f,void 0,v);De&&!0===De.groupMarker&&(Ee+=Fg.getString(Te.form.groupMarker.html)),Fe||Oe?xe[Ae]=Ee:we+=Ee}if(Fe)we=Pe(r.template)?p[r.templateFile]?p[r.templateFile].apply(null,[xe]):t.templateEngine(r.templateFile,xe,!1,!0):wt(r.template,xe,!1);else if(Oe){for(Se=0;Se<r.propertyOrder.length;Se++)r.propertyOrder[Se]in xe&&(we+=xe[r.propertyOrder[Se]],delete xe[r.propertyOrder[Se]]);for(var Ae in xe)xe.hasOwnProperty(Ae)&&(we+=xe[Ae])}return Bt(z,null,T,A,S,we,!0)}}else if("array"==r.type){if(r.showForAliases&&r.showForAliases.length>0&&-1==r.showForAliases.indexOf(a.name)||r.hideForAliases&&r.hideForAliases.length>0&&-1!=r.hideForAliases.indexOf(a.name))return"";if(r.condition&&!ze(r.condition,void 0,[a,r,b]))return"";if(r.hasOwnProperty("items")){void 0===r.custom&&(r.custom={}),void 0===r.items.custom&&(r.items.custom={}),(St=i)&&""!=St||(St=""),_.hasOwnProperty(St)||(_[St]=0),w[St]=r.items;ye=null==b?[]:b;if(r.initialentries&&(null==ye||0==ye.length)){ye=[];for(fe=0;fe<r.initialentries;fe++)ye.push(null)}ye.length>_[St]&&(rvalue=ye[_[St]]);be="",K=c.substring(0,1).toUpperCase()+c.substring(1);r.hasOwnProperty("display")&&(K=r.display);B=!0;r.hasOwnProperty("show")&&(B=r.show);T=Fg.getString(Te.form.array.container.style),A=Fg.getString(Te.form.array.container.class),S={id:St+"_cont"},z=Fg.getString(Te.form.array.container.ele);if(T=(vt=Ke(r.custom,T,A,S,z))[0],A=vt[1],S=vt[2],z=vt[3],B||(T+="display:none;"),z=je(z,"div"),null!=n&&void 0!==n)if(Ne("Array",n))for(D=0;D<n.length;D++)for(var I in n[D])n[D].hasOwnProperty(I)&&(S+=" "+Fg.eh(I)+'="'+Fg.eh(n[D][I])+'" ');else if(Ne("Object",n))for(var I in n)S+=" "+Fg.eh(I)+'="'+Fg.eh(n[I])+'" ';!1===r.nolabel&&(be=r.hasOwnProperty("section")?Bt(Fg.getString(Te.form.array.section.ele),r.custom.headerlb,Fg.getString(Te.form.array.section.style),null,null,r.section,!0,!1,!1,null,null):Bt(Fg.getString(Te.form.array.section.eleIfAbsent),r.custom.headerlb,Fg.getString(Te.form.array.section.style),null,null,K,!0,!1,!1,null,null));var Me="";if(!1===r.noaddbutton&&!v){void 0===r.custom.addButton&&(r.custom.addButton={}),void 0===r.custom.addButton.custom&&(r.custom.addButton.custom={}),r.custom.addButton.custom.attrpos="append";var Re="Add";r.custom.addButton.text&&(Re=r.custom.addButton.text),r.custom.addButton.html&&(Re=r.custom.addButton.html),Me=Ze(Te.form.array.addButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.array.addButton.style),Fg.getString(Te.form.array.addButton.class)+" faug-comp-add-button",{type:"button",list_value_cls:St}],r.custom.addButton,Re,f,!1,!1,null,!1,null,!0)}var Ue="";if(!1===r.norembutton&&!v){void 0===r.custom.remButton&&(r.custom.remButton={}),void 0===r.custom.remButton.custom&&(r.custom.remButton.custom={}),r.custom.remButton.custom.attrpos="append";Re="Remove";r.custom.remButton.text&&(Re=r.custom.remButton.text),r.custom.remButton.html&&(Re=r.custom.remButton.html),Ue=Ze(Te.form.array.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.array.remButton.style),Fg.getString(Te.form.array.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:St}],r.custom.remButton,Re,f,!1,!1,null,!1,null,!0)}we=Bt(Fg.getString(Te.form.array.header.ele),r.custom.header,Fg.getString(Te.form.array.header.style),null,null,be+Ue+Me,!0,!1,!1,null,null),u=null==r.items.nolabel||!r.items.nolabel;if(ye.length>0){!0;var qe=Fg.getString(Te.form.array.this.container.ele),We=Fg.getString(Te.form.array.this.container.style),Xe=Fg.getString(Te.form.array.this.container.class),Ge=Fg.copy(Te.form.array.this.container.attrs);We=(vt=Ke(r.items.custom.container,We,Xe,Ge,qe))[0],Xe=vt[1],Ge=vt[2],qe=vt[3],qe=je(qe,"div");var Ye=Fg.getString(Te.form.array.this.header.ele);void 0!==r.items.custom&&(Ye=r.items.custom.el),null!=Ye&&""!==Ye||(Ye="div");var Qe=ye.length;S+=" faug-tot-size="+Qe,Qe>20&&(Qe=void 0!==r.maxobjects?r.maxobjects:20),S+=" faug-curr-size="+Qe,S+=" faug-offset="+Qe;for(var et=0;et<Qe;et++){var rt=St+"["+et+"]";_[St]=et;var it="",nt="",st="";if(!0===r.items.itemrembutton){void 0===r.items.custom.remButton&&(r.items.custom.remButton={}),void 0===r.items.custom.remButton.custom&&(r.items.custom.remButton.custom={}),r.items.custom.remButton.custom.attrpos="append";Re="Remove";r.items.custom.remButton.text&&(Re=r.items.custom.remButton.text),r.items.custom.remButton.html&&(Re=r.items.custom.remButton.html),st=Ze(Te.form.array.this.header.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.array.this.header.remButton.style),Fg.getString(Te.form.array.this.header.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:St,"ffead-el-link":rt+"_cont"}],r.items.custom.remButton,Re,f,!1,!1,null,!1,null,!0)}if(!1===r.items.nominmaxbutton){if(ye[et])if(r.items.summaryTemplate){var ot=!(!Pe(r.summaryTemplateDynamic)&&!0!==r.summaryTemplateDynamic);nt+=wt(r.items.summaryTemplate,ye[et],ot)}else if(r.items.summaryTemplateFunc){(Ot=Je(r.items.summaryTemplateFunc,[ye[et]])).valid&&(nt+=Ot.result)}if(!v){var lt="display:none;";null!=b&&void 0!==r.items.editMinimize&&r.items.editMinimize&&(lt=""),nt=Bt(Fg.getString(Te.form.array.this.header.minlabel.ele),r.items.custom.minlabel,lt,null,null,nt,!0,!1,!1,null,null),void 0===r.custom.minmaxbutton&&(r.custom.minmaxbutton={}),void 0===r.custom.minmaxbutton.custom&&(r.custom.minmaxbutton.custom={}),r.custom.minmaxbutton.custom.attrpos="append";var dt=Ut(rt,"'"),ut=Ut(St,"'");($t={})["faug-comp-min-state"]=r.custom.minmaxbutton.custom["faug-comp-min-state"],$t["faug-comp-max-state"]=r.custom.minmaxbutton.custom["faug-comp-max-state"],$t["faug-comp-min-state"]||($t["faug-comp-min-state"]="-"),$t["faug-comp-max-state"]||($t["faug-comp-max-state"]="+"),$t.cntid=dt,$t.schnm=ut,$t.type="button";var ct=$t["faug-comp-min-state"],ft="faug-comp-min-button faug-comp-min-state";null!=b&&void 0!==r.items.editMinimize&&r.items.editMinimize&&(ct=$t["faug-comp-max-state"],ft="faug-comp-max-button faug-comp-max-state"),nt+=Bt(Fg.getString(Te.form.array.this.header.minmaxButton.ele),r.items.custom.minmaxbutton,Fg.getString(Te.form.array.this.header.minmaxButton.style),ft,$t,ct,!0)}}it+=Bt(Ye,r.items.custom,null,"clearfix",null,st+nt,!0,!1,!1,null,null);var mt=at(r.items,a,r.items,rt,{},[ye[et],ye],!1,u,kt,f,void 0,v);!0===r.items.groupMarker&&(mt+=Fg.getString(Te.form.groupMarker.html));var ht=Ge+' data-pos="'+et+'"';we+=Bt(qe,r.custom.container,We,Xe,ht,it+mt,!0)}if(ye.length>Qe){var gt=(new Date).getTime(),pt=St;pt=(pt=(pt=pt.replace(/\[/g,"")).replace(/\]/g,".")).replace(/'/g,""),h[a.name]["faug-load-more"]={__internal__:void 0},we+=Bt("a",r.custom.loadmore,null,"faug-load-more",{posref:pt,schname:a.name,ident:gt,total:ye.length,size:Qe,current:Qe,list_value_cls:St},"Load More...",!0)}}else S+=" faug-tot-size=0 faug-curr-size=0 faug-offset=0";return Bt(z,null,T,A,S,we,!0)}}else if("marray"==r.type){if(r.showForAliases&&r.showForAliases.length>0&&-1==r.showForAliases.indexOf(a.name)||r.hideForAliases&&r.hideForAliases.length>0&&-1!=r.hideForAliases.indexOf(a.name))return"";if(r.condition&&!ze(r.condition,void 0,[a,r,b]))return"";if(r.hasOwnProperty("items")){(St=i)&&""!=St||(St=""),_.hasOwnProperty(St)||(_[St]=0),w[St]=r.items;ye=null==b?{}:b,be="",K=c.substring(0,1).toUpperCase()+c.substring(1);r.hasOwnProperty("display")&&(K=r.display);B=!0;r.hasOwnProperty("show")&&(B=r.show);T=Fg.getString(Te.form.array.container.style),A=Fg.getString(Te.form.array.container.class),S={id:St+"_cont"},z=Fg.getString(Te.form.array.container.ele);if(T=(vt=Ke(r.custom,T,A,S,z))[0],A=vt[1],S=vt[2],z=vt[3],B||(T+="display:none;"),z=je(z,"div"),null!=n&&void 0!==n)if(Ne("Array",n))for(D=0;D<n.length;D++)for(var I in n[D])n[D].hasOwnProperty(I)&&(S+=" "+Fg.eh(I)+'="'+Fg.eh(n[D][I])+'" ');else if(Ne("Object",n))for(var I in n)S+=" "+Fg.eh(I)+'="'+Fg.eh(n[I])+'" ';!1===r.nolabel&&(be=r.hasOwnProperty("section")?Bt(Fg.getString(Te.form.array.section.ele),r.custom.headerlb,Fg.getString(Te.form.array.section.style),null,null,r.section,!0,!1,!1,null,null):Bt(Fg.getString(Te.form.array.section.eleIfAbsent),r.custom.headerlb,Fg.getString(Te.form.array.section.style),null,null,K,!0,!1,!1,null,null));Me="";if(!1===r.noaddbutton&&!v){void 0===r.custom.addButton&&(r.custom.addButton={}),void 0===r.custom.addButton.custom&&(r.custom.addButton.custom={}),r.custom.addButton.custom.attrpos="append";Re="Add";r.custom.addButton.text&&(Re=r.custom.addButton.text),r.custom.addButton.html&&(Re=r.custom.addButton.html),Me=Ze(Te.form.array.addButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.array.addButton.style),Fg.getString(Te.form.array.addButton.class)+" faug-comp-add-button",{type:"button",list_value_cls:St}],r.custom.addButton,Re,f,!1,!1,null,!1,null,!0)}Ue="";if(!1===r.norembutton&&!v){void 0===r.custom.remButton&&(r.custom.remButton={}),void 0===r.custom.remButton.custom&&(r.custom.remButton.custom={}),r.custom.remButton.custom.attrpos="append";Re="Remove";r.custom.remButton.text&&(Re=r.custom.remButton.text),r.custom.remButton.html&&(Re=r.custom.remButton.html),Ue=Ze(Te.form.array.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.array.remButton.style),Fg.getString(Te.form.array.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:St}],r.custom.remButton,Re,f,!1,!1,null,!1,null,!0)}we=Bt(Fg.getString(Te.form.array.header.ele),r.custom.header,Fg.getString(Te.form.array.header.style),null,null,be+Ue+Me,!0,!1,!1,null,null);var vt,bt=null!=r.items.isSpan&&r.items.isSpan,_t=(u=null==r.items.nolabel||!r.items.nolabel,De=r.items.properties.value,r.items.properties.key);qe=Fg.getString(Te.form.array.this.container.ele),We=Fg.getString(Te.form.array.this.container.style),Xe=Fg.getString(Te.form.array.this.container.class),Ge=Fg.copy(Te.form.array.this.container.attrs);We=(vt=Ke(r.items.custom.container,We,Xe,Ge,qe))[0],Xe=vt[1],Ge=vt[2],qe=vt[3],qe=je(qe,"div");Ye=Fg.getString(Te.form.array.this.header.ele);void 0!==r.items.custom&&(Ye=r.items.custom.el),null!=Ye&&""!==Ye||(Ye="div"),"object"!=De.type&&(w[St].showMinMax=!1);var Ft=0;for(var Ae in ye){rt=St+"["+Ft+"]";if(ye.hasOwnProperty(Ae)){nt="";if(!0===r.items.itemrembutton&&!v){void 0===r.items.custom.remButton&&(r.items.custom.remButton={}),void 0===r.items.custom.remButton.custom&&(r.items.custom.remButton.custom={}),r.items.custom.remButton.custom.attrpos="append";Re="Remove";r.items.custom.remButton.text&&(Re=r.items.custom.remButton.text),r.custom.remButton.html&&(Re=r.items.custom.remButton.html),nt=Ze(Te.form.array.this.header.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.array.this.header.remButton.style),Fg.getString(Te.form.array.this.header.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:St,"ffead-el-link":rt+"_cont"}],r.items.custom.remButton,Re,f,!1,!1,null,!1,null,!0)}if(!1===r.items.nominmaxbutton){if(ye[Ae])if(r.items.summaryTemplate){ot=!(!Pe(r.summaryTemplateDynamic)&&!0!==r.summaryTemplateDynamic);nt+=wt(r.items.summaryTemplate,ye[Ae],ot)}else if(r.items.summaryTemplateFunc){var Ot;(Ot=Je(r.items.summaryTemplateFunc,[ye[Ae]])).valid&&(nt+=Ot.result)}if(!v){lt="display:none;";null!=b&&void 0!==r.items.editMinimize&&r.items.editMinimize&&(lt=""),nt=Bt(Fg.getString(Te.form.array.this.header.minlabel.ele),r.items.custom.minlabel,lt,null,null,nt,!0,!1,!1,null,null),void 0===r.custom.minmaxbutton&&(r.custom.minmaxbutton={}),void 0===r.custom.minmaxbutton.custom&&(r.custom.minmaxbutton.custom={}),r.custom.minmaxbutton.custom.attrpos="append",void 0===r.items.custom.minmaxbutton&&(r.items.custom.minmaxbutton={}),void 0===r.items.custom.minmaxbutton.custom&&(r.items.custom.minmaxbutton.custom={}),r.items.custom.minmaxbutton.custom.attrpos="append";var $t;dt=Ut(rt,"'"),ut=Ut(St,"'");($t={})["faug-comp-min-state"]=r.custom.minmaxbutton.custom["faug-comp-min-state"],$t["faug-comp-max-state"]=r.custom.minmaxbutton.custom["faug-comp-max-state"],$t["faug-comp-min-state"]||($t["faug-comp-min-state"]="-"),$t["faug-comp-max-state"]||($t["faug-comp-max-state"]="+"),$t.cntid=dt,$t.schnm=ut,$t.type="button";ct=$t["faug-comp-min-state"],ft="faug-comp-min-button faug-comp-min-state";null!=b&&void 0!==r.items.editMinimize&&r.items.editMinimize&&(ct=$t["faug-comp-max-state"],ft="faug-comp-max-button faug-comp-max-state"),nt+=Bt(Fg.getString(Te.form.array.this.header.minmaxButton.ele),r.items.custom.minmaxbutton,Fg.getString(Te.form.array.this.header.minmaxButton.style),ft,$t,ct,!0)}}we+=Bt(Ye,r.items.custom,"clearfix",null,null,nt,!0,!1,!1,null,null);var kt=St+"["+Ft+"]['key']",Tt=at(r.items,a,_t,kt,[{orig_val_cls:kt}],[Ae],bt,u,Ae,f,void 0,v);kt=St+"["+Ft+"]['value']",Tt+=at(r.items,a,De,kt,[{}],[ye[Ae],ye],bt,u,kt,f,void 0,v),we+=Bt(qe,r.custom.container,We,Xe,Ge,Tt,!0),Ft++}}return _[St]=Ft,0==Ft?S+=" faug-tot-size=0 faug-curr-size=0 faug-offset=0":(S+=" faug-tot-size="+Ft,Ft>20&&(Ft=void 0!==r.maxobjects?r.maxobjects:20),S+=" faug-curr-size="+Ft,S+=" faug-offset="+Ft),Bt(z,null,T,A,S,we,!0)}}else if("map"==r.type){var St;if((St=i)||(St=""),r.hasOwnProperty("types")&&r.types.hasOwnProperty("key")&&r.types.hasOwnProperty("value")){var At={type:"marray",mtype:"map"};return r.hasOwnProperty("display")&&(At.display=r.display),r.hasOwnProperty("show")&&(At.show=r.show),r.hasOwnProperty("custom")&&(At.custom=r.custom),At.items={},r.types.hasOwnProperty("summaryTemplate")&&(At.items.summaryTemplate=r.types.summaryTemplate),r.types.hasOwnProperty("summaryTemplateFunc")&&(At.items.summaryTemplateFunc=r.types.summaryTemplateFunc),r.types.hasOwnProperty("custom")&&(At.items.custom=r.types.custom),At.noaddbutton=r.noaddbutton,At.norembutton=r.norembutton,At.nolabel=r.nolabel,At.items.mtype="marray",At.items.isSpan="object"!=r.types.value.type,At.items.nolabel="object"!=r.types.value.type,At.items.type="object",At.items.properties={},At.items.properties.key=r.types.key,At.items.properties.value=r.types.value,"object"==r.types.value.type&&(At.items.properties.value.isGroup=!0),At.label=r.label,w[St+"_dummymap"]=At,at(At.items,a,At,St,n,s,!1,!0,c,f,void 0,v)}}return""}this.isInteger=function(e){return e==parseInt(e)},this.isFloat=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1=="0123456789.".indexOf(e.charAt(t)))return!1;return!(e.split(".")>1)},this.isStrictAlpha=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1=="abcdefghijklmnopqrstuvwxyz".indexOf(e.charAt(t)))return e="",!1;return!0},this.isAlpha=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1==et.indexOf(e.charAt(t)))return!1;return!0},this.isNumber=function(e){return!isNaN(e)},this.isAlphaNumeric=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1==et.indexOf(e.charAt(t))&&-1=="0123456789".indexOf(e.charAt(t)))return!1;return!0},this.isBoolean=function(e){return""==e||("string"==typeof e&&("true"==e.toLowerCase()||"yes"==e.toLowerCase()||"1"==e||"false"==e.toLowerCase()||"no"==e.toLowerCase()||"0"==e)||1==e||0==e)},this.showHideGroupedEntity=function(e,t,a,r,i){if(e.preventDefault(),$(t).hasClass("faug-comp-min-state")){if($(t).removeClass("faug-comp-min-state"),$(t).addClass("faug-comp-max-state"),Ce(a+"_cont").hide(),t.innerHTML=$(t).attr("faug-comp-max-state"),void 0!==w[r].summaryTemplate){var n=Ce(a+"_cont").serializeObject(a),s=!(!Pe(w[r].summaryTemplateDynamic)&&!0!==w[r].summaryTemplateDynamic);$(t).prev().html(wt(w[r].summaryTemplate,n,s))}else if(w[r].summaryTemplateFunc){n=Ce(a+"_cont").serializeObject(a);var o=Je(w[r].summaryTemplateFunc,[n]);o.valid&&$(t).prev().html(o.result)}$(t).prev().show()}else $(t).removeClass("faug-comp-max-state"),$(t).addClass("faug-comp-min-state"),Ce(a+"_cont").show(),t.innerHTML=$(t).attr("faug-comp-min-state"),$(t).prev().hide(),Nt(a,c[i].details,a+"_cont");return!1};var rt=!1;this.init=function(e){rt||(0==n.cmdlist.length&&(n=new Faug.FgRecorder(e)),Faug.execFunc("onInit",[]).valid||console.log("No onInit method found to bootstrap"),$(document).on("click",(function(e){var t=e.target;$(t).hasClass("faug-ctxt-action-menu")||$(t).parents().hasClass("faug-ctxt-action-menu")||$(t).parents().hasClass("faug-valid-row")||$(".faug-ctxt-action-menu").hide(),$(".dropdown, .open").removeClass("open")})),!0===he&&$(document).on("contextmenu",(function(e){return e.stopPropagation(),!1})),rt=!0)},this.i=this.init,this.startRecording=function(){n.startRecording()},this.stopRecording=function(){n.stopRecording()},this.executeCommand=function(e){n.execute(e)},this.play=function(e){n.play(e)},this.translate=function(e){return t?t.translate(e):e},this.t=this.translate,this.l=this.t,this.ref=function(e,t,a){t=(""+t).split(a=void 0===a?".":a);for(var r=0;r<t.length;r++){if(!e)return;e=e[t[r]]}return e};var it=this.ref;this.setref=function(e,t,a,r){t=(""+t).split(r=void 0===r?".":r);for(var i=0;i<t.length;i++)i==t.length-1?e[t[i]]=a:e=e[t[i]]};var nt=this.setref;this.setrefNewObj=function(e,t,a,r){t=(""+t).split(r=void 0===r?".":r);for(var i=0;i<t.length;i++)i==t.length-1?e[t[i]]=a:(e[t[i]]||(e[t[i]]={}),e=e[t[i]])};this.setrefNewObj;this.delref=function(e,t,a){t=(""+t).split(a=void 0===a?".":a);for(var r=0;r<t.length-1;r++){if(!e)return;e=e[t[r]]}delete e[t[r]]};var st=this.delref;function ot(e,t,a,r,i,n,s,o,l,d){if(!0!==d){var u=t.details;if(n)(p=s.reset)||(p={}),Ce(i).prepend(Ze(Te.form.resetButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.resetButton.style),Fg.getString(Te.form.resetButton.class)+" faug-input-reset",{type:"button"}],p,"Reset",l,!1,!1,null)+"<br/>"),$(".faug-input-reset").off("click.reset").on("click.reset",(function(){return ct(u.name),!1}));if(y[t.details.name]){var f=s.progress,m=i+"_progressbar",h="progress";f&&f.custom&&f.custom.el&&(h=f.custom.el);var g=Bt(h,f,"","",{max:100,value:0,id:m},null,!0);Ce(i).append(g)}var p,v=u.name+"_submit_butt"+r,_={type:"submit",id:v,value:e};(p=s.submit)||(p={});var w="append";p&&(p.addId=!0,w=/^(append|prepend)$/i.test(p.position)?p.position.toLowerCase():w),"append"==w?Ce(i).append(Ze(Te.form.submitButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.submitButton.style),Fg.getString(Te.form.submitButton.class)+" btn faug-input-submit",_],p,e,void 0,!1,!1,null)):Ce(i).prepend(Ze(Te.form.submitButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.submitButton.style),Fg.getString(Te.form.submitButton.class)+" btn faug-input-submit",_],p,e,void 0,!1,!1,null)),a&&a[r]&&a[r].url?Ce(v).off("click.faug submit.faug").off("click.faug submit.faug").on("click.faug submit.faug",function(e,t,a,r,i,n){return function(s){if($(".faug-scrollable-menu").is(":visible"))return!1;if(s.preventDefault(),$(this).attr("disabled")){if("disabled"==$(this).attr("disabled"))return!1}else $(this).attr("disabled","disabled");console.log("Clicked appointment submit form faug"),function(e,t,a,r,i,n,s,o){var l=e[t],d=a.details;if(!0===a.details.__ishelper){var u=Ce(d.id).serializeObject(d.name,!0);return void yt({schemaName:d.schemaName,op:d.crudopName},d.defviewerId,!0,!0,u,void 0,void 0,o)}l.callbacks&&l.callbacks.beforeOp&&He(void 0,l.callbacks.beforeOp,[Ce(r).serializeObject(d.name,!0)]);for(var f=Ce(r).serializeObject(d.name,!0),m=Ce(r).find(".faug-load-more"),h=Ce(r).data("data"),g=0;g<m.length;g++){var p=$(m[g]).attr("list_value_cls"),v=1*$(m[g]).parent().attr("faug-tot-size"),_=1*$(m[g]).parent().attr("faug-curr-size");"."==(p=(p=(p=(p=p.replace(d.name,"")).replace(/\[/g,"")).replace(/\]/g,".")).replace(/'/g,"")).charAt(p.length-1)&&(p=p.substr(0,p.length-1));for(var w=it(h,p),F=_;F<v;F++)it(f,p)[F]=w[F]}var x=e[t].url,O=void 0;if(l.callbacks&&l.callbacks.onOp&&(O=He(void 0,l.callbacks.onOp,[f,o])).valid)return He(l.callbacks,"afterOp",[void 0,void 0,null,O.result,!0]),!1;l.callbacks&&l.callbacks.onValidateOp&&(O=void 0,O=He(void 0,l.callbacks.onValidateOp,[f,r,o]));var k=Ce(r),T=!1!==d.form.validateHiddenElements;if(k.length>0&&!Vt(d.name,"",void 0,T))return alert(Te.form.validationErrorMsg+""),o.removeAttr("disabled"),!1;if(!0!==d.form.noHtml5Validation&&!k[0].checkValidity())return alert(Te.form.validationErrorMsg+""),o.removeAttr("disabled"),!1;if(O&&O.valid&&!1===O.result)return o.removeAttr("disabled"),!1;var S={},A=e[t].vars,N=It();for(var C in N)N.hasOwnProperty(C)&&(S[C]=N[C]);var P={};if(!Pe(A))for(var C in A)if(A.hasOwnProperty(C)){var j=Ie(A[C]);j[0]&&(S[C]=j[1])}if(e[t].transientVars){for(var C in e[t].transientVars)e[t].transientVars.hasOwnProperty(C)&&(S[C]=e[t].transientVars[C],P[C]=e[t].transientVars[C]);e[t].transientVars=void 0}for(var C in f)f.hasOwnProperty(C)&&(S[C]=f[C]);var D=function(e,t,a,r){return a||(a=Ce(t).serializeObject(r,!0)),Pe(e.serializeTemplate)?JSON.stringify(a,void 0,"\t"):wt(e.serializeTemplate,a,void 0,void 0,!1)}(a,r,f,d.name);if((O=He(void 0,l.callbacks.serializeContent,[D])).valid)if(O.result)D=O.result;else if(Pe(O.result)||!1===O.result)return!1;if(x=wt(x,S,void 0,void 0,!1),x=encodeURI(x),y[d.name]){var I={};return b&&("queryparam"==b.aTokenWhere?-1==x.indexOf("?")?x+="?"+b.aTokenName+"="+b.aTokenValue:"?"==x[x.length-1]?x+=b.aTokenName+"="+b.aTokenValue:x+="&"+b.aTokenName+"="+b.aTokenValue:"header"==b.aTokenWhere&&(I[b.aTokenName]=b.aTokenValue)),Mt(r,x,I,d,function(e,t,a,r,i,n,s,o){return function(e){var t=a.details;r[i].successRsMsg&&Fg.alertDialog(r[i].successRsMsg),n==t.form.id?!0===t.form.resetOnDone&&ct(t.name):s.isModal?Ce(n+"_tr").modal("hide"):Ce(n).parent().parent().hide(),He(r[i].callbacks,"afterOp",[void 0,void 0,null,e,!0])}}(0,0,a,e,t,r,n),function(e,t){return function(a){He(e.callbacks,"failure",[a,!1]),t.removeAttr("disabled")}}(e[t],o),r+"_progressbar",[i,f,a,e,t,r,n,o])}Ye(!0,e[t].meth,x,e[t].contentType,D,e[t].headers?Fg.copy(e[t].headers):{},(function(e,t,a,r,i,n,s,o,l){if(i[n].successRsMsg&&alert(i[n].successRsMsg),s==r.form.id?!0===r.form.resetOnDone&&ct(r.name):o.isModal&&Ce(s+"_tr").modal("hide"),He(i[n].callbacks,"afterOp",[void 0,void 0,null,e,!0]),t){var d=t.attr("faug-data-crudopnm"),u=1*t.attr("faug-data-rownum"),f=t.data("viewerid"),m=r.__viewer[f],h=i[d].columns;if(!h&&c[r.name].properties)for(var g in h=[],c[r.name].properties)if(c[r.name].properties.hasOwnProperty(g)&&(Pe(c[r.name].properties[g].show)||c[r.name].properties[g].show)){var p=g.substring(0,1).toUpperCase()+g.substring(1);c[r.name].properties[g].display&&(p=c[r.name].properties[g].display),h.push([p,g])}Ne("Object",e)?t.html(vt(r,m,i[d],e,u,h)):t.html(vt(r,m,i[d],a,u,h)),Ce(f).parent().find(".faug-edit-button").on("click",function(e){return function(){kt(c[e.name],$(this).closest(".faug-valid-row"),$(this))}}(r)),Ce(f).parent().find(".faug-delete-button").on("click",(function(){$t(c[r.name],$(this).closest(".faug-valid-row"),$(this))}))}else i[d]}),(function(e,t,a,r,i,n){He(r[i].callbacks,"failure",[e,!1]),n.removeAttr("disabled")}),!0,[i,f,d,e,t,r,n,o],[f,a,e,t,o])}(e,t,a,r,i,n,0,$(this))}}(a,r,t,i,o,s)):Ce(i).off("submit.faug").on("submit.faug",(function(e){$(this).find(".faug-input-submit").is(":visible")||e.preventDefault()}))}}this.triggerDynamicAspect=function(){};this.triggerDynamicAspect;function lt(e,t,a,r,i,n){var s=e.details.form,o=k;if(r&&e.details.editForm&&e.details.editForm.id&&(s=e.details.editForm),m[e.details.name]=!1,r&&(m[e.details.name]=!0,o=T),!1!==a&&(a=!0),He(s.callbacks,"beforeDraw",[e.details.name]),h[e.details.name]={},g[e.details.name]={},e.dynamicAspects){var l={};if(e.__changed_properties__)for(var d in e.__changed_properties__)e.__changed_properties__.hasOwnProperty(d)&&(void 0!==e.__changed_properties__[d]?nt(e,d,e.__changed_properties__[d]):st(e,d));else{if(Ne("Object",e.dynamicAspects)){for(var d in e.dynamicAspects)if(e.dynamicAspects.hasOwnProperty(d)){var u=it(e,d);l[d]=u}}else if(Ne("Array",e.dynamicAspects))for(var c=0;c<e.dynamicAspects.length;c++)if(Ne("Object",e.dynamicAspects[c])&&e.dynamicAspects[c].cond&&Ne("Object",e.dynamicAspects[c].valueset))for(var d in e.dynamicAspects[c].valueset)if(e.dynamicAspects[c].valueset.hasOwnProperty(d)){u=it(e,d);l[d]=u}e.__changed_properties__=l}if(Ne("Object",e.dynamicAspects))for(var d in e.dynamicAspects){if(e.dynamicAspects.hasOwnProperty(d))if(Ne("String",e.dynamicAspects[d])&&-1!=e.dynamicAspects[d].indexOf("@"))(f=Ie(e.dynamicAspects[d]))[0]&&(void 0===f[1]?st(e,d):nt(e,d,f[1]));else if(Ne("Object",e.dynamicAspects[d])&&e.dynamicAspects[d].cond&&e.dynamicAspects[d].value){if(ze(e.dynamicAspects[d].cond,null))if(Ne("String",e.dynamicAspects[d].value)&&-1!=e.dynamicAspects[d].value.indexOf("@"))(f=Ie(e.dynamicAspects[d].value))[0]&&(void 0===f[1]?st(e,d):nt(e,d,f[1]));else void 0===e.dynamicAspects[d].value?st(e,d):nt(e,d,e.dynamicAspects[d].value)}else void 0===e.dynamicAspects[d]?st(e,d):nt(e,d,e.dynamicAspects[d])}else if(Ne("Array",e.dynamicAspects))for(c=0;c<e.dynamicAspects.length;c++){if(Ne("Object",e.dynamicAspects[c])&&e.dynamicAspects[c].cond&&Ne("Object",e.dynamicAspects[c].valueset))if(ze(e.dynamicAspects[c].cond,null))for(var d in e.dynamicAspects[c].valueset){var f;if(e.dynamicAspects[c].valueset.hasOwnProperty(d))if(Ne("String",e.dynamicAspects[c].valueset[d])&&-1!=e.dynamicAspects[c].valueset[d].indexOf("@"))(f=Ie(e.dynamicAspects[c].valueset[d]))[0]&&(void 0===f[1]?st(e,d):nt(e,d,f[1]));else void 0===e.dynamicAspects[c].valueset[d]?st(e,d):nt(e,d,e.dynamicAspects[c].valueset[d])}}}e.details.hasOwnProperty("labelEleId")&&Ce(e.details.labelEleId).html(e.details.label);var p,v=s.id;if(Bt(Fg.getString(Te.form.ele),s,Fg.getString(Te.form.style),Fg.getString(Te.form.class),{role:"form",id:s.id},null,!1,!0,!0,void 0,i),s.custom&&s.custom.properties&&(p=s.custom.properties),Ce(s.id).addClass("faug-form"),Ce(s.id).attr("faug-sch-name",e.details.name),Ce(s.id).html(at(e,e.details,e,"","",[t],!1,!0,"",p,0,n)),r&&Ce(s.id).data("editData",t),void 0===e.details.__ishelper||!0===e.details.__ishelper&&void 0!==s.submit){var y=void 0===s.submit||void 0===s.submit.label?Fg.getString(Te.form.submitButton.label):s.submit.label;o=!0===e.details.__ishelper&&void 0!==s.submit?e.details.crudopName:o,ot(y,e,e.crud,o,s.id,s.showReset,s,void 0,p,n)}if(He(s.callbacks,"afterDraw",[void 0,s.id]),!e.__namedCallbacks&&s.callbacks&&s.callbacks.afterDraw&&s.callbacks.afterDraw.controlEvents&&s.callbacks.afterDraw.controlEvents.length>0){e.__namedCallbacks={};for(var b=0;b<s.callbacks.afterDraw.controlEvents.length;b++){var _=s.callbacks.afterDraw.controlEvents[b].name;_&&(e.__namedCallbacks[_]={},e.__namedCallbacks[_].controlEvents=[s.callbacks.afterDraw.controlEvents[b]])}}s.callbacks&&s.callbacks.transformElements&&He(void 0,s.callbacks.transformElements,[]).valid;if(void 0!==s.visibilityControl&&void 0!==s.visibilityControl.eleId){var w=s.visibilityControl,F=w.eleId,x=w.event,O=w.type;null!=x&&""!=x||(x="click"),null!=O&&""!=O||(O="showhide"),Ce(F).on(x,function(e,t,a){return function(r){var i=Ce(e).is(":visible");"showhide"!=a&&"hide"!=a||!i?"showhide"!=a&&"show"!=a||(s.isModal?Ce(e).modal({show:!0}):Ce(e).show()):s.isModal?Ce(e).modal("hide"):Ce(e).hide(),Je(s.callbacks.visibilityEventCallback,[t,!i])}}(v,e.details,O))}a&&(Ce(v).show(),s.isModal&&Ce(v).modal({show:!0})),Nt(void 0,e.details,s.id)}this.drawCreateForm=function(e,t,a,r,i,n){c[e]&&c[e].details.form?lt(c[e],t,a,!1,r,i):R[e]&&Xe(R[e][0],e,function(e,t,a,i,n,s){return function(){lt(e[t],a,i,!1,r,n),s&&s()}}(c,e,t,a,i,n))};var dt=this.drawCreateForm;this.dcf=this.drawCreateForm,this.drawEditForm=function(e,t,a,r,i,n){c[e]&&c[e].details.form?lt(c[e],t,a,!0,r,i):R[e]&&Xe(R[e][0],e,function(e,t,a,i,n,s){return function(){lt(e[t],a,i,!0,r,n),s&&s()}}(c,e,t,a,i,n))};var ut=this.drawEditForm;this.def=this.drawEditForm;var ct=function(e){var t;(m[e]=!1,h[e]={},c[e].details.form.custom&&c[e].details.form.custom.properties&&(t=c[e].details.form.custom.properties),Ce(c[e].details.form.id).html(at(c[e],c[e].details,c[e],"","",null,!1,!0,"",t)),Nt(void 0,c[e].details,c[e].details.form.id),ot(void 0===c[e].details.form.submit||void 0===c[e].details.form.submit.label?Fg.getString(Te.form.submitButton.label):c[e].details.form.submit.label,c[e],c[e].crud,k,c[e].details.form.id,c[e].details.form.showReset,c[e].details.form,void 0,t),He(c[e].details.form.callbacks,"onReset",[]),He(c[e].details.form.callbacks,"afterDraw",[void 0,c[e].details.form.id]),c[e].details.form.callbacks&&c[e].details.form.callbacks.transformElements)&&He(void 0,c[e].details.form.callbacks.transformElements,[]).valid};this.resetTheForm=ct,this.rtf=this.resetTheForm,this.loadSchema=function(e,t,a,r,i,n,s,o,l){if(!0===o&&delete c[e],c[e]){var d=c[e],u=d.details.__defviewerId;return l?void l():(a&&void 0!==d.details.form&&lt(d,null,r,!1),void(i&&pt(d,u,n,s)))}!t&&R[e]&&(t=R[e][0]),He(null,"beforeLoad",[e]),Ye(!0,"GET",t,"application/json","",{},gt,(function(e,t,a){var r=t||"";r+="("+a+")",console.log("Error loading schema "+r)}),!0,[a,r,i,n,s,!0,l,o],[e,t])};this.loadSchema;function ft(e){void 0===e.details.callbacks&&(e.details.callbacks={});var t=null;if(e.details.__viewer={},void 0!==e.details.viewer){for(var a=0;a<e.details.viewer.length;a++){var r=e.details.viewer[a];void 0!==r.id&&(null==t&&(t=r.id),void 0===r.custom&&(r.custom={}),void 0===r.callbacks&&(r.callbacks={}),e.details.__viewer[r.id]=r)}e.details.viewer.custom={},e.details.__defviewerId=t}void 0!==e.details.form&&void 0===e.details.form.custom&&(e.details.form.custom={}),void 0!==e.details.form&&void 0===e.details.form.callbacks&&(e.details.form.callbacks={}),void 0===e.details.editForm&&(e.details.editForm={})}this.ls=this.loadSchema;var mt=function(e,t,a){(!Fg.isN(a)&&!1!==a||v.hasOwnProperty(e[0]))&&!0!==a||(v[e[0]]="",t.push(e))};function ht(e,t,a,r){var i;if("object"===t.type?i=t.properties:"array"==t.type&&t.items&&(i=t.items.properties),i)for(var n in i)if("object"!=i[n].type&&"array"!=i[n].type){if(i.hasOwnProperty(n)&&!Pe(i[n].optionTemplateFile)?mt([i[n].optionTemplateFile,"html",!0,1],a,r):i.hasOwnProperty(n)&&!Pe(i[n].genericOptionTemplateFile)?mt([i[n].genericOptionTemplateFile,"html",!0,2],a,r):i.hasOwnProperty(n)&&!Pe(i[n].templateFile)?mt([i[n].templateFile,"html",!0,1],a,r):i.hasOwnProperty(n)&&!Pe(i[n].genericTemplateFile)&&mt([i[n].genericTemplateFile,"html",!0,2],a,r),e.namedEvents&&Ne("Object",e.namedEvents)&&i.hasOwnProperty(n)&&i[n].events)for(var s in i[n].events)if(i[n].events.hasOwnProperty(s))if(Ne("String",i[n].events[s])&&e.namedEvents[i[n].events[s]])i[n].events[s]=e.namedEvents[i[n].events[s]];else if(Ne("Array",i[n].events[s]))for(var o=0;o<i[n].events[s].length;o++)Ne("String",i[n].events[s][o])&&e.namedEvents[i[n].events[s][o]]&&(i[n].events[s][o]=e.namedEvents[i[n].events[s][o]])}else ht(e,i[n],a,r)}this.onSchemaLoad=function(e,t,a,r,i,n,s,o,l){if(Fg.is("Object",e)){ft(e);var d=[];if(e.templateFile&&mt([e.templateFile,"html",!0,4],d,l),ht(e,e,d,l),e.details&&e.details.viewer)for(var u=0;u<e.details.viewer.length;u++){var f=e.details.viewer[u];f&&f.helperArea&&f.helperArea.schema&&(void 0===f.helperArea.details.form&&(f.helperArea.details.form=Fg.copy(f.helperArea.details),f.helperArea.details.custom&&delete f.helperArea.details.custom,f.helperArea.details.form.crudop&&delete f.helperArea.details.form.crudop,f.helperArea.details.form.callbacks&&delete f.helperArea.details.form.callbacks),ht(f=f.helperArea.schema,f,d,l))}for(var m in e.crud)if(e.crud[m].callbacks||(e.crud[m].callbacks={}),e.crud.hasOwnProperty(m)&&e.crud[m].template)if(Ne("Object",e.crud[m].template)&&e.crud[m].template.vars&&e.crud[m].template.values&&e.crud[m].template.vars.length>0&&e.crud[m].template.values.length>0)for(var h=e.crud[m].template,g=h.vars,p=0;p<h.values.length;p++){h.values[p][0].length==g.length&&mt([h.values[p][1],"html",!0,0],d,l)}else mt([e.crud[m].template,"html",!0,0],d,l);for(var m in e.crud)if(e.crud.hasOwnProperty(m)){var v=e.crud[m].callbacksRef;for(var y in v&&e.crud[v]&&e.crud[v].callbacks&&(e.crud[m].callbacks=e.crud[v].callbacks),e.crud[m]){if(e.crud[m].hasOwnProperty(y))(v=e.crud[m][y].controlEventsAppend)&&e.crud[v]&&e.crud[v][y].controlEvents&&(e.crud[m][y].controlEvents?e.crud[m][y].controlEvents.push.apply(e.crud[m][y].controlEvents,e.crud[v][y].controlEvents):e.crud[m][y].controlEvents=e.crud[v][y].controlEvents)}}if(ae&&me&&me.schemas&&me.schemas[e.details.name]&&(e.details.name=me.schemas[e.details.name]),e.aliases&&e.aliases.length>0)for(p=0;p<e.aliases.length;p++){var b=jQuery.extend(!0,{},e);b.details.name=e.aliases[p].name,b.aliases=void 0,e.aliases[p].details&&(b.details=e.aliases[p].details,ft(b)),b.details.__defviewerId=e.aliases[p].defViewerId,e.aliases[p].defViewerId in e.details.__viewer||console.log("Could not find default viewer id "+e.aliases[p].defViewerId+" for schema "+e.aliases[p].name),c[b.details.name]=b,He(b.details.callbacks,"afterLoad",[b]),t&&e.aliases[p].isdrawCreateForm&&void 0!==b.details.form&&lt(b,null,a&&e.aliases[p].isShowCreateForm,!1)}if(c[e.details.name]=e,He(e.details.callbacks,"afterLoad",[e]),t&&void 0!==e.details.form&&lt(e,null,a,!1),s&&d.length>0)Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(d,(function(e,t,a,r){t&&(1===r[3]||2===r[3]?_t(r[0],a.responseText,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null},void 0,l):4===r[3]?_t(r[0],a.responseText,null,4,l):_t(r[0],a.responseText,{rows:null,options:null},void 0,l),W[r[0]]=[a.responseText,r[3]])})).done(function(t,a,r,i,n){return function(){if(Fg.freezeUI(!1),n)n();else if(a&&(pt(t,e.details.__defviewerId,r,i),t.aliases&&t.aliases.length>0))for(var s=0;s<t.aliases.length;s++){var o=c[t.aliases[s].name];pt(o,o.details.__defviewerId,r&&t.aliases[s].isDrawViewer,i&&t.aliases[s].isShowViewer)}}}(e,r,i,n,o)).fail((function(e){Fg.freezeUI(!1),alert("Problem loading required template files")}));else if(o)o();else if(r&&(pt(e,e.details.__defviewerId,i,n),e.aliases&&e.aliases.length>0))for(p=0;p<e.aliases.length;p++){var _=c[e.aliases[p].name];pt(_,_.details.__defviewerId,i&&e.aliases[p].isDrawViewer,n&&e.aliases[p].isShowViewer)}return d}};var gt=this.onSchemaLoad;function pt(e,t,a,r){var i=A;void 0!==e.defaultOp&&(i=e.defaultOp),void 0!==e.crud[i]&&(void 0!==e.crud[i].viewerId&&(t=e.crud[i].viewerId),null!=t&&void 0!==e.details.__viewer[t]&&yt({schemaName:e.details.name,op:i},t,a,r))}function vt(e,t,a,r,i,n){var s="",o="",l=-1,d=-1;void 0!==t.editButton&&t.editButton.colNum>0&&(s=Bt(Fg.getString(Te.viewer.editButton.ele),t.editButton,Fg.getString(Te.viewer.editButton.style),"faug-edit-button",{},Fg.getString(Te.viewer.deleteButton.label),!0),l=t.editButton.colNum),void 0!==t.deleteButton&&t.deleteButton.colNum>0&&(o=Bt(Fg.getString(Te.viewer.deleteButton.ele),t.deleteButton,Fg.getString(Te.viewer.deleteButton.style),"faug-delete-button",{},Fg.getString(Te.viewer.deleteButton.label),!0),d=t.deleteButton.colNum);for(var u="",c=0;c<n.length;c++)if(c+1==l)u+=Bt(Fg.getString(Te.viewer.this.table.column.ele),t.custom.td,Fg.getString(Te.viewer.this.table.column.style),Fg.getString(Te.viewer.this.table.column.class),{},s,!0);else if(c+1==d)u+=Bt(Fg.getString(Te.viewer.this.table.column.ele),t.custom.td,Fg.getString(Te.viewer.this.table.column.style),Fg.getString(Te.viewer.this.table.column.class),{},o,!0);else{var f=r[n[c][1]];if(a.callbacks&&a.callbacks.viewerColumnDataTf){var m=He(void 0,a.callbacks.viewerColumnDataTf,[r,i,c]);m.valid&&void 0!==m.result?f=m.result:3!=n[c].length||Pe(n[c][2])||(m=Je(n[c][2],[r,n[c][1]])).valid&&void 0!==m.result&&(f=m.result)}u+=Bt(Fg.getString(Te.viewer.this.table.column.ele),t.custom.td,Fg.getString(Te.viewer.this.table.column.style),Fg.getString(Te.viewer.this.table.column.class),{},f,!0)}return u}function yt(e,t,a,r,i,n,s,o){o&&o.removeAttr("disabled");var l=e.schemaName,d=e.op,u=c[l];if(u.dynamicAspects){var f={};if(u.__changed_properties__)for(var m in u.__changed_properties__)u.__changed_properties__.hasOwnProperty(m)&&(void 0!==u.__changed_properties__[m]?nt(u,m,u.__changed_properties__[m]):st(u,m));else{if(Ne("Object",u.dynamicAspects)){for(var m in u.dynamicAspects)if(u.dynamicAspects.hasOwnProperty(m)){var g=it(u,m);f[m]=g}}else if(Ne("Array",u.dynamicAspects))for(var p=0;p<u.dynamicAspects.length;p++)if(Ne("Object",u.dynamicAspects[p])&&u.dynamicAspects[p].cond&&Ne("Object",u.dynamicAspects[p].valueset))for(var m in u.dynamicAspects[p].valueset)if(u.dynamicAspects[p].valueset.hasOwnProperty(m)){g=it(u,m);f[m]=g}u.__changed_properties__=f}if(Ne("Object",u.dynamicAspects))for(var m in u.dynamicAspects){if(u.dynamicAspects.hasOwnProperty(m))if(Ne("String",u.dynamicAspects[m])&&-1!=u.dynamicAspects[m].indexOf("@"))(k=Ie(u.dynamicAspects[m]))[0]&&(void 0===k[1]?st(u,m):nt(u,m,k[1]));else if(Ne("Object",u.dynamicAspects[m])&&u.dynamicAspects[m].cond&&u.dynamicAspects[m].value){if(C=ze(u.dynamicAspects[m].cond,null))if(Ne("String",u.dynamicAspects[m].value)&&-1!=u.dynamicAspects[m].value.indexOf("@"))(k=Ie(u.dynamicAspects[m].value))[0]&&(void 0===k[1]?st(u,m):nt(u,m,k[1]));else void 0===u.dynamicAspects[m].value?st(u,m):nt(u,m,u.dynamicAspects[m].value)}else void 0===u.dynamicAspects[m]?st(u,m):nt(u,m,u.dynamicAspects[m])}else if(Ne("Array",u.dynamicAspects))for(p=0;p<u.dynamicAspects.length;p++){if(Ne("Object",u.dynamicAspects[p])&&u.dynamicAspects[p].cond&&Ne("Object",u.dynamicAspects[p].valueset))if(C=ze(u.dynamicAspects[p].cond,null))for(var m in u.dynamicAspects[p].valueset){if(u.dynamicAspects[p].valueset.hasOwnProperty(m))if(Ne("String",u.dynamicAspects[p].valueset[m])&&-1!=u.dynamicAspects[p].valueset[m].indexOf("@"))(k=Ie(u.dynamicAspects[p].valueset[m]))[0]&&(void 0===k[1]?st(u,m):nt(u,m,k[1]));else void 0===u.dynamicAspects[p].valueset[m]?st(u,m):nt(u,m,u.dynamicAspects[p].valueset[m])}}}var v=u.crud[d],y=u.details.__viewer[t];(Pe(a)||!1===a)&&(y={});var b={},_=v.vars,w=It();for(var x in w)w.hasOwnProperty(x)&&(b[x]=w[x]);var O={};if(!Pe(_))for(var x in _){var k;if(_.hasOwnProperty(x))(k=Ie(_[x]))[0]&&(b[x]=k[1])}if(v.transientVars){for(var x in v.transientVars)v.transientVars.hasOwnProperty(x)&&(b[x]=v.transientVars[x],O[x]=v.transientVars[x]);v.transientVars=void 0}var T=v.template;if(void 0===T||null==T||""==T)T=void 0;else if(Ne("Object",T)&&T.vars&&T.values&&T.vars.length>0&&T.values.length>0){for(var S=T.vars,A=0;A<T.values.length;A++){for(var N=T.values[A][0],C=N.length==S.length,P=0;P<S.length;P++)C&=De(S[P],b,N[P]);if(C){T=T.values[A][1];break}}Ne("Object",T)&&(T=void 0)}if(s&&0!=s.length||0==(s=Ce(t)).length&&(s=$(t)),a){var j=Ot(y.callbacks,v.callbacks,"beforeDraw");He(j,"beforeDraw",[l]),s.length>0&&$.fn.DataTable.fnIsDataTable(s)&&(s.dataTable().fnDestroy(),s.empty()),s.length>0&&((!0!==F[U]||!0!==y.diff&&"true"!==y.diff)&&s.empty(),s.parent().find(".faug-trigger-read-prev-button").remove(),s.parent().find(".faug-trigger-read-next-button").remove()),s.off();var D=v.columns,I=t;if(!T&&D&&(Bt(Fg.getString(Te.viewer.this.table.ele),y,Fg.getString(Te.viewer.this.table.style),Fg.getString(Te.viewer.this.table.class),{id:I},null,!1,!0,!0,Fg.getString(Te.viewer.this.table.container.ele),null,Fg.getString(Te.viewer.this.table.container.style)),s&&0!=s.length||(s=Ce(t)),0==s.find(Fg.getString(Te.viewer.this.table.header.ele)).length)){var B="";if(!D&&u.properties)for(var E in D=[],u.properties)if(u.properties.hasOwnProperty(E)&&(Pe(u.properties[E].show)||u.properties[E].show)){var z=E.substring(0,1).toUpperCase()+E.substring(1);u.properties[E].display&&(z=u.properties[E].display),D.push([z,E])}for(A=0;A<D.length;A++)B+=Bt(Fg.getString(Te.viewer.this.table.header.colEle),y.custom.theadtrth,"","",{},D[A][0],!0);B=Bt(Fg.getString(Te.viewer.this.table.header.rowEle),y.custom.theadtr,"","",{},B,!0),B=Bt(Fg.getString(Te.viewer.this.table.header.ele),y.custom.thead,"","",{},B,!0),s.append(B)}if(void 0!==y.helperArea){var V=d;y.helperArea.details&&y.helperArea.details.crudopName&&(V=y.helperArea.details.crudopName);var M=u.crud[V];if(function(e,t,a,r,i,n,s,o){if(He(a.helperArea.callbacks,"beforeDraw",[e]),void 0!==a.helperArea.details&&void 0!==a.helperArea.details.form&&void 0!==a.helperArea.schema){var l=a.helperArea.details.form.id;if(!(Ce(l).length>0)){var d=a.helperArea.details;null==d.callbacks&&(d.callbacks={}),d.crudopName=n,d.defviewerId=s,d.crudop=i,d.__ishelper=!0,d.schemaName=e,d.initObject=a.helperArea.initObject,void 0===h[d.name]&&(h[d.name]={});var u=a.helperArea.schema;u.details=d,c[d.name]=u,u.crud={},u.crud[n]=i;var f=void 0;if(!Fg.isN(d.initObject))if(Ne("String",d.initObject)){var m=Je(d.initObject);m.valid&&(f=m.result)}else f=d.initObject;dt(d.name,f,!1,l,!1)}}}(l,u.details,y,0,M,V,t),y.helperArea.initObject){if(Ne("String",y.helperArea.initObject))(G=Je(y.helperArea.initObject)).valid&&(i=G.result);else i=y.helperArea.initObject;var R=Ce(y.helperArea.details.id).serializeObject(y.helperArea.details.name,!0);i=mergeVarsLR(i,R,!1)}else i=Ce(y.helperArea.details.id).serializeObject(y.helperArea.details.name,!0)}if(r&&(y.isModal?Ce(I).modal({show:!0}):s.show()),void 0!==y.visibilityControl&&void 0!==y.visibilityControl.eleId){var L=y.visibilityControl,q=L.eleId,H=L.event,J=L.type;null!=H&&""!=H||(H="click"),null!=J&&""!=J||(J="showhide"),Ce(q).on(H,function(e,t,a){return function(r){var i=Ce(e).is(":visible");"showhide"!=a&&"hide"!=a||!i?"showhide"!=a&&"show"!=a||(y.isModal?Ce(e).modal({show:!0}):Ce(e).parent().show()):y.isModal?Ce(e).modal("hide"):Ce(e).parent().hide(),Je(y.callbacks.visibilityEventCallback,[t,!i])}}(I,u.details,J))}}if("local"!=v.type){var W=v.url;if(v.callbacks&&v.callbacks.beforeOp){re=He(void 0,v.callbacks.beforeOp,[v.url]);W=v.url,re.valid&&(W=re.result)}if(v.associatedViewerId){var X=u.details.__viewer[v.associatedViewerId];if(X.helperArea.initObject){var G;if(Ne("String",X.helperArea.initObject))(G=Je(X.helperArea.initObject)).valid&&(i=G.result);else i=X.helperArea.initObject;R=Ce(X.helperArea.details.id).serializeObject(X.helperArea.details.name,!0);i=mergeVarsLR(i,R,!1)}else i=Ce(X.helperArea.details.id).serializeObject(X.helperArea.details.name,!0)}void 0===b._f_start&&(b._f_start=0),void 0===b._f_pagenum&&(b._f_pagenum=0),void 0===b._f_search_text&&(b._f_search_text=""),v.table&&(v.table.schemaName=u.details.name,v.table.op=d,isNaN(b._f_count)&&v.table.pagination&&!0===v.table.pagination.enabled&&(b._f_count=v.table.pagination.numpages&&v.table.pagination.numpages.length>0?v.table.pagination.numpages[0]:10)),void 0===b._f_count&&(b._f_count=10);var Y={_f_start:b._f_start,_f_pagenum:b._f_pagenum,_f_count:b._f_count,_f_search_text:b._f_search_text,_f_prev_state:b._f_prev_state,_f_originated_from:b._f_originated_from},Q=mergeVars(b,i);W=wt(W,Q,void 0,void 0,!1),W=encodeURI(W);var K=v.content;if("GET"!=v.meth)if(K){if(K=wt(K,Q,void 0,void 0,!1),i)try{var Z=JSON.parse(K),ee=!0;for(var te in Z)Z.hasOwnProperty(te)&&(ee&=i.hasOwnProperty(te));ee&&(K=JSON.stringify(i))}catch(e){}}else i&&(K=JSON.stringify(i));var ae=!0!==F[U];!0===v.freezeUi?ae=!0:!1===v.freezeUi&&(ae=!1),Ye(ae,v.meth,W,v.contentType,K,v.headers?Fg.copy(v.headers):{},bt,(function(e,t,a,r,i,n,s){var o=Ot(s.callbacks,a.callbacks,"failure");He(o,"failure",[e,!0,r,i,n])}),!0,[a,u,T,D,v,s,t,e,O,n,d,y,Y],[u,v,T,s,t,y])}else{v.callbacks&&v.callbacks.beforeOp&&He(void 0,v.callbacks.beforeOp,[]);var re,ie=v.from,ne=ie;0==ie.indexOf("f:")?(re=Je(ie.substring(2))).valid&&(ne=re.result):0==ie.indexOf("v:")&&(ne=b[ie.substring(2)]),bt(ne,a,u,T,D,v,s,t,e,O,n,d,y)}}this.invokeCrudOp=function(e,t,a,r,i,n){if(r=r||!0,i=i||!0,c[e]){var s=c[e],o=n;o||void 0===s.details.viewer||(o=s.details.__defviewerId);var l=a;a||void 0===s.defaultOp||(l=s.defaultOp),l||(l=A),void 0!==s.crud[l]&&(void 0!==s.crud[l].viewerId&&(o=s.crud[l].viewerId),o&&s.details.__viewer[o]?(t&&(s.crud[l].transientVars=t),yt({schemaName:s.details.name,op:l},o,r,i)):console.log("Could not find viewer by viewer id "+o))}else R[e]&&Xe(R[e][0],e,function(e,t,a,r,i,n,s){return function(){var o=e[t],l=s;l||void 0===o.details.viewer||(l=o.details.__defviewerId);var d=r;r||void 0===o.defaultOp||(d=o.defaultOp),d||(d=A),void 0!==o.crud[d]&&(void 0!==o.crud[d].viewerId&&(l=o.crud[d].viewerId),l&&o.details.__viewer[l]?(a&&(o.crud[d].transientVars=a),yt({schemaName:o.details.name,op:d},l,i,n)):console.log("Could not find viewer by viewer id "+l))}}(c,e,t,a,r,i,n))},this.ic=this.invokeCrudOp,this.invokeCrudOpNoViewer=function(e,t,a,r){if(c[e]){var i=c[e],n=r,s=a;a||void 0===i.defaultOp||(s=i.defaultOp),s||(s=A),void 0!==i.crud[s]&&(n?(t&&(i.crud[s].transientVars=t),yt({schemaName:i.details.name,op:s},n)):console.log("Could not find element by viewer id "+n))}else R[schemaName]&&Xe(R[schemaName][0],schemaName,function(t,a,r,i,n){return function(){var a=t[e],s=n,o=i;i||void 0===a.defaultOp||(o=a.defaultOp),o||(o=A),void 0!==a.crud[o]&&(s?(r&&(a.crud[o].transientVars=r),yt({schemaName:a.details.name,op:o},s)):console.log("Could not find element by viewer id "+s))}}(c,schemaName,t,a,r))},this.icnv=this.invokeCrudOpNoViewer,this.mergeVars=function(e,t){var a={};if(e)for(var r in e)e.hasOwnProperty(r)&&(a[r]=e[r]);if(t)for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);return a},this.mergeVarsLR=function(e,t,a){var r={};if(!0===a){var i=!1;if(e)for(var n in e)t&&t.hasOwnProperty(n)&&(r[n]=t[n],i=!0),e.hasOwnProperty(n)&&(r[n]=e[n],i=!0);if(!i&&t)for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])}else if(!1===a){i=!1;if(t)for(var n in t)e&&e.hasOwnProperty(n)&&(r[n]=e[n],i=!0),t.hasOwnProperty(n)&&(r[n]=t[n],i=!0);if(!i&&e)for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}return r},this.crudOpCallback=function(e,t,a,r,i,n,s,o,l,d,c,m,h,g){var v=e;n.dataRef&&(v=it(e,n.dataRef));var y=Ne("Array",v);if(void 0!==n.storeAs)if(Ne("Object",n.storeAs)&&n.storeAs.name)if(y&&n.storeAs.key)for(var b=0;b<v.length;b++)f[n.storeAs.name]||nt(f,n.storeAs.name,{}),nt(f,n.storeAs.name+"."+e[b][n.storeAs.key],v[b]);else v[n.storeAs.key]?nt(f,n.storeAs.name+"."+n.storeAs.key,v):nt(f,n.storeAs.name,v);else Ne("String",n.storeAs)&&nt(f,n.storeAs,v);if(u[a.details.name]=e,He(n.callbacks,"afterOp",[e]),!(N=He(n.callbacks,"beforeDraw",[e])).valid||!1!==oid.result){!0!==n.forTemplate&&(v=e);var _=void 0;""!==l.drawSchmemaForm&&(_=l.drawSchmemaForm);var w,O=void 0;if(n.table&&(O=new Fg.table(n.table)),n.canvasDataGrid&&!0===n.canvasDataGrid.enabled&&(w=n.canvasDataGrid),t){if(F[L]=void 0,_&&Ne("Object",v))dt(_,v);else if(!r&&i){if(y)for(var k=0;k<v.length;k++){var T=a.details.name+"_inlinearea_"+k,S=a.details.name+"_inlinearea_"+k+"_ttr";html="";var A=n.callbacks&&n.callbacks.drawViewerColumns;if(Pe(A))html+=vt(a.details,h,n,v[k],k,i);else(N=He(void 0,n.callbacks.drawViewerColumns,[v[k],k])).valid&&(html+=N.result);html=Bt(Fg.getString(Te.viewer.this.table.row.ele),h.tr,"","faug-valid-row",{id:S,"faug-data-inlfid":T,"faug-data-rownum":k,"faug-data-crudopnm":m,"faug-data-op-col-len":i.length,"faug-data-schemanm":a.details.name},html,!0),s.append(html)}else for(var k in v)if(v.hasOwnProperty(k)){T=a.details.name+"_inlinearea_"+k,S=a.details.name+"_inlinearea_"+k+"_ttr";html="";var N;A=n.callbacks&&n.callbacks.drawViewerColumns;if(Pe(A))html+=vt(a.details,h,n,v[k],k,i);else(N=He(void 0,n.callbacks.drawViewerColumns,[v[k],k])).valid&&(html+=N.result);html=Bt(Fg.getString(Te.viewer.this.table.row.ele),h.tr,"","faug-valid-row",{id:S,"faug-data-inlfid":T,"faug-data-rownum":k,"faug-data-crudopnm":m,"faug-data-op-col-len":i.length,"faug-data-schemanm":a.details.name},html,!0),s.append(html)}var C=s.find(".faug-valid-row");for(k=0;k<C.length;k++){var P=k;void 0!==(z=$(C[k]).attr("faug-data-rownum"))&&!1!==z&&(P=z),$(C[k]).data("data",it(v,P))}}else if(r&&function(e,t){return p[t]}(a.details.name,r)){if(c&&(ve=-2),c&&0==v.length)Ft(r,v,d);else if(c&&v.length>0){if(faugScrollableListLength=v.length,s.html(Bt(Fg.getString(Te.viewer.this.dropdown.ele),h.dropdown,Fg.getString(Te.viewer.this.dropdown.style),Fg.getString(Te.viewer.this.dropdown.class)+" dropdown-menu faug-scrollable-menu",{role:"menu"},Ft(r,v,d),!0)),(E=F[L])||(E=v),"rtl"===$(document).prop("dir")&&s.find(".faug-scrollable-menu").css("left",""),s.length>0)for(C=s.find(".faug-valid-row"),k=0;k<C.length;k++){S=a.details.name+"_inlinearea_"+k+"_ttr";$(C[k]).attr("id",S);P=k;void 0!==(z=$(C[k]).attr("faug-data-rownum"))&&!1!==z?P=z:$(C[k]).attr("faug-data-rownum",k),$(C[k]).attr("faug-data-schemanm",a.details.name),void 0!==(z=$(C[k]).attr("faug-data-ind-sep"))&&!1!==z&&(V=z),$(C[k]).data("data",it(E,P,V))}n.dropdownmenuItem&&n.dropdownmenuItem.click&&s.on("click",".dropdown-menu, .faug-scrollable-menu "+Fg.getString(Te.viewer.this.dropdown.itemEle),(H=n.dropdownmenuItem.click,function(e){if($(this).prop("tagName")==Te.viewer.this.dropdown.itemEle.toUpperCase()+""){var t=Faug.getFaugValidRowData($(this)),a=$(this).parent().parent(),r=a.attr("faug-data-ddtrgid"),i=Ce(r);if(r||(r=a.attr("faug-data-ddtrgcls"),i=$(r)),H.attrAssign){var n=H.attrAssign;Ne("Array",H.attrAssign)||(n=[H.attrAssign]);for(var s=0;s<n.length;s++)if(ze(n[s].cond,$(this)))if(t&&n[s].fromData){var o=it(t,n[s].fromData);if(n[s].tF){var l=it(window,n[s].tF);(c=Je(l,[d],!0)).valid&&(d=c.result)}!Ne("Object",n[s].to)||Pe(n[s].to.attr)||Pe(n[s].to.selector)?Pe(n[s].to)?i.first().attr(n[s].fromData,d):i.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d)}else if(n[s].fromVar){var d=It()[n[s].fromVar];n[s].tF&&(l=it(window,n[s].tF),(c=Je(l,[d],!0)).valid&&(d=c.result)),!Ne("Object",n[s].to)||Pe(n[s].to.attr)||Pe(n[s].to.selector)?Pe(n[s].to)?i.first().attr(n[s].fromVar,d):i.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d)}else n[s].fromAttr?(d=$(this).attr(n[s].fromAttr),n[s].tF&&(l=it(window,n[s].tF),(c=Je(l,[d],!0)).valid&&(d=c.result)),!Ne("Object",n[s].to)||Pe(n[s].to.attr)||Pe(n[s].to.selector)?Pe(n[s].to)?i.first().attr(n[s].fromAttr,d):i.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d)):n[s].to&&(d=$(this).val(),n[s].tF&&(l=it(window,n[s].tF),(c=Je(l,[d],!0)).valid&&(d=c.result)),!Ne("Object",n[s].to)||Pe(n[s].to.attr)||Pe(n[s].to.selector)?Pe(n[s].to)||i.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d))}if(H.valueAssign){var u=H.valueAssign;for(Ne("Array",H.valueAssign)||(u=[H.valueAssign]),s=0;s<u.length;s++)if(ze(u[s].cond,$(this)))if(t&&u[s].fromData)o=it(t,u[s].fromData),u[s].tF&&(l=it(window,u[s].tF),(c=Je(l,[o],!0)).valid&&(o=c.result)),"value"!=u[s].to?$(u[s].to).first().val(o):i.first().val(o);else if(u[s].fromVar)o=It()[u[s].fromVar],n[s].tF&&(l=it(window,u[s].tF),(c=Je(l,[o],!0)).valid&&(o=c.result)),"value"!=u[s].to?$(u[s].to).first().val(o):i.first().val(o);else if(u[s].fromAttr)o=$(this).attr(u[s].fromAttr),u[s].tF&&(l=it(window,u[s].tF),(c=Je(l,[o],!0)).valid&&(o=c.result)),"value"!=u[s].to?$(u[s].to).first().val(o):i.first().val(o);else{var c;if(o=$(this).text(),u[s].tF)l=it(window,u[s].tF),(c=Je(l,[o],!0)).valid&&(o=c.result);"value"!=u[s].to?$(u[s].to).first().val(o):i.first().val(o)}}(H.crudop||H.func||H.outfunc)&&Me(H)(e,$(this)),a.removeClass("open")}}))}else if(!c){var j=Ce(h.parentEleId),D=(!0===h.diff||h.diff,Fg.getString(Te.viewer.this.default.ele));if(h.ele&&(D=h.ele),j.length>0){var I=Bt(D,h.container,Fg.getString(Te.viewer.this.default.style),Fg.getString(Te.viewer.this.default.class),{id:h.id+"_container"},"",!0);Ce(h.id+"_container").remove(),h.position&&"append"!=h.position?"clear"==h.position?j.html(I):"prepend"==h.position&&j.prepend(I):j.append(I),s=$("#"+h.id+"_container")}var B=Ft(r,v,d);if(s.html(B),(E=F[L])||(E=v),s.length>0){for(C=s.find(".faug-valid-row"),k=0;k<C.length;k++){T=a.details.name+"_inlinearea_"+k,S=a.details.name+"_inlinearea_"+k+"_ttr";$(C[k]).attr("id",S),$(C[k]).attr("faug-data-inlfid",T);P=k;void 0!==(z=$(C[k]).attr("faug-data-rownum"))&&!1!==z?P=z:$(C[k]).attr("faug-data-rownum",k),$(C[k]).attr("faug-data-crudopnm",m),$(C[k]).attr("faug-data-op-col-len",i?i.length:0),$(C[k]).attr("faug-data-schemanm",a.details.name),void 0!==(z=$(C[k]).attr("faug-data-ind-sep"))&&!1!==z&&(V=z),$(C[k]).data("data",it(E,P,V))}s.find(".faug-valid-row-stateful").on("click",(function(e){Faug.setProperty("previousElement",$(e.currentTarget))})),O&&O.paint(void 0,void 0,g)}}}else if(n.func){var E;j=Ce(h.parentEleId);if(Fg.execFunc(n.func,[v,h.parentEleId]),s=j,(E=F[L])||(E=v),s.length>0){s.data("data",v);for(C=s.find(".faug-valid-row"),k=0;k<C.length;k++){T=a.details.name+"_inlinearea_"+k,S=a.details.name+"_inlinearea_"+k+"_ttr";$(C[k]).attr("id",S),$(C[k]).attr("faug-data-inlfid",T);var z,V;P=k;void 0!==(z=$(C[k]).attr("faug-data-rownum"))&&!1!==z?P=z:$(C[k]).attr("faug-data-rownum",k),$(C[k]).attr("faug-data-crudopnm",m),$(C[k]).attr("faug-data-op-col-len",i?i.length:0),$(C[k]).attr("faug-data-schemanm",a.details.name),void 0!==(z=$(C[k]).attr("faug-data-ind-sep"))&&!1!==z&&(V=z),$(C[k]).data("data",it(E,P,V))}s.find(".faug-valid-row-stateful").on("click",(function(e){Faug.setProperty("previousElement",$(e.currentTarget))})),O&&O.paint(void 0,void 0,g)}}else if(w){var M=w.schema;w.schemaFunc&&(v=Fg.execFunc(w.schemaFunc,[]));var R=v;if(w.dataFunc&&(R=Fg.execFunc(w.dataFunc,[v])),!M&&v)for(var U in M=[],R[0])R[0].hasOwnProperty(U)&&M.push({name:U});if(R&&M&&Fg.is("Array",R)){(j=Ce(h.parentEleId)).grid&&j.grid.dispose(),j.html("");var q=canvasDatagrid({parentNode:j[0],borderDragBehavior:"move",allowMovingSelection:!0,columnHeaderClickBehavior:"select",allowFreezingRows:!0,allowFreezingColumns:!0,allowRowReordering:!0,tree:!1,debug:!1,showPerformance:!1});q.style.height="800px",q.style.width="100%",q.schema=M,q.data=v,j.grid=q}else{(j=Ce(h.parentEleId)).html("<p>No data found</p>")}}else if(Ne("String",e)){(j=Ce(h.parentEleId)).html(e)}else r&&x&&console.log("No template "+r+" found for "+a.details.name);var H,J;if(c&&s.hasClass("dropdown")&&v.length>0&&s.addClass("open"),a.details.editForm&&(J=a.details.editForm.showEvent),void 0!==h.editButton&&h.editButton.colNum>0);else if("contextmenu"==J||"click"==J){var W=function(e,t){var a=!0,r=!0,i=void 0,n="Edit",s="Delete";void 0!==t&&(i=Ke(t.custom,"","list-group",{},null),t.isedit&&(a=t.isedit),t.isdelete&&(r=t.isdelete),Pe(t.editlabel)||(n=t.editlabel),Pe(t.deletelabel)||(s=t.deletelabel));var o=e+"_actionMenu";Ce(o).remove();var l='<ul id="'+o+'" class="list-group faug-ctxt-action-menu">';return a&&(l+='<li class="list-group-item" faug-data-ctxt-action="Edit">'+n+"</li>"),r&&(l+='<li class="list-group-item" faug-data-ctxt-action="Delete">'+s+"</li>"),l+="</ul>",$(l).appendTo("body"),i&&(Ce(o).attr("style",i[0]),Ce(o).attr("class",i[1])),o}(o,h.custom.actionsArea),X=Ce(W);void 0!==h.custom.actionsArea&&void 0!==h.custom.actionsArea.custom&&void 0!==h.custom.actionsArea.custom.li&&(void 0===h.custom.actionsArea.custom.li.custom&&(h.custom.actionsArea.custom.li.custom={}),h.custom.actionsArea.custom.li.custom.attrpos="append",sca=Ke(h.custom.actionsArea.custom.li.custom,"","list-group-item",{},null),X.children().attr("style",sca[0]),X.children().attr("class",sca[1])),X.attr("data-viewerid",o),s.on(J,".faug-valid-row",function(e){return function(t){t.preventDefault(),e.is(":visible")?e.hide():(Ce($(this).attr("faug-data-inlfid")+"_tr").hide(),e.css("left",t.pageX),e.css("top",t.pageY),e.show(),e.attr("faug-data-rownum",$(this).attr("faug-data-rownum")),e.attr("faug-data-inlfid",$(this).attr("faug-data-inlfid")),e.attr("faug-data-thistrid",$(this).attr("id"))),t.preventDefault()}}(X)),"contextmenu"==J&&s.on("click",".faug-valid-row",(function(e){Ce($(this).attr("faug-data-inlfid")+"_tr").hide(),e.preventDefault()})),X.on("click","li",function(e,t){return function(a){t.is(":visible")&&t.hide(),"Edit"==$(this).attr("faug-data-ctxt-action")?kt(e,Ce($(this).parent().attr("faug-data-thistrid")),$(this)):"Delete"==$(this).attr("faug-data-ctxt-action")&&$t(e,Ce($(this).parent().attr("faug-data-thistrid")),$(this))}}(a,X))}var G=!1,Y=!1;if(!O&&void 0!==h.isDataTable&&h.isDataTable&&(G=!0),void 0!==h.serverPaginate&&(Y=h.serverPaginate),void 0!==n.serverPaginate&&(Y=n.serverPaginate),s.find(".faug-valid-row").data("viewerid",o),s.parent().find(".faug-edit-button").on("click",function(e){return function(){kt(e,$(this).closest(".faug-valid-row"),$(this))}}(a)),s.parent().find(".faug-delete-button").on("click",function(e){return function(){$t(e,$(this).closest(".faug-valid-row"),$(this))}}(a)),v.length>0&&G){var Q={bDestroy:!0};Y&&(Q.pagingType="simple");var K=He(void 0,h.dataTableConfigFunc,[Fg.copy(h),o]);K.valid&&void 0!==K.result&&(Q=K.result),s.dataTable(Q),Y&&0==Ce(o+"_wrapper").find(".faug-trigger-read-prev-button").length&&(Ce(o+"_wrapper").find("li.paginate_button.previous").removeClass("disabled"),Ce(o+"_wrapper").find("li.paginate_button.previous").addClass("faug-trigger-read-prev-button"),Ce(o+"_wrapper").find("li.paginate_button.next").removeClass("disabled"),Ce(o+"_wrapper").find("li.paginate_button.previous").addClass("faug-trigger-read-next-button"))}if(Y){var Z=!1!==h.defaultnextprevbuttons;!G&&Z&&s.parent().append(Fg.getString(Te.viewer.pagination.html));var ee=G?Ce(o+"_wrapper").find("li.paginate_button.previous"):s.parent().find(".faug-trigger-read-prev-button"),te=G?Ce(o+"_wrapper").find("li.paginate_button.next"):s.parent().find(".faug-trigger-read-next-button");ee.on("click",function(e,t,r){return function(i){var n=a.crud[t];n.start--,n.start<0?(n.start=0,$(this).attr("disabled","disabled")):yt({schemaName:e,op:t},r,!0,!0)}}(a.details.name,m,o)),te.on("click",function(e,t,r,i){return function(n){var s=a.crud[t];s.start++,0==s.start&&i.removeAttr("disabled"),yt({schemaName:e,op:t},r,!0,!0)}}(a.details.name,m,o,ee))}var ae=Ot(h.callbacks,n.callbacks,"afterDraw");He(ae,"afterDraw",[void 0,e,o])}}};var bt=this.crudOpCallback;this.refreshSchemaTemplate=function(e,t,a,r,i,n,s){if(c[e]){F[L]=void 0;var o=p[t].apply(null,[{rows:a}]);if(o){var l=Ce(r);l.html(o);var d=Ce(i).length>0?Ce(i):l;if(d.length>0){var u=F[L];u||(u=a);for(var f=d.find(".faug-valid-row"),m=0;m<f.length;m++){var h=e+"_inlinearea_"+m,g=e+"_inlinearea_"+m+"_ttr";$(f[m]).attr("id",g),$(f[m]).attr("faug-data-inlfid",h);var v,y=$(f[m]).attr("faug-data-rownum"),b=m;void 0!==y&&!1!==y?b=y:$(f[m]).attr("faug-data-rownum",m),$(f[m]).attr("faug-data-crudopnm",n),$(f[m]).attr("faug-data-op-col-len",$(f[m]).find("td").length),$(f[m]).attr("faug-data-schemanm",e),void 0!==(y=$(f[m]).attr("faug-data-ind-sep"))&&!1!==y&&(v=y),$(f[m]).data("data",it(u,b,v))}}n&&s&&He(c[e].crud[n].callbacks,s,[a])}}};this.refreshSchemaTemplate;function _t(e,a,r,i,n){p[e]&&!n||(p[e]=4!=i?t.templateEngine(a,r,!0):t.templateEngine(a,r,!0,!0))}this.rst=this.refreshSchemaTemplate,this.getTemplate=function(e,t){if(Fg.is("String",e))return e;if(e.template&&(Fg.isN(e.items)||0==e.items.length)&&(Fg.isN(e.cond)||ze(e.cond,t)))return e.template;var a="";if(Fg.isN(e.cond)||ze(e.cond,t)){for(var r in e.items)t[r]=Fg.getTemplate(e.items[r],t);a=e.template}return Fg.templatize(a,t,!0,null,!1)},this.templatize=function(a,r,i,n,s,o){if(s=!1!==s,i=!1!==i){if(p[a]){if(Ne("String",p[a]))return t.templateEngine(p[a],r,!0,!0,s).apply(null,[r]);if(Ne("Function",p[a]))return p[l].apply(null,[r])||""}return t.templateEngine(a,r,!0,!0,s).apply(null,[r])}var l=Fg.isN(o)?a:o;if(n||p[l]||(p[l]=t.templateEngine(a,r,!0,!1,s)),p[l])return p[l].apply(null,[r])||"";n&&e[l]&&We(l,function(e,t,a,r){return function(){var i=e[t].apply(null,[a]);r(i)}}(p,l,r,n))};var wt=this.templatize;this.tz=this.templatize,this.templatizeByName=function(e,t,a,r){return Ft(e,t,a,r)};this.templatizeByName;this.tzn=this.templatizeByName,this.templatizeSchemaTemplate=function(t,a,r,i){if(p[t]){var n=p[t].apply(null,[{rows:a,options:r}]);return n||""}if(i&&e[t]){if(!i){var s=t,o={rows:null,options:null,row:null},l=0;Ne("Array",e[t])&&(s=e[t][0],o=e[t][1],l=3==e[t].length?e[t][2]:0);a=$.get(s).then();return W[s]=o?[a,3,o]:[a,l],_t(s,a,o,o?3:0),new Promise.resolve(a)}We(t,function(e,t,a,r,i){return function(){var n=e[t].apply(null,[{rows:a,options:r}]);i(n)}}(p,t,a,r,i))}};var Ft=this.templatizeSchemaTemplate;this.tst=this.templatizeSchemaTemplate,this.templatizeSchemaPropOptionTemplate=function(t,a,r){if(p[t])try{var i=p[t].apply(null,[a]);return i||""}catch(e){return console.log(e),""}else r&&e[t]&&We(t,function(e,t,a,r){return function(){var i=e[t].apply(null,[a]);r(i)}}(p,t,a,r))};var xt=this.templatizeSchemaPropOptionTemplate;function Ot(e,t,a){return e&&e[a]?e:t&&t[a]?t:void 0}function $t(e,a,r){var i=S;if(a.attr("faug-crud-name")&&(i=a.attr("faug-crud-name")),void 0!==e.crud[i]){var n=e.crud[i],s=a.data("viewerid"),o=e.details.__viewer[s],l=1*a.attr("faug-data-rownum"),d=u[e.details.name][l],c=(n.url,Fg.getString(Te.viewer.deleteButton.msg));void 0!==o.deleteButton&&void 0!==o.deleteButton.msg&&""!=o.deleteButton.msg&&(c=wt(o.deleteButton.msg,d,void 0,void 0,!1)),t.getDialogConfirm(c,function(e,t,a,r,i,n){return function(r){if(r){if(e.callbacks&&e.callbacks.beforeOp){var s=He(void 0,e.callbacks.beforeOp,[n,e.url,a]);s.valid&&s.result&&(c=s.result)}if(e.callbacks&&e.callbacks.onOp){var o=He(void 0,e.callbacks.onOp,[a]);if(o.valid)return He(e.callbacks,"afterOp",[void 0,void 0,a,o.result,!0]),!1}var l=t.crud,d=i,u=JSON.stringify(a,void 0,"\t"),c=wt(l[d].url,a,void 0,void 0,!1);Ye(!0,l[d].meth,c,l[d].contentType,u,l[d].headers?Fg.copy(l[d].headers):{},(function(e){He(l[d].callbacks,"afterOp",[void 0,void 0,a,e,!0])}),(function(e){He(l[d].callbacks,"failure",[a,!1,e])}))}else He(e.callbacks,"onCancelDialog",[n,a])}}(n,e,d,0,i,r))}}this.tspot=this.templatizeSchemaPropOptionTemplate;this.alertDialog=function(e,a){t.getDialogAlert(e,a)},this.ad=this.alertDialog;function kt(e,t,a){St(!0);var r=e.details,i=t.attr("faug-data-inlfid"),n=1*t.attr("faug-data-rownum"),s=r.form.id,o=r.form.showReset,l=t.attr("faug-data-op-col-len");if(r.editForm.isInline){Ce((s=i)+"_tr").remove();var d=s+"_tr",f='<form id="'+s+'" class="form" role="form"></form>',h=t.prop("tagName");"tr"==h.toLowerCase()?Ce(s+"_ttr").after('<tr id="'+d+'" style="display:none;background-color:#f5f5f5"><td colspan="'+l+'">'+f+"</td></tr>"):Ce(s+"_ttr").after("<"+h+' id="'+d+'" style="display:none;background-color:#f5f5f5">'+f+"</"+h+">"),Ce(s+"_tr").show(),o=!1}else if(r.editForm.isModal){Ce((s=i)+"_tr").remove();d=s+"_tr";At(f='<div><form id="'+s+'" class="form" role="form"></form></div>',s+"_tr","Edit "+r.name,!0,void 0,!1),Ce(s+"_tr").modal({show:!0}),Ce(s+"_tr").show(),o=!1}else!0===r.editForm.create&&r.editForm.form_cont&&Bt("form",r.editForm,"width:95%;","form",{role:"form",id:r.editForm.id},null,!1,!0,!0);!function(e,t,a,r,i){var n;He(c[e].details.editForm.callbacks,"beforeDraw",[e]),m[e]=!0,c[e].details.form.custom&&c[e].details.form.custom.properties&&(n=c[e].details.form.custom.properties),c[e].details.editForm.custom&&c[e].details.editForm.custom.properties&&(n=c[e].details.editForm.custom.properties),Ce(a).html(at(c[e],c[e].details,c[e],"","",[u[e][t]],!1,!0,"",n)),Ce(a).data("data",u[e][t]),Nt(void 0,c[e].details,a),ot(void 0===c[e].details.editForm.submit||void 0===c[e].details.editForm.submit.label?Fg.getString(Te.form.submitButton.editlabel):c[e].details.editForm.submit.label,c[e],c[e].crud,T,a,r,c[e].details.editForm,i,n),He(c[e].details.editForm.callbacks,"afterDraw",[void 0,u[e][t],a]),c[e].details.editForm.callbacks&&c[e].details.editForm.callbacks.transformElements&&He(void 0,c[e].details.editForm.callbacks.transformElements,[]).valid,Nt(void 0,c[e].details,c[e].details.editForm.id)}(r.name,n,s,o,t),St(!1)}function Tt(e,t,a,r,i){if(t&&t.op){var n=a[1],s=c[t.schemaName].crud[t.op];if(!s)return!1;var o=n?n.closest(".faug-valid-row"):$(""),l=a[0],d=void 0,f=s.viewerId;if(!f&&t.viewerId&&(f=t.viewerId),n&&n.find(f).length>0&&(d=n.find(f)),n&&"next-relative"==t.viewerPos&&n.next().length>0&&n.next().find(f).length>0?d=n.next().find(f).first():n&&"prev-relative"==t.viewerPos&&n.next().length>0&&n.prev().find(f).length>0?d=n.prev().find(f).first():n&&"relative"==t.viewerPos&&n.find(f).length>0?d=n.find(f).first():"absolute"==t.viewerPos&&$(f).length>0&&(d=$(f).first()),!f&&c[t.schemaName].details&&c[t.schemaName].details.viewer&&c[t.schemaName].details.viewer[0]&&(f=c[t.schemaName].details.viewer[0].id),!Pe(t)&&!0===t.related&&o.length>0){var m=o.attr("faug-data-schemanm"),h=1*o.attr("faug-data-rownum"),g=u[m][h];if(s.inline){f=o.attr("faug-data-inlfid");var p=o.attr("faug-data-op-col-len"),v=f+"_tr";Ce(v).remove();var y=o.prop("tagName"),b={callbacks:{},custom:{}};t.viewer&&(b=t.viewer);var _=Bt("table",b,"width:100%;","table table-striped table-bordered table-hover",{id:f},null,!0,!1,!1,"div");"tr"==y.toLowerCase()?o.after('<tr id="'+v+'" style="background-color:#f5f5f5"><td colspan="'+p+'">'+_+"</td></tr>"):o.after("<"+y+' id="'+v+'" style="background-color:#f5f5f5">'+_+"</"+y+">"),c[t.schemaName].details.__viewer[f]=b}if(f)return l&&l.stopPropagation(),yt(t,f,!0,!0,g,!1,d),!1}else if(!Pe(t)){if(l&&l.stopPropagation(),!0!==s.showdropdownmenu){b={callbacks:{},custom:{}};c[t.schemaName].details.__viewer[f]||(t.viewer&&(b=t.viewer),c[t.schemaName].details.__viewer[f]=b),yt(t,f,!0,!0,null,!1,d)}else{f="dd_"+t.schemaName+"_"+t.op,Ce(f).length>0&&Ce(f).remove();b={callbacks:{},custom:{}};t.viewer&&(b=t.viewer),c[t.schemaName].details.__viewer[f]=b,r=Pe(r)?'" faug-data-ddtrgcls="'+i+'"':'" faug-data-ddtrgid="'+r+'"';var w=$('<div class="dropdown" id="'+f+r+"></div>");n.after(w),w.css({position:"absolute",bottom:0}),yt(t,f,!0,!0,null,!0,void 0)}return!1}}}this.confirmDialog=function(e,a){t.getDialogConfirm(e,a)},this.cd=this.confirmDialog,this.freezeUI=function(e,t){if(t||(t=B),0==Ce(t).length){var a=E;if(E||!(a=window.freezeLoaderHtml)&&Te.freezeLoaderHtml&&(a=Fg.getString(Te.freezeLoaderHtml)),window.freezeUiContainer)var r=Fg.templatize(window.freezeUiContainer,{freezeLoaderHtml:a},!0,void 0,!1);else if(Fg.isN(Te.freezeUiContainer))r='<div style="z-index: 1000; border: none; margin: 0px; padding: 0px; width: 100%; \t\t\t\t\theight: 100%; top: 0px; left: 0px; cursor: wait; position: fixed; opacity: 0.323537741574588; \t\t\t\t\t"></div><div style="z-index: 1011; position: fixed; padding: 0px; margin: 0px; \t\t\t\t\twidth: 30%; top: 40%; left: 35%; text-align: center; cursor: wait; opacity: 0.539229547863922;">'+a+"</div>";else var r=Fg.templatize(Fg.getString(Te.freezeUiContainer),{freezeLoaderHtml:a},!0,void 0,!1);$('<div id="'+B+'">'+r+"</div>").appendTo("body")}var i=Ce(t);e?(i.is(":visible")||i.show(),z++):--z<=0&&(z=0,i.hide())};var St=this.freezeUI;this.fz=this.freezeUI,this.freezeUIFor=function(e){isNaN(e)||e<100||(Fg.freezeUI(!0),setTimeout((function(){Fg.freezeUI(!1)}),e))},this.fzf=this.freezeUIFor,this.showModalForm=function(e,t,a,r,i,n,s,o,l){void 0===s&&(s="75%"),void 0===o&&(o="300px;"),this.isN(s)||(s="width: "+s+";"),this.isN(o)||(o="height: "+o+";");var d="";this.isN(a)||(d+=a),r&&(d+='<button type="button" class="close" data-dismiss="modal">&times;</button>'),""!=d&&(d='<div class="modal-header">'+d+"</div>");var u="";n&&(u='<div class="modal-footer">'+(this.isN(i)?"":i)+"</div>"),this.byId(t).remove(),$("body").append('<div id="'+t+'" class="modal fade" role="dialog"> \t\t\t\t<div class="modal-dialog" style="'+s+o+';"> \t\t\t\t<div class="modal-content"> \t\t\t\t'+d+' \t\t\t\t<div class="modal-body clearfix">'+e+"</div> \t\t\t\t"+u+" \t\t\t\t</div> \t\t\t\t</div> \t\t\t\t</div>"),l&&function(e){e.css("display","block");var t=e.find(".modal-dialog"),a=($(window).height()-t.height())/2,r=parseInt(t.css("marginBottom"),10);a<r&&(a=r),t.css("margin-top",a)}(this.byId(t))};var At=this.showModalForm;function Nt(e,t,a,r,i,n){for(var s in i=i||!1,a&&Fg.byId(a).length>0&&(Fg.byId(a).find(".faug-comp-add-button,.faug-comp-remove-button").off("click.addrem").on("click.addrem",(function(e){return Faug.plusminuslistfunc(e,t.name,$(this)[0],$(this).hasClass("faug-comp-add-button"))})),Fg.byId(a).find(".faug-comp-max-button,.faug-comp-min-button").off("click.maxmin").on("click.maxmin",(function(e){var a=$(this).attr("cntid").replace(/\\'/g,"'"),r=$(this).attr("schnm").replace(/\\'/g,"'");return Faug.showHideGroupedEntity(e,$(this)[0],a,r,t.name)})),Fg.byId(a).find(".faug-load-more").off("click.more").on("click.more",(function(e){return Faug.plusminuslistfuncLoadMore(e,t.name,$(this)[0],!1)}))),h[t.name])if(h[t.name].hasOwnProperty(s)&&(void 0===e||0!=!s.indexOf(e))&&(void 0===r||r==s)){var o=h[t.name][s],l=[];for(var d in o)if(o.hasOwnProperty(d)){var u=o[d],f=d.split(","),m=!1;"defaultOnce"in o&&(m=!0);for(var g=0;g<f.length;g++)if("trigger"==f[g]){var p=c[t.name];p.__namedCallbacks&&He(p.__namedCallbacks,u,void 0,!1)}else if("defaultOnce"!=f[g]||i){if("default"==f[g]&&(!i&&!m||i&&m))Dt(void 0,$(document.getElementsByName(s)[0]),u,s,a,t.name);else if("defaultOnce"!=f[g]&&"default"!=f[g]){var v=document.getElementsByName(s),y=f[g]+"."+g;$(v).off(y),$(v).on(y,function(e,t,a,r,i){return function(a){Fg.isN($(this).attr("name"))||t==$(this).attr("name")||(t=$(this).attr("name")),Dt(a,$(this),e,t,r,i)}}(u,s,f[g],a,t.name))}}else l.push(d),Dt(void 0,$(document.getElementsByName(s)[0]),u,s,a,t.name)}for(g=0;g<l.length;g++)delete o[l[g]]}}function Ct(e,t,a){t=(""+t).split(a=void 0===a?".":a);for(var r=0;r<t.length;r++)e.properties&&e.properties[t[r]]?e=e.properties[t[r]]:e.items&&e.items.properties&&e.items.properties[t[r]]&&(e=e.items.properties[t[r]]);return e}function Pt(e,t,a,r,i,n,s,o,l){var d=e;t.storeAs&&(f[t.storeAs]=e);var u=t.target,m=null;u?(r!=i&&(u=r+"['"+t.target+"']"),a=$(document.getElementsByName(u)[0])):u=i;var h=c[s];if(a&&a.length>0&&"select"==a.prop("tagName").toLowerCase()){var g=!1;if(m=Fg.ueh(a.parent().attr("acvalue"))){var p=m.substring(0,4);m=m.substring(4),"jsn@"==p?m=JSON.parse(m):"ind@"==p&&!isNaN(m)&&!Pe(e)&&e.length>0&&(m=e[Number(m)])}g="true"===a.parent().attr("faug-read-only"),d="",Pe(m)&&!Pe(e)&&e.length;var v=u.substring(u.indexOf("[")+2).replace(/\['/g,".properties.").replace(/'\]/g,"").replace(/(\[[0-9]*\])/g,"");T=Ct(T=c[s],v),!m&&!isNaN(T.defaultIndex)&&!Pe(e)&&e.length>T.defaultIndex&&(m=e[T.defaultIndex]);var y={};for(var b in T.vars){if(T.vars.hasOwnProperty(b))(O=Ie(T.vars[b],a))[0]&&(y[b]=O[1])}var _={isTransient:!0===T.transient||"true"===T.transient,elName:u,rows:e,selectedVal:m,details:h.details,vars:y};if(g)d=m;else if(T.optionTemplate)d=wt(T.optionTemplate,_,!1);else if(T.genericOptionTemplateFile)d=xt(T.genericOptionTemplateFile,_);else if(T.optionTemplateFile)d=xt(T.optionTemplateFile,_);else if(!Pe(e))if(Ne("Array",e))for(var w=0;w<e.length;w++){var F=1==e[w].length?e[w][0]:e[w][1],x=e[w][0]==m?"selected":"";d+='<option value="'+e[w][0]+'" '+x+">"+Fg.eh(F)+"</option>"}else for(var O in e){F=e[O];d+='<option value="'+O+'" '+(x=O==m?"selected":"")+">"+Fg.eh(F)+"</option>"}if(a.html(d),m&&""!=m||(a.val(a.find("option:first").val()),a.find("option:first").attr("selected",!0)),Nt(void 0,h.details,n,u,!0),void 0!==t.done)Dt(o,a,t.done,i,n,s)}else{var k=Ce(u+"_cont");if((g="true"===k.attr("faug-read-only"))||a.length>0&&(a.remove(),a=void 0),(g||void 0===a||0==a.length)&&k.length>0){if(m=Fg.ueh(k.attr("acvalue"))){p=m.substring(0,4);m=m.substring(4),"jsn@"==p?m=JSON.parse(m):"ind@"==p&&!isNaN(m)&&!Pe(e)&&e.length>0&&(m=e[Number(m)])}var T;k.attr("ffead-pth"),v=u.substring(u.indexOf("[")+2).replace(/\['/g,".properties.").replace(/'\]/g,"").replace(/(\[[0-9]*\])/g,""),(T=Ct(T=c[s],v)).enum;!m&&!isNaN(T.defaultIndex)&&!Pe(e)&&e.length>T.defaultIndex&&(m=e[T.defaultIndex]);y={};for(var b in T.vars){if(T.vars.hasOwnProperty(b))(O=Ie(T.vars[b],a))[0]&&(y[b]=O[1])}_={isTransient:!0===T.transient||"true"===T.transient,elName:u,rows:e,selectedVal:m,details:h.details,vars:y};var S,A=!1;if(g)Fg.byName(u).html(m);else if(T.optionTemplate)d=wt(T.optionTemplate,{isTransient:!0===T.transient||"true"===T.transient,elName:u,rows:e,selectedVal:m,details:h.details,vars:y},!1);else if(T.genericOptionTemplateFile)d=xt(T.genericOptionTemplateFile,_);else if(T.optionTemplateFile)d=xt(T.optionTemplateFile,_);else{var N;A=!0,(N=jQuery.extend(!0,{},T)).events&&N.events.default&&(N.events.default=void 0),N.enum=e,d=at(T,h.details,N,u,[{}],[m],!1,!0,t.target,void 0)}if(!g)if(""!=d)if(A)k.replaceWith(d);else(N=jQuery.extend(!0,{},T)).elementHtml=d,delete N.enum,S=c[s].details.form.custom.properties,d=at(T,h.details,N,u,[{}],[m],!1,!0,t.target,S),k.html($(d).html());if(Nt(void 0,h.details,n,u,!0),void 0!==t.done)Dt(o,a=$(document.getElementsByName(u)[0]),t.done,i,n,s)}else{if(a.val(d),void 0!==t.done)Dt(o,a,t.done,i,n,s)}}}this.sm=this.showModalForm;var jt=[];function Dt(e,t,a,r,i,n){for(var s=0;s<a.length;s++)if(a[s]){if("function"==typeof a[s])return void a[s](t,e);var o=void 0===a[s].show?[]:a[s].show,l=void 0===a[s].hide?[]:a[s].hide,d=void 0===a[s].values?[]:a[s].values,u=void 0===a[s].how?"display":a[s].how,f=a[s].from;if(o.length>0){-1!=(y=j=r).indexOf("[")&&"."==(y=y.substring(y.indexOf("[")).replace(/'/g,"").replace(/\[/g,"").replace(/\]/g,"."))[y.length-1]&&(y=y.substring(0,y.length-1));var m=$(document.getElementsByName(j)),h=t.val();if(m.length>1&&(h=it(Ce(i).serializeObject(n),y)),f&&f.length>1)!0===(b=Ie(f,t))[0]&&(h=b[1]);else void 0===h&&Fg.byId(j+"_cont").length>0&&(h=Fg.getActualValue(Fg.byId(j+"_cont"),!0));for(var g=0;g<o.length;g++){var p=m.attr("name")+"_cont";w=-1==(w=Fg.byId(p).attr("ffead-pth")).indexOf(".")?"":w.substring(0,w.lastIndexOf(".")+1);var v=$("div[ffead-pth='"+w+o[g]+"']");if((F=$("div[ffead-pth='"+o[g]+"']")).length>0?_=F.attr("id"):v.length>0&&(_=v.attr("id")),_)if(-1!==$.inArray(h,d))Pe(u)||"display"==u?Ce(_).show():Ce(_).removeClass(u),(O=Ce(_).find("input[_faug-tmp-req],select[_faug-tmp-req],textarea[_faug-tmp-req]")).attr("required",!0),O.removeAttr("_faug-tmp-req");else Pe(u)||"display"==u?Ce(_).hide():Ce(_).addClass(u),(O=Ce(_).find("input[required],select[required],textarea[required]")).attr("_faug-tmp-req",!0),O.removeAttr("required")}}if(l.length>0){var y;-1!=(y=j=r).indexOf("[")&&"."==(y=y.substring(y.indexOf("[")).replace(/'/g,"").replace(/\[/g,"").replace(/\]/g,"."))[y.length-1]&&(y=y.substring(0,y.length-1));var b;m=$(document.getElementsByName(j)),h=t.val();if(m.length>1&&(h=it(Ce(i).serializeObject(n),y)),f&&f.length>1)!0===(b=Ie(f,t))[0]&&(h=b[1]);else void 0===h&&Fg.byId(j+"_cont").length>0&&(h=Fg.getActualValue(Fg.byId(j+"_cont"),!0));for(g=0;g<l.length;g++){var _,w;p=m.attr("name")+"_cont";w=-1==(w=Fg.byId(p).attr("ffead-pth")).indexOf(".")?"":w.substring(0,w.lastIndexOf(".")+1);var F,O;v=$("div[ffead-pth='"+w+l[g]+"']");if((F=$("div[ffead-pth='"+l[g]+"']")).length>0?_=F.attr("id"):v.length>0&&(_=v.attr("id")),_)if(-1!==$.inArray(h,d))Pe(u)||"display"==u?Ce(_).hide():Ce(_).addClass(u),(O=Ce(_).find("input[required],select[required],textarea[required]")).attr("_faug-tmp-req",!0),O.removeAttr("required");else Pe(u)||"display"==u?Ce(_).show():Ce(_).removeClass(u),(O=Ce(_).find("input[_faug-tmp-req],select[_faug-tmp-req],textarea[_faug-tmp-req]")).attr("required",!0),O.removeAttr("_faug-tmp-req")}}var k=void 0===a[s].type?null:a[s].type;if("ajax"==k){function T(e,t,a,r,i,n,s){if(a[s].cond&&Fg.is("Array",a[s].cond)&&a[s].cond.length>0&&!ze(a[s].cond,r)){void 0!==a[s].done&&Dt(e,t,a[s].done,nele,i,n)}else{var o,l=r;-1!=r.indexOf("[")?(l=r.substring(0,r.lastIndexOf("[")),o=Ce(l+"_cont").serializeObject(l)):o=Ce(i).serializeObject(n);var d=c[n];if(!0===d.details.__ishelper&&d.details.initObject){var u;if(Ne("String",d.details.initObject)){var f=Je(d.details.initObject);f.valid&&(u=f.result)}else u=d.details.initObject;o=mergeVarsLR(u,o,!1)}if(a[s].udvars)for(var m in a[s].udvars)if(a[s].udvars.hasOwnProperty(m)){var h=Ie(a[s].udvars[m],t);h[0]&&void 0===o[m]&&(o[m]=h[1])}var g=wt(a[s].url,o,void 0,void 0,!1),p="";cont=a[s].content,"GET"!=a[s].meth&&cont?(cont=wt(cont,o,void 0,void 0,!1),p="application/json"):"GET"!=a[s].meth&&(o=Ce(i).serializeObject(n,!0),cont=JSON.stringify(o,void 0,"\t"),p="application/json");var v=Fg.isN(a[s].freezeUi)||!0===a[s].freezeUi||"true"===a[s].freezeUi;Qe(v,a[s].meth,g,p,cont,a[s].headers?Fg.copy(a[s].headers):{},a[s].cachedTime).done(function(e,t,a,r,i,n,s,o){return function(o){Pt(o,e,t,a,r,i,n,s)}}(a[s],t,l,r,i,n,e,cont)).fail((function(e){x&&alert("Cannot fetch data elements")}))}}Fg.is("String",a[s].id)&&""!=a[s].id.trim()?-1==jt.indexOf(a[s].id.trim())&&(jt.push(a[s].id.trim()),setTimeout(function(e,t,a,r,i,n,s,o){var l=jt.indexOf(r[o].id.trim());return-1!==l&&jt.splice(l,1),function(){e(t,a,r,i,n,s,o)}}(T,e,t,a,r,i,n,s),50)):T(e,t,a,r,i,n,s)}else if("func"==k){var S=void 0===a[s].func?null:a[s].func,A=void 0===a[s].fromVar?null:a[s].fromVar;if(A)P=It()[A];else{var N,C=window[S],P=null,j=r;-1!=r.indexOf("[")?(j=r.substring(0,r.lastIndexOf("[")),N=Ce(j+"_cont").serializeObject(j)):N=Ce(i).serializeObject(n),P="function"==typeof C?C([t,N]):C}Pt(P,a[s],t,j,r,i,n,e)}else if("full"==k){if(Me(a[s])(e,t),void 0!==a[s].done)Dt(e,t,a[s].done,r,i,n)}}}function It(){return mergeVars(F,re)}function Bt(e,t,a,r,i,n,s,o,l,d,u,c){var f="";if(Pe(t)||Pe(t.custom)||void 0===t.custom.html){null==a&&(a=""),null==r&&(r=""),null==i&&(i={}),null==n&&(n="");var m=e,h=Ke(t?t.custom:null,a,r,i,m);a=h[0],r=h[1],i=h[2],m=h[3],f="<"+(e=je(m,e))+' style="'+a+'" class="'+r+'" '+i+">"+n+"</"+e+">";var g=void 0;Pe(t)||Pe(t.custom)||(g=t.custom.parent),g&&(f=Bt(g.el?"div":g.el,g||null,"","",{},f,!0))}else f=t.custom.html;if(void 0!==d&&""!=d&&null!==d&&(c||(c=""),f="<"+d+" "+c+">"+f+"</"+d+">"),s)return f;if(t.hasOwnProperty("create")&&t.create){Ce(t.id).remove();var p=t.position,v=Ce(t.parentEleId);if(Ne("String",u)&&(u=Ce(u)),null!=u&&u.length>0&&(v=u),v.length>0)"prepend"==p?v.prepend(f):l&&"clear"==p?v.html(f):v.append(f);else if(o&&t.isModal){var y=t.id+"_mdct";Ce(t.id).remove(),Ce(y).remove(),At(f,y,t.header,!0,void 0,!1)}}}function Et(e,t,a,r,i,n){var s=w[a],o=document.getElementById(a+"_cont"),l=1*$(o).attr("faug-curr-size");if(r||0!=l){if(!r){if(e&&e.attr("ffead-el-link")){var d=1*Fg.byId(e.attr("ffead-el-link")).parent().attr("data-pos"),u=e.attr("ffead-el-link");u=u.substr(0,u.lastIndexOf("[")),Fg.byId(e.attr("ffead-el-link")).parent().remove(),0==l&&(l=1),$(o).attr("faug-curr-size",l-1);for(var c=d+1;c<l;c++){var f=u+"["+c+"]",m=u+"["+(c-1)+"]";Fg.byId(u+"_cont").find('[id^="'+$.escapeSelector(f)+'"]').each((function(){var e=$(this).attr("id").replace(f,m);$(this).attr("id",e)})),Fg.byId(u+"_cont").find('[name^="'+$.escapeSelector(f)+'"]').each((function(){var e=$(this).attr("name").replace(f,m);$(this).attr("name",e)})),Fg.byId(m+"_cont").parent().attr("data-pos",c-1)}return}if(s.minitems&&1*s.minitems==l)return;var h=o.childNodes[o.childNodes.length-1];return h.remove(),0==l&&(l=1),$(o).attr("faug-curr-size",l-1),h}if(!s.maxitems||1*s.maxitems!=l){var g=l,p=a+"["+g+"]",v=null!=w[a].isSpan&&w[a].isSpan,y=null==w[a].nolabel||!w[a].nolabel,b=at(w[a],t,w[a],p,{},[i],v,y,"",n),_=Fg.getString(Te.form.array.this.container.ele),F=Fg.getString(Te.form.array.this.container.style),x=Fg.getString(Te.form.array.this.container.class),O=Fg.copy(Te.form.array.this.container.attrs),k=Ke(w[a].custom.container,F,x,O);F=k[0],x=k[1],O=k[2];var T="";if("object"==s.type&&(void 0===s.showMinMax||s.showMinMax)){var S="",A="",N="display:none;",C="faug-comp-min-state faug-comp-min-button",P="faug-comp-min-state",j="div";if(!0===s.itemrembutton){void 0===s.custom.remButton&&(s.custom.remButton={}),void 0===s.custom.remButton.custom&&(s.custom.remButton.custom={}),s.custom.remButton.custom.attrpos="append";var D="Remove";s.custom.remButton.text&&(D=s.custom.remButton.text),s.custom.remButton.html&&(D=s.custom.remButton.html),A=Ze(Te.form.array.this.header.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Te.form.array.this.header.remButton.style),Fg.getString(Te.form.array.this.header.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:a,"ffead-el-link":p+"_cont"}],s.custom.remButton,D,n,!1,!1,null,!1,null,!0)}if(i){if(s.summaryTemplate){var I=!(!Pe(s.summaryTemplateDynamic)&&!0!==s.summaryTemplateDynamic);S+=wt(s.summaryTemplate,i,I)}else if(s.summaryTemplateFunc){var B=Je(s.summaryTemplateFunc,[i]);B.valid&&(S+=B.result)}if(""==S)for(var E in s.properties)if(s.properties.hasOwnProperty(E)){var z=E;null!=z&&(z=z.substring(0,1).toUpperCase()+z.substring(1)),s.properties[E].hasOwnProperty("display")&&(z=s.properties[E].display),S=z+": "+i[E];break}void 0!==s.editMinimize&&s.editMinimize&&(N="",C="faug-comp-max-state faug-comp-max-button",P="faug-comp-max-state")}if(!1===s.nominmaxbutton){j=Fg.getString(Te.form.array.this.header.ele),void 0!==s.custom&&(j=s.custom.el),null!=j&&""!==j||(j="div");var V=Bt(Fg.getString(Te.form.array.this.header.minlabel.ele),s.custom.minlabel,N,null,null,S,!0,!1,!1,null,null);void 0===s.custom.minmaxbutton&&(s.custom.minmaxbutton={}),void 0===s.custom.minmaxbutton.custom&&(s.custom.minmaxbutton.custom={}),s.custom.minmaxbutton.custom.attrpos="append";var M=Ut(a+"["+g+"]","'"),R=Ut(a,"'"),L={};L["faug-comp-min-state"]=s.custom.minmaxbutton.custom["faug-comp-min-state"],L["faug-comp-max-state"]=s.custom.minmaxbutton.custom["faug-comp-max-state"],L["faug-comp-min-state"]||(L["faug-comp-min-state"]="-"),L["faug-comp-max-state"]||(L["faug-comp-max-state"]="+"),L.cntid=M,L.schnm=R,L.type="button",A+=V+=Bt(Fg.getString(Te.form.array.this.header.minmaxButton.ele),s.custom.minmaxbutton,Fg.getString(Te.form.array.this.header.minmaxButton.style),C,L,L[P],!0)}T+=Bt(j,s.custom,null,"clearfix",null,A,!0,!1,!1,null,null)}O+=' data-pos="'+l+'"';var U=$("<"+_+'class="'+x+'" style="'+F+'" '+O+">");return U.html(T+b),$(o).attr("faug-curr-size",l+1),U}}}this.setScopedVar=function(e){F[L]=e},this.sscv=this.setScopedVar,this.setActualValue=function(e,t,a){var r="str@"+t;Ne("Array",t)&&t.length>1&&(r="jsn@"+Ut(JSON.stringify(t))),(e=!0===a?e:e.parent()).attr("acvalue",Fg.eh(r))},this.getActualValue=function(e,t){e=!0===t?e:e.parent();var a=Fg.ueh(e.attr("acvalue"));if(a){var r=a.substring(0,4);return a=a.substring(4),"jsn@"==r&&(a=JSON.parse(a)),a}},this.addGlobalVar=function(e,t,a){e in F&&void 0!==a&&!0!==a||(F[e]=t)},this.ag=this.addGlobalVar,this.getGlobalVar=function(e){return F[e]},this.g=this.getGlobalVar,this.deleteGlobalVar=function(e){delete F[e]},this.dg=this.deleteGlobalVar,this.addVar=function(e,t,a){e in re&&void 0!==a&&!0!==a||(re[e]=t)},this.av=this.addVar,this.getVar=function(e){return e in re?re[e]:F[e]},this.v=this.getVar,this.deleteVar=function(e){delete re[e]},this.dv=this.deleteVar,this.getStoreVar=function(e){return f[e]},this.gstv=this.getStoreVar,this.addStoreVar=function(e,t,a){f[e]&&void 0!==a&&!0!==a||(f[e]=t)},this.astv=this.addStoreVar,this.getSchema=function(e){return this.copy(c[e])},this.gs=this.getSchema,this.getNodeValue=function(e,t){var a=t.split(".");t="";for(var r=0;r<a.length;r++)t+="['"+a[r]+"']";var i=$(document.getElementsByName(e+t));if(i.length>0){var n=i.first().val();if(i.attr("faug-serialize-position")){var s=i.attr("faug-serialize-position");"text"==s?n=i.text():"html"==s?n=i.html():"value"!=s&&(n=i.attr(s));var o=i.attr("faug-serialize-function");if(o&&""!==o.trim()){var l=Je(o,[n,i]);l.valid&&(n=l.result)}}return n}return null},this.gnv=this.getNodeValue,this.setNodeValue=function(e,t,a){var r=t.split(".");t="";for(var i=0;i<r.length;i++)t+="['"+r[i]+"']";var n=$(document.getElementsByName(e+t));if(n.length>0&&n.attr("faug-serialize-position")){var s=n.attr("faug-serialize-position");"text"==s?n.first().text(a):"html"==s?n.first().html(a):"value"==s?n.first().val(a):"function"!=s&&n.first().attr(s,a)}return null},this.snv=this.setNodeValue,this.showNode=function(e,t){var a=t.split(".");t="";for(var r=0;r<a.length;r++)t+="['"+a[r]+"']";var i=$(document.getElementsByName(e+t+"_cont"));if(i.length>0)return i.show()},this.shn=this.showNode,this.hideNode=function(e,t){var a=t.split(".");t="";for(var r=0;r<a.length;r++)t+="['"+a[r]+"']";var i=$(document.getElementsByName(e+t+"_cont"));if(i.length>0)return i.hide()},this.hdn=this.hideNode,this.getNode=function(e,t){var a=t.split(".");t="";for(var r=0;r<a.length;r++)t+="['"+a[r]+"']";return $(document.getElementsByName(e+t))},this.gn=this.getNode,this.getNodeContainer=function(e,t){var a=t.split(".");t="";for(var r=0;r<a.length;r++)t+="['"+a[r]+"']";return $(document.getElementsByName(e+t+"_cont"))},this.gnc=this.getNodeContainer,this.getFormContainer=function(e){return $(document.getElementById(e+"_cont"))},this.gfc=this.getFormContainer,this.getForm=function(e){if(c[e]&&c[e].details&&c[e].details.form)return Fg.byId(c[e].details.form.id)},this.gf=this.getForm,this.o=function(e){var t={form:function(){return Fg.gf(e)},formContainer:function(){return Fg.gfc(e)},serialize:function(){return Fg.gf(e).serializeObject(e)},property:function(t){var a=Fg.getNode(e,t),r={get:function(){return a},change:function(e,t){a.val(e),t=Fg.isN(t)?"change":t,a.trigger(t)},val:function(e){if(void 0===e){var t;if(a.length>1)for(var r=0;r<a.length;r++){var i=$(a[r]);if("radio"==i.attr("type"))a[r].checked&&(t=i);else{var n=a.val();i.val()==n&&(t=i)}}else t=a;var s=t.val();if(t.attr("faug-serialize-position")){var o=t.attr("faug-serialize-position");"text"==o?s=t.text():"html"==o?s=t.html():"value"!=o&&(s=t.attr(o));var l=t.attr("faug-serialize-function");if(l&&""!==l.trim()){var d=Fg.execFunc(l,[s,t]);d.valid&&(s=d.result)}}return s}a.val(e)},text:function(){if(!(a.length>1))return""==(r=a.text())&&""!=a.parent().text()?a.parent().text():r;for(var e=0;e<a.length;e++){var t=$(a[e]);if("radio"==t.attr("type")){if(a[e].checked)return""==(r=t.text())&&""!=t.parent().text()?t.parent().text():r}else{var r,i=a.val();if(t.val()==i)return r=t.text()}}}};return r.g=r.get,r.c=r.change,r.v=r.val,r.t=r.text,r}};return t.f=t.form,t.fc=t.formContainer,t.p=t.property,t.s=t.serialize,t},this.clearSchemaActivityArea=function(e,t,a){Pe(t)&&(t=!0),Pe(a)&&(a=!0);var r=c[e];if(null!=r){if(void 0!==r.details.form&&t){var i=r.details.form.id;Ce(i).hide()}if(a&&!Pe(r.details.viewer)&&0!=r.details.viewer.length)for(var n=0;n<r.details.viewer.length;n++){var s=r.details.viewer[n];0!=Ce(s.id).length&&$.fn.DataTable.fnIsDataTable(Ce(s.id))?(Ce(s.id).dataTable().fnDestroy(),Ce(s.id).off(),Ce(s.id).empty(),Ce(s.id).parent().hide()):Ce(s.id).length>0&&(Ce(s.id).empty(),Ce(s.id).parent().hide())}}},this.plusminuslistfuncLoadMore=function(e,t,a){if("a"==a.nodeName.toLowerCase()||"button"==a.nodeName.toLowerCase()){var r=$(document.getElementById(a.getAttribute("list_value_cls")+"_cont")),i=a.getAttribute("list_value_cls"),n=i,s=1*r.attr("faug-tot-size"),o=1*r.attr("faug-curr-size"),l=r.attr("faug-offset"),d=Ce(c[t].details.form.id).data("data");"."==(n=(n=(n=(n=n.replace(t,"")).replace(/\[/g,"")).replace(/\]/g,".")).replace(/'/g,"")).charAt(n.length-1)&&(n=n.substr(0,n.length-1));var u=it(d,n);if(o<u.length){var f=1*o+1*l;f>u.length&&(f=u.length);for(var m=o;m<f;m++){var h;c[t].details.form.custom&&c[t].details.form.custom.properties&&(h=c[t].details.form.custom.properties),Et(void 0,c[t].details,i,!0,u[m],h).insertBefore(a);var g=o;Nt(a.getAttribute("list_value_cls")+"["+g+"]",c[t].details)}Nt(a.getAttribute("list_value_cls")+"["+f-1+"]",c[t].details,a.getAttribute("list_value_cls")+"_cont"),f==s?(a.setAttribute("current",f),r.attr("faug-curr-size",f),$(a).remove()):(a.setAttribute("current",f),r.attr("faug-curr-size",f))}}return e.preventDefault(),!1},this.pmlflm=this.plusminuslistfuncLoadMore,this.plusminuslistfunc=function(e,t,a,r){if("a"==a.nodeName.toLowerCase()||"button"==a.nodeName.toLowerCase()){var i=$(document.getElementById(a.getAttribute("list_value_cls")+"_cont")),n=a.getAttribute("list_value_cls"),s=w[n];if(s.callbacks&&s.callbacks.isAddRemove)if((u=Fg.execFunc(s.callbacks.isAddRemove,[r,t])).valid&&!1===u.result)return!1;var o,l=1*i.attr("faug-curr-size");c[t].details.form.custom&&c[t].details.form.custom.properties&&(o=c[t].details.form.custom.properties);var d=null;if(r&&s.callbacks)if(s.callbacks.initDataGvar&&Fg.g(s.callbacks.initDataGvar))d=Fg.g(s.callbacks.initDataGvar);else if(s.callbacks.initData){var u;(u=Fg.execFunc(s.callbacks.initData,[])).valid&&u.result&&(d=u.result)}var f=Et($(e.currentTarget),c[t].details,n,r,d,o);if(r){document.getElementById(n+"_cont").appendChild(f[0]);var m=l;Fg.execCallBack(s.callbacks,"addItem",[!0,f]),Nt(a.getAttribute("list_value_cls")+"["+m+"]",c[t].details,a.getAttribute("list_value_cls")+"_cont")}else{m=l;Fg.execCallBack(s.callbacks,"removeItem",[!1,f]),Nt(a.getAttribute("list_value_cls")+"["+m+"]",c[t].details,a.getAttribute("list_value_cls")+"_cont")}}return e.preventDefault(),!1},this.pmlf=this.plusminuslistfunc,this.getPropValue=function(e,t){var a=e.serializeObject();return-1!=t.indexOf("[")&&(t=t.replace(/\[/g,".").replace(/\]/g,"").replace(/'/g,"")),it(a,t)};var zt=this.getPropValue;this.validateElement=function(e,t,a,r){if(!a&&c[e]&&c[e].details&&c[e].details.form&&(a=Fg.byId(c[e].details.form.id)).length>0&&a.removeClass("faug-form-error"),c[e]){var i=c[e];i=Ct(i,t);var n=t.split("."),s=e;if(""!=t.trim())for(var o=0;o<n.length;o++)s+="['"+n[o]+"']";if(i)if("object"==i.type||"array"==i.type){var l=i.properties;r=!0===r?r&&i.validateHiddenElements:i.validateHiddenElements;var d=!1;for(var u in!l&&i.items&&(l=i.items.properties,d=!0),l)if(l.hasOwnProperty(u)){var f=l[u];if(!f)continue;if("object"==f.type||"array"==f.type){Vt(e,t&&""!=t?t+"."+u:u,a);continue}var m=_[s];if(m>=0&&d)for(o=0;o<m;o++){var h=$(document.getElementsByName(s+"["+o+"]['"+u+"']")),g=Ce(s+"["+o+"]['"+u+"']_cont");if((r||g.is(":visible"))&&f.validations){var p=h.length>0?zt(g,s+"."+o+"."+u):void 0;if(!/true|yes|1/.test(f.required)&&Fg.isN(p))continue;var v=h.length>0?[!0,zt(g,s+"."+o+"."+u)]:void 0;if((w=Ve(f.validations,h,v))[0]){if("helpText"==f.validations.errorselector){F=g.find(".help-block");g.removeClass("has-error"),g.addClass("has-success")}}else{a.addClass("faug-form-error");var y=w[1],b="";for(o=0;o<y.length;o++)if(y[o]){b+=y[o]+"<br/>";break}if("helpText"==f.validations.errorselector)(F=g.find(".help-block")).html(b),F.show(),g.addClass("has-error"),g.removeClass("has-success");1!=h.length||"text"!=h.attr("type")&&"number"!=h.attr("type")&&"url"!=h.attr("type")&&"email"!=h.attr("type")||h.val("")}}}else{h=$(document.getElementsByName(s+"['"+u+"']")),g=Ce(s+"['"+u+"']_cont");if(!r&&!g.is(":visible"))continue;if(f.validations){p=h.length>0?zt(g,s+"."+u):void 0;if(!/true|yes|1/.test(f.required)&&Fg.isN(p))continue;v=h.length>0?[!0,zt(g,s+"."+u)]:void 0;if((w=Ve(f.validations,h,v))[0]){if("helpText"==f.validations.errorselector){F=g.find(".help-block");g.removeClass("has-error"),g.addClass("has-success")}}else{a.addClass("faug-form-error");for(y=w[1],b="",o=0;o<y.length;o++)if(y[o]){b+=y[o]+"<br/>";break}if("helpText"==f.validations.errorselector)(F=g.find(".help-block")).html(b),F.show(),g.addClass("has-error"),g.removeClass("has-success");1!=h.length||"text"!=h.attr("type")&&"number"!=h.attr("type")&&"url"!=h.attr("type")&&"email"!=h.attr("type")||h.val("")}}}}}else{h=$(document.getElementsByName(s)),g=Ce(s+"_cont");if(r||g.is(":visible")){if(i.validations){var w;p=h.length>1?zt(g,s+"."+u):void 0;if(/true|yes|1/.test(i.required)||!Fg.isN(p))if((w=Ve(i.validations,h,v))[0]){if("helpText"==i.validations.errorselector){F=g.find(".help-block");g.removeClass("has-error"),g.addClass("has-success")}}else{a.addClass("faug-form-error");var F;for(y=w[1],b="",o=0;o<y.length;o++)if(y[o]){b+=y[o]+"<br/>";break}if("helpText"==i.validations.errorselector)(F=g.find(".help-block")).html(b),F.show(),g.addClass("has-error"),g.removeClass("has-success");1!=h.length||"text"!=h.attr("type")&&"number"!=h.attr("type")&&"url"!=h.attr("type")&&"email"!=h.attr("type")||h.val("")}}}else;}}return!a.hasClass("faug-form-error")};var Vt=this.validateElement;this.ve=this.validateElement,$.fn.serializeAnything=function(e,t,a){var r=!t||!1===t,i=[],n={},s=!0===a,o=s?$(this).find("[name]").get():$(this).find(":input").get();for(var l in $.each(o,(function(){if(("yes"===$(this).attr("faug-transient")&&r||!$(this).attr("faug-transient"))&&$(this).attr("name")&&(s||this.checked||/select|textarea/i.test(this.nodeName)||/text|number|email|url|hidden|file|password/i.test(this.type)||"DIV"==this.nodeName&&"true"===$(this).parent().attr("faug-read-only"))){var t=$(this);/select/i.test(this.nodeName)&&!0!==t.prop("multiple")&&(t=$(this.options[this.selectedIndex>-1?this.selectedIndex:0]));var a=t.val();if("true"===$(this).parent().attr("faug-read-only"))a=t.html();else if($(this).attr("faug-serialize-position")){var i=$(this).attr("faug-serialize-position");"text"==i?a=t.text():"html"==i?a=t.html():"value"!=i&&(a=t.attr(i));var o=t.attr("faug-serialize-function");if(o&&""!==o.trim()){var l=Je(o,[a,$(this)]);l.valid&&(a=l.result)}}var d=$(this).attr("name");if(d||"true"!==$(this).parent().attr("faug-read-only")||(d=$(this).attr("name")),void 0!==e&&""!=e){if(0!=d.indexOf(e))return;d=d.replace(e,"")}"["==d.charAt(0)&&"'"==d.charAt(1)&&(d=d.replace("['","").replace("']","")),void 0!==this.data&&(a=this.data),this.checked&&!0===t.prop("multiple")&&(Ne("Array",n[d])?n[d].push(a):a=[a]),n[d]||(n[d]=a)}})),n)n.hasOwnProperty(l)&&i.push({name:l,value:n[l]});return i},$.fn.serializeObject=function(e,t,a){for(var r=!t||!1===t,i=$(this).find("input[name],textarea[name],select[name]"),n={},s=0;s<i.length;s++){var o=i.eq(s),l=o.prop("tagName");if(("INPUT"!=l||!/radio|checkbox/i.test(o.attr("type"))||o[0].checked)&&("yes"===o.attr("faug-transient")&&r||!o.attr("faug-transient"))){var d=o.attr("name");e&&-1!=d.indexOf(e)&&(d=d.replace(e,"")),"SELECT"==l&&!0!==o.prop("multiple")&&(o=$(o[0].options[o[0].selectedIndex>-1?o[0].selectedIndex:0]));var u=o.val();if(o.length>0&&void 0!==o[0].data&&(u=o[0].data),o.attr("faug-serialize-position")){var c=o.attr("faug-serialize-position");"text"==c?u=o.text():"html"==c?u=o.html():"value"!=c&&(u=o.attr(c));var f=o.attr("faug-serialize-function");if(f&&""!==f.trim()){var m=Fg.execFunc(f,[u,o]);m.valid&&(u=m.result)}}var h=o.length>0&&o[0].checked&&!0===o.prop("multiple");if(""==u||null==u)continue;for(var g=d.split(/\[|\]/).filter((function(e){return e})),p=n,v=0;v<g.length-1;v++)-1!=g[v].indexOf("'")&&(g[v]=g[v].replace(/'/g,"")),isNaN(g[v+1])?p[g[v]]=p[g[v]]||{}:p[g[v]]=p[g[v]]||[],p=p[g[v]];-1!=g[g.length-1].indexOf("'")&&(g[g.length-1]=g[g.length-1].replace(/'/g,"")),isNaN(g[v])?h?Ne("Array",p[g[g.length-1]])?p[g[g.length-1]].push(u):p[g[g.length-1]]=[u]:p[g[g.length-1]]=u:h?Ne("Array",p[1*g[g.length-1]])?p[1*g[g.length-1]].push(u):p[1*g[g.length-1]]=[u]:p[1*g[g.length-1]]=u}}return n},$.fn.serializeAnyObject=function(e,t,a){var r={},i=this.serializeAnything(e,t,a);return $.each(i,(function(){var e=$(document.getElementsByName($(this).attr("name")));if(void 0!==r[$(this).attr("name")]){r[$(this).attr("name")].push||(r[$(this).attr("name")]=[r[$(this).attr("name")]]);var t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,r[$(this).attr("name")].push(t)):""!=t&&r[$(this).attr("name")].push(t)}else if(-1==$(this).attr("name").indexOf("[")){t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,r[$(this).attr("name")]=t):""!=t&&(r[$(this).attr("name")]=t)}else{var i=$(this).attr("name").replace(/]/g,"");if((i=i.split("[")).length>=2)for(var n=null,s=!1,o=1;o<i.length;o++)if(0==i[o].indexOf("'")&&i[o].length>2)if(s||(null==r[i[0]]&&(r[i[0]]={}),n=r[i[0]],s=!0),i[o]=i[o].substr(1,i[o].length-2),o==i.length-1){t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,n[i[o]]=t):""!=t&&(n[i[o]]=t)}else null==n[i[o]]&&(i.length>o+1&&0==i[o+1].indexOf("'")&&i[o+1].length>2?n[i[o]]={}:n[i[o]]=[]),n=n[i[o]];else if(s||(null==r[i[0]]&&(r[i[0]]=[]),n=r[i[0]],s=!0),o!=i.length-1||isNaN(i[o]))null==n[i[o]]&&(i.length>o+1&&0==i[o+1].indexOf("'")&&i[o+1].length>2?n[i[o]]={}:n[i[o]]=[]),n=n[i[o]];else{t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,n.splice(1*i[o],0,t)):""!=t&&n.splice(1*i[o],0,t)}else{t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,r[$(this).attr("name")]=t):""!=t&&(r[$(this).attr("name")]=t)}}1!=a||r.hasOwnProperty($(this).attr("name"))||(r[$(this).attr("name")]=$(this).attr("value"))})),!0!==a&&(Lt(r),Rt(r,e)),r},$.fn.serializeAttrs=function(e,t,a,r,i){for(var n=a?{}:[],s=r?$(this.find("*")):$(this),o=0;o<s.length;o++){for(var l=s[o].attributes,d=a?n:{},u=0;u<l.length;u++)if((!i||!/class|style|id|name|type|require|autocomplete/i.test(l[u].nodeName))&&(Pe(e)||l[u].nodeName.startsWith(e))){var c=Pe(e)?l[u].nodeName:l[u].nodeName.substring(e.length);nt(d,c,l[u].nodeValue,t)}a||n.push(d)}return n},$.fn.cleanVal=function(){return void 0===$(this).val()||null===$(this).val()||Ne("Array",$(this).val())?$(this).val():$("<div>").text($(this).val()).html()},this.cleanVal=function(e){return null==e?e:$("<div>").text(e).html()},this.fileDownload=function(e,t){if(t){var a=document.createElement("a"),r=document.createEvent("MouseEvents");a.href=e,a.download=e.slice(e.lastIndexOf("/")+1),r.initMouseEvent("click",!0,!1,self,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(r)}else{e="data:application/octet-stream,"+e;$("<iframe/>").attr("src",e).hide().appendTo("body")}};this.fileDownload;this.fld=this.fileDownload,this.uploadMultipartForm=function(e,t,a,r,i,n,s,o){var l=$(document.getElementById(s)),d=new FormData(document.getElementById(e)),u={url:t,method:"POST",type:"POST",data:d,cache:!1,contentType:!1,processData:!1,success:i,error:n,headers:a,xhr:function(){return myXhr=$.ajaxSettings.xhr(),d.fake&&(myXhr.send=xhr.sendAsBinary,u.contentType="multipart/form-data; boundary="+data.boundary,u.data=d.toString()),myXhr.upload&&l&&myXhr.upload.addEventListener("progress",function(e,t){return function(a){if(a.lengthComputable){var i=a.loaded/a.total,n=void 0;r&&r.callbacks&&r.callbacks.hanldeUpdateProgress&&(n=He(void 0,r.callbacks.hanldeUpdateProgress,t)),n&&n.valid&&!n.result||("progress"==e.prop("tagName").toLowerCase()?e.attr("value",100*i):e.css("width",100*i+"%"))}}}(l,o),!1),myXhr}};return $.ajax(u),!1};var Mt=this.uploadMultipartForm;function Rt(e,t){if("[object Array]"===Object.prototype.toString.call(e))for(var a=0;a<e.length;a++)null==t&&(t=""),Rt(e[a],t+"["+a+"]");else if("[object Object]"===Object.prototype.toString.call(e))for(var r in e){var i,n=e[r];if(null==w[(i=null!=t?t+"['"+r+"']":r)+"_dummymap"]||null==w[i+"_dummymap"].mtype||"map"!=w[i+"_dummymap"].mtype||"array"!=w[i+"_dummymap"].type&&"marray"!=w[i+"_dummymap"].type||"[object Array]"!==Object.prototype.toString.call(n))Rt(n,i);else{var s={};for(a=0;a<n.length;a++)Rt(n[a],i+"["+a+"]"),s[n[a].key]=n[a].value;e[r]=s}}}function Lt(e){if("object"!=typeof e)return!0;var t=!1;for(var a in e)e.hasOwnProperty(a)&&null!=e[a]&&(Lt(e[a])?t=!0:delete e[a]);return t}function Ut(e,t){return Ne("String",e)?(t&&'"'!=t?"'"==t&&(e=e.replace(/'/g,"\\'")):e=e.replace(/"/g,"&#34;"),e):e}function qt(e,t){return this.d=new Date,e&&(t?(this.d=Fg.parseDate(e,t),this.d||(this.d=new Date)):e?Fg.is("Date",e)?isNaN(e.getTime())||(this.d=new Date(e.getTime())):isNaN(e)||(this.d=new Date(parseInt(e))):this.d=new Date),this.elaspsedString=function(e,t,a,r,i){r=!0===r,i=!0===i;var n=!0,s=!0,o=!0,l=!0,d=!0,u=!0,c=!0,f=!0,m=!0,h=!0,g="ago",p="later",v=!1,y=!1;Fg.isN(t)||(n=!0===t.y,s=!0===t.m,o=!0===t.w,l=!0===t.d,d=!0===t.h,u=!0===t.mi,c=!0===t.s,f=!0===t.ms,m=!0===t.sd||!0===n||!0===s||!0===o||!0===l,h=!0===t.st||!0===d||!0===u||!0===c||!0===f,g=void 0===t.pastCode||""==t.pastCode.trim()?"ago":t.pastCode.trim(),p=void 0===t.futureCode||""==t.futureCode.trim()?"later":t.futureCode.trim(),v=!0===t.pastPrefix,y=!0===t.futurePrefix);var b=Fg.getDateUtil().diff(e,a||new Date),_=b.isNegative(),w=_?p:g,F=_?y:v;y===v&&(F=!1,w="");var x="";if(m){n&&Math.abs(b.years())>=1&&(x+=Math.abs(b.years()),x+=i?"y ":" years"),s&&Math.abs(b.months())>=1&&(x+=(r&&x.length>0?", ":"")+Math.abs(b.months()),x+=i?"m ":" months");var O=Math.abs(b.days());if(o&&Math.abs(b.weeks())>=1){var $=Math.floor(b.weeks());x+=(r&&x.length>0?", ":"")+$,x+=i?"w ":" weeks",O=7*(Math.abs(b.weeks())-$)}l&&O>=1&&(x+=(r&&x.length>0?", ":"")+Math.floor(O),x+=i?"d ":" days")}return h&&(d&&Math.abs(b.hours())>=1&&(x+=(r&&x.length>0?", ":"")+Math.abs(b.hours()),x+=i?"h ":" hrs"),u&&Math.abs(b.minutes())>=1&&(x+=(r&&x.length>0?", ":"")+Math.abs(b.minutes()),x+=i?m?"mi ":"m ":" mins"),c&&Math.abs(b.seconds())>=1&&(x+=(r&&x.length>0?", ":"")+Math.abs(b.seconds()),x+=i?"s ":" sec"),f&&Math.abs(b.milliseconds())>=1&&(x+=(r&&x.length>0?", ":"")+Math.abs(b.milliseconds()),x+=i?"ms ":" ms")),(F?w+" ":"")+x+(F?"":" "+w)},this.day=function(t){if(!t)return this.d.getDay();e.setDate(t)},this.month=function(t){if(!t)return this.d.getMonth();e.setMonth(t)},this.year=function(t){if(!t)return this.d.getFullYear();e.setFullYear(t)},this.hour=function(t){if(!t)return this.d.getHours();e.setHours(t)},this.minute=function(t){if(!t)return this.d.getMinutes();e.setMinutes(t)},this.second=function(t){if(!t)return this.d.getSeconds();e.setSeconds(t)},this.millisecond=function(t){if(!t)return this.d.getMilliseconds();e.setMilliseconds(t)},this.toDate=function(){return this.d},this.date=function(){return this.d},this.diff=function(e,t){var a=e,r=t;t||(t=e,e=this),e&&void 0!==e.toDate&&(a=e.toDate()),t&&void 0!==t.toDate&&(r=t.toDate());var i=!1,n=new Date(r-a);if(n.toISOString().slice(0,4)-1970<0){var s=r;r=a,a=s,n=new Date(r-a),i=!0}return new function(e,t){var i=e,n=0,s=0,o=0,l=0,d=0,u=0,c=0,f=e.getTime()/864e5;if(Ne("Date",i)&&!isNaN(i.getTime())){if(Math.abs(i.getTime())<864e5){var m=Math.abs(i.getTime());n=0,s=0,o=0,m-=36e5*(l=Math.floor(m/36e5)*(t?-1:1)),m-=6e4*(d=Math.floor(m/6e4)*(t?-1:1)),u=Math.floor(m/1e3)*(t?-1:1),c=m-1e3*u*(t?-1:1)}else 864e5==Math.abs(i.getTime())?(n=0,s=0,o=t?-1:1,l=0,d=0,u=0,c=0):(n=(i.toISOString().slice(0,4)-1970)*(t?-1:1),s=i.getMonth()*(i.getMonth()>0&&t?-1:1),o=i.getDate()*(i.getDate()>0&&t?-1:1),l=i.getHours()*(i.getHours()>0&&t?-1:1),d=i.getMinutes()*(i.getMinutes()>0&&t?-1:1),u=i.getSeconds()*(i.getSeconds()>0&&t?-1:1),c=i.getMilliseconds()*(i.getMilliseconds()>0&&t?-1:1),a.getYear()!=r.getYear()?(a.getDate()==r.getDate()&&(o=0),a.getMonth()==r.getMonth()&&(s=0)):a.getMonth()==r.getMonth()?(s=0,o=r.getDate()-a.getDate()):(s=r.getMonth()-a.getMonth(),r.getDate()<a.getDate()?(s-=1,o=a.getDate()-r.getDate()):o=r.getDate()-a.getDate()));t&&s>0&&(s=-s),t&&o>0&&(o=-o)}return this.isNegative=function(){return t},this.years=function(e){return!0===e?f/365:n},this.months=function(e){return!0===e?f/4380:s},this.weeks=function(e){return(!0===e?f/30660:o/7)*(t?-1:1)},this.days=function(e){return!0===e?f:o},this.hours=function(e){return!0===e?24*this.days(e):l},this.minutes=function(e){return!0===e?60*this.hours(e):d},this.seconds=function(e){return!0===e?60*this.minutes(e):u},this.milliseconds=function(e){return!0===e?1e3*this.seconds(e):c},this}(n,i)},this.add=function(e,t){e=parseInt(e);var a=0;switch(t){case"days":a=24*e,this.add(a,"hours");break;case"hours":a=60*e,this.add(a,"minutes");break;case"weeks":a=7*e,this.add(a,"days");break;case"minutes":a=60*e,this.add(a,"seconds");break;case"seconds":a=1e3*e,this.add(a,"milliseconds");break;case"months":(e+=this.d.getUTCMonth())/12>0&&(this.add(e/12,"years"),e%=12),this.d.setUTCMonth(e);break;case"milliseconds":this.d.setTime(this.d.getTime()+e);break;case"years":this.d.setFullYear(this.d.getUTCFullYear()+e);break;default:throw new Error("Invalid date increment passed")}return this},this.plus=function(e,t){return this.add(e,t),this},this.subtract=function(e,t){return this.add(-e,t),this},this.minus=function(e,t){return this.add(-e,t),this},this.format=function(e){return Fg.getDate(this.d,e)},this.startOfDay=function(){var e=new Date(this.d.getTime());return e.setHours(0,0,0,0),e},this.endOfDay=function(){var e=new Date(this.d.getTime());return e.setHours(23,59,59,999),e},this.calculateAge=function(e){var t,a=new Date;return a.setHours(0,0,0,0),e.setHours(0,0,0,0),((t={years:(t=diff(e,a)).years(),months:t.months(),days:t.days()}).years>0||0==t.months)&&1==t.days&&(t.days=0),t},this}this.umf=this.uploadMultipartForm,this.check=null,this.__check=function(){var e=!0;for(var t in this.base64Files)this.base64Files.hasOwnProperty(t)&&(e&=this.base64Files[t].status);e?clearTimeout(this.check):this.check=setTimeout(this.__check,500)},this.eventEnergize=function(e,t,a,r){c[e]&&He(c[e].crud[t].callbacks,a,[r])},this.evz=this.eventEnergize,this.convertDate=function(e){return Fg.getDate(new Date(e),N)},this.parseDate=function(e,a){return a||(a=N),t.parseDate(e,a)},this.getDateFromFmt=function(e,a,r){return r=r||N,e=t.parseDate(e,r),Fg.getDate(e,a)},this.gdff=this.getDateFromFmt,this.getDateUtil=function(e,t){return new qt(e,t)},this.date=this.getDateUtil,this.d=this.getDateUtil,this.dateDiff=function(e,t){return new qt(e).diff(t)},this.elapsedDuration=function(e,t,a){return new qt(e).diff(t).elaspsedString(a)},this.getDate=function(e,a){a||N||(a=N);var r=t.formatDate(e,a);return!a||-1==a.indexOf("HH:")&&-1==a.indexOf("mm:")||-1==r.indexOf(".")||(r=r.replace(/\./g,":")),r},this.gd=this.getDate,this.getDateTime=function(e){fmt||(fmt=N);var a=t.formatDate(e,C);return-1==fmt.indexOf("HH:")&&-1==fmt.indexOf("mm:")||-1==a.indexOf(".")||(a=a.replace(/\./g,":")),a},this.gdt=this.getDateTime,this.formatNumber=function(e){return isNaN(e)?e:(e*=1,t.formatNumber(e))},this.parseNumber=function(e){return t.parseNumber(e)},this.formatCurrency=function(e,a,r){return isNaN(e)?e:(e*=1,t.formatNumber(e,a||te,r))},this.getTime=function(e){fmt||(fmt=N);var a=t.formatDate(e,P);return-1==fmt.indexOf("HH:")&&-1==fmt.indexOf("mm:")||-1==a.indexOf(".")||(a=a.replace(/\./g,":")),a},this.gt=this.getTime;var Ht=function(e){var t=$("");return e&&(t=e.closest(".faug-valid-row")),t.data("data")};this.getFaugValidRowData=Ht,this.gfvrd=this.getFaugValidRowData,this.includeTemplate=function(e,t){var a=p[e].apply(null,[t]);return a||""};var Jt=this.includeTemplate;this.getModel=function(e){return this.ele=e,this.data=Ht(e),this.update=function(e,t,a){(a||this.ele).replaceWith(Jt(e,t))},this};this.getModel;this.gm=this.getModel;var Wt=void 0;this.routeTo=function(e,t){if(e&&""!=e.trim()){var a=document.location+"";if(0==e.indexOf("#")&&(e=e.substring(1)),-1!=a.indexOf("#")&&e){var r=a.substring(a.indexOf("#")+1);if(a=a.substring(0,a.indexOf("#")),a+="#"+e,r==e)return Qt(void 0),void(t&&t());document.location=a}else a+="#"+e,document.location=a;t&&(Wt=t)}};var Xt=this.routeTo;this.r=this.routeTo,this.getRoute=function(e){var t=document.location+"";return t=-1!=t.indexOf("#")?t.substring(t.indexOf("#")+1):"",!0===e?t:be&&-1!=t.indexOf(":")?t.substring(t.indexOf(":")+1):t};this.getRoute;this.gr=this.routeTo,this.getPrevRoute=function(e){var t=a;return t?(t=-1!=t.indexOf("#")?t.substring(t.indexOf("#")+1):"",!0===e?t:be&&-1!=t.indexOf(":")?t.substring(t.indexOf(":")+1):t):""},this.defaultRoute=function(){""!=D.defaultroute&&void 0!==D.defaultroute&&null!==D.defaultroute&&Xt(D.defaultroute)};var Gt=this.defaultRoute;this.df=this.defaultRoute,this.firstRoute=function(){""!=D.firstroute&&void 0!==D.firstroute&&null!==D.firstroute&&Xt(D.firstroute)};this.firstRoute;this.fr=this.firstRoute,this.prevRoute=function(){Xt(a)};this.prevRoute;this.pr=this.prevRoute,this.getUrlParameters=function(e){var t={};return(e=e||location.search).substr(1).split("&").forEach((function(e){var a=e.split("="),r=a[0],i=a[1]&&decodeURIComponent(a[1]);r in t?t[r].push(i):t[r]=[i]})),t};this.getUrlParameters;this.gup=this.getUrlParameters,this.getUrlParameterByName=function(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))};var Yt=this.getUrlParameterByName;this.gupbn=this.getUrlParameterByName,this.getCookies=function(){var e={};return document.cookie.split("&").forEach((function(t){var a=t.split("="),r=a[0],i=a[1]&&decodeURIComponent(a[1]);r in e?e[r].push(i):e[r]=[i]})),e};this.getCookies;this.gcs=this.getCookies,this.getCookie=function(e){var t=RegExp("[;]*"+e+"=([^;]*)").exec(document.cookie);return t&&decodeURIComponent(t[1].replace(/\+/g," "))};this.getCookie;this.gc=this.getCookie,this.getXPath=function(e){var t=[];if(e.attr("id"))return'//**[@id="'+e.attr("id")+'"]';for(var a=e.parents(),r=0;r<a.length;r++){if($(a[r]).attr("id")){t.push('*[@id="'+$(a[r]).attr("id")+'"]');break}if(r+1<a.length&&$(a[r+1]).children($(a[r]).prop("tagName")).length>1){var i=$(a[r+1]).children($(a[r]).prop("tagName")),n=-1;for(n=0;n<i.length&&$(i[n])[0]!=$(a[r])[0];n++);t.push($(a[r]).prop("tagName")+"["+(n+1)+"]")}else t.push($(a[r]).prop("tagName"))}if(e.parent()&&e.parent().children(e.prop("tagName")).length>1){i=e.parent().children(e.prop("tagName")),n=-1;for(n=0;n<i.length&&$(i[n])[0]!=e[0];n++);t.unshift(e.prop("tagName")+"["+(n+1)+"]")}else t.unshift(e.prop("tagName"));return t.reverse(),"//"+t.join("/")},this.handleRoute=function(e,t){t||(t=!1);var a,r=document.location+"",n=(r=-1!=r.indexOf("#")?r.substring(r.indexOf("#")+1):"").split("/"),s={},o=void 0,l=D.routes[n[0]];if(Ne("Array",l)){for(var d,u,c=0;c<l.length;c++){var f=D.fragments[n[0]][c];if(void 0===d&&(d=f.length,u=c,s={},a=void 0,o=void 0),f.length<d&&(d=f.length,u=c,s={},a=void 0,o=void 0),p=f.length==n.length-1)for(var m=1;m<f.length+1;m++){var h=n[m];-1!=(g=f[m-1]).indexOf("a:")?s[g.substring(g.indexOf("a:")+2)]=decodeURI(n[m]):p&=g=="v:"+h}if(p){a=l[c],o=n[0];break}}a||(a=l[u],o=n[0])}else if(l){if(a=l,o=n[0],(f=D.fragments[n[0]]).length>0&&n.length>1)for(c=1;c<f.length+1;c++){var g;h=n.length>c?n[c]:void 0;if(-1!=(g=f[c-1]).indexOf("a:"))s[g.substring(g.indexOf("a:")+2)]=decodeURI(n[c]);else var p=g=="v:"+h}}return a&&(!1===a.secure||Pe(D.secure)||!1===D.secure||!0===D.secure&&!Pe(b))?(t||(F[G]=s,i=o,D.process&&window[D.process]?Fg.execFunc(D.process,[Me(a),e],!0):Me(a)(e)),[!0,a.secure]):(t||(i=o,Gt()),[!1,void 0])};var Qt=this.handleRoute;this.hr=this.handleRoute,this.handleRouteEvent=function(e){K=void 0,a=r,r=location.hash,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,location.hash,e])};this.handleRouteEvent;this.hre=this.handleRouteEvent,this.loadLocale=function(e,a){t.reInitIntlLib(e,a)};this.loadLocale;function Kt(e,t){if("string"==typeof t){for(var a=t,r=0;-1!=a.indexOf("%%Fg.g(",r);){var i=a.indexOf("%%Fg.g(",r);if(i>=0){var n=a.indexOf(")",i+7),s=a.substring(i+7,n);void 0!==F[s]&&""!=F[s]&&(a=a.substring(0,i)+F[s]+a.substring(n+1))}r=i+1}for(r=0;-1!=a.indexOf("%%Fg.t(",r);){if((i=a.indexOf("%%Fg.t(",r))>=0){n=a.indexOf(")",i+7),s=a.substring(i+7,n);a=a.substring(0,i)+Fg.t(s)+a.substring(n+1)}r=i+1}return a}return t}function Zt(e,t,a,r){if(t.compressedSchemas&&Ne("String",t.compressedSchemas)&&""!=t.compressedSchemas.trim()&&t.compressedSchemaHtmlTemplates&&Ne("String",t.compressedSchemaHtmlTemplates)&&""!=t.compressedSchemaHtmlTemplates.trim()||t.compressedCompiledSchemaHtmlTemplates&&Ne("String",t.compressedCompiledSchemaHtmlTemplates)&&""!=t.compressedCompiledSchemaHtmlTemplates.trim()){try{var i=JSON.parse(t.compressedSchemas);if(a&&a.schemas)for(var n in i)i.hasOwnProperty(n)&&a.schemas[n]&&(i[n].details.name=a.schemas[n],i[a.schemas[n]]=i[n],delete i[n]);for(var n in i)if(i.hasOwnProperty(n)){var s=JSON.stringify(i[n],Kt);try{s=JSON.parse(s);try{gt(s,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+n+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+n+", error = "+e)}}}catch(e){console.log("Problem parsing compressed schema"),c={}}if(t.compressedCompiledSchemaHtmlTemplates)try{var o=JSON.parse(t.compressedCompiledSchemaHtmlTemplates);for(var l in o)if(!(l in p)){s=o[l];Ne("String",s)?p[l]=new Function("arg",s):p[l]=s[0]}}catch(e){console.log("Problem parsing compressedCompiledSchemaHtmlTemplates")}else try{o=JSON.parse(t.compressedSchemaHtmlTemplates);for(var l in o)if(o.hasOwnProperty(l)&&!(l in p)){var d=o[l][0];0==(u=o[l][1])?_t(l,d,{rows:null,options:null}):1==u||2==u?_t(l,d,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==u?_t(l,d,o[l][2]):4==u&&_t(l,d,o[l][2],4)}}catch(e){console.log("Problem parsing compressed schema HTML templates")}}if(t.compressedSchemas&&Ne("String",t.compressedSchemas)&&""!=t.compressedSchemas.trim())try{i=JSON.parse(t.compressedSchemas);if(a&&a.schemas)for(var n in i)i.hasOwnProperty(n)&&a.schemas[n]&&(i[n].details.name=a.schemas[n],i[a.schemas[n]]=i[n],delete i[n]);for(var n in i)if(i.hasOwnProperty(n))try{s=JSON.stringify(i[n],Kt);s=JSON.parse(s);try{gt(s,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+n+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+n+", error = "+e)}c=mergeVars(c,i)}catch(e){console.log("Problem parsing compressed schema"),c={}}if(t.compressedSchemaHtmlTemplates&&Ne("String",t.compressedSchemaHtmlTemplates)&&""!=t.compressedSchemaHtmlTemplates.trim()||t.compressedCompiledSchemaHtmlTemplates&&Ne("String",t.compressedCompiledSchemaHtmlTemplates)&&""!=t.compressedCompiledSchemaHtmlTemplates.trim())if(t.compressedCompiledSchemaHtmlTemplates)try{o=JSON.parse(t.compressedCompiledSchemaHtmlTemplates);for(var l in o)if(!(l in p)){s=o[l];Ne("String",s)?p[l]=new Function("arg",s):p[l]=s[0]}}catch(e){console.log("Problem parsing compressedCompiledSchemaHtmlTemplates")}else try{o=JSON.parse(t.compressedSchemaHtmlTemplates);for(var l in o)if(o.hasOwnProperty(l)&&!(l in p)){var u;d=o[l][0];0==(u=o[l][1])?_t(l,d,{rows:null,options:null}):1==u||2==u?_t(l,d,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==u?_t(l,d,o[l][2]):4==u&&_t(l,d,o[l][2],4)}}catch(e){console.log("Problem parsing compressed schema HTML templates")}var f;if(t.schemas||t.templates){if(!ae&&t.schemas&&Ne("Object",t.schemas))for(var m in f=[],t.schemas)t.schemas.hasOwnProperty(m)&&f.push(t.schemas[m]);if(t.lazySchemas&&Ne("Object",t.schemas))for(var m in t.lazySchemas)t.lazySchemas.hasOwnProperty(m)&&(R[m]=t.lazySchemas[m]);!ae&&t.templates&&Ne("Array",t.templates)&&t.templates.length>0&&(o=t.templates)}if(f&&f.length>0){var h=function(e,t,a,r){if(t)try{var i=JSON.parse(a.responseText);try{var n=JSON.stringify(i,Kt);i=JSON.parse(n)}catch(e){e+=" ("+r[0]+")",console.log("Problem templatizing schema "+e)}var s=gt(i,!1,!1,!1,!1,!1,!1);o=o.concat(s)}catch(e){e+=" ("+r[0]+")",console.log("Problem parsing schema "+e)}};Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(f,h).done((function(){if(Fg.freezeUI(!1),a&&a.schemas)for(var e in c)c.hasOwnProperty(e)&&a.schemas[e]&&(c[e].details.name=a.schemas[e],c[a.schemas[e]]=c[e],delete c[e]);if(o.length>0){for(var t=[],i=0;i<o.length;i++){var n=o[i],s={rows:null,options:null,row:null},l=0;Ne("Array",o[i])&&("html"==o[i][1]?(n=o[i][0],l=o[i][3]):(n=o[i][0],s=o[i][1],l=o[i].length>2?o[i][2]:0,Fg.isN(o[i][1])||(l=3))),t.push([n,"html",!0,l,s])}Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(t,(function(e,t,a,r){if(t){var i=r[0],n=a.responseText,s=r[3],o=r[4];0==s?_t(i,n,{rows:null,options:null}):1==s||2==s?_t(i,n,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==s?_t(i,n,o):4==s&&_t(i,n,o,4)}})).done((function(){Fg.freezeUI(!1),r()})).fail((function(){Fg.freezeUI(!1)}))}else r()})).fail((function(){Fg.freezeUI(!1)}))}else if(o&&o.length>0){for(var g=[],v=0;v<o.length;v++){var y=o[v],b={rows:null,options:null,row:null},_=0;Ne("Array",o[v])&&("html"==o[v][1]?(y=o[v][0],_=o[v][3]):(y=o[v][0],b=o[v][1],_=o[v].length>2?o[v][2]:0,Fg.isN(o[v][1])||(_=3))),g.push([y,"html",!0,_,b])}h=function(e,t,a,r){if(t){var i=r[0],n=a.responseText,s=r[3],o=r[4];0==s?_t(i,n,{rows:null,options:null}):1==s||2==s?_t(i,n,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==s?_t(i,n,o):4==s&&_t(i,n,o,4)}};Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(g,h).done((function(){Fg.freezeUI(!1),r()})).fail((function(){Fg.freezeUI(!1)}))}else r()}this.extension=function(){return t},this.registerComponent=function(e,t){if(!e)throw"No name defined for component";if(!t)throw"No component defined";if(t.init&&"function"!=typeof t.init)throw"Init method should be a function if defined";if(t.type&&(!Ne("String",t.type)||!/schema|viewer|general/.test(t.type)))throw"Type should be one of schema, viewer or general";if("function"!=typeof t.use)throw"No use method defined for component";if(t.destroy&&"function"!=typeof t.destroy)throw"Destroy method should be a function if defined";de[e]=t},this.initLib=function(){var e=[];(t=new FaugExtensionFactory(Faug)).registerLocale("en");var a=t.getDateLib();if(Ne("String",a)&&""!=a.trim()&&e.push([a.trim()]),Ne("Array",a)&&a.length>0)for(var r=0;r<a.length;r++)Ne("String",a[r])&&""!=a[r].trim()&&e.push([a[r].trim()]);Fg.freezeUI(!0),$.fetchMultipleFilesMT(e).done((function(){Fg.freezeUI(!1),t.registerCurrency("USD"),t.initDateLib(),t.initDateTimePickerLib(),t.initNumCurrLib(),t.initUnitLib(),t.initDialogLib(),t.initIntlLib(Z),t.initTemplateEngineLib(),t.initDomDiff()})).fail((function(e){Fg.freezeUI(!1),alert("Problem loading required files")}))};var ea=[];if(this.initRouter=function(i){var n=(t=new FaugExtensionFactory(Faug)).getDateFormats();n.dateformat&&(N=n.dateformat),n.datetimeformat&&(C=n.datetimeformat),n.timeformat&&(P=n.timeformat),n.timestampformat&&(j=n.timestampformat);var s=void 0;if(i){i.dependencies&&Ae(i.dependencies.list,i.dependencies.override),i.settings&&(i.settings.debugEnabled&&(x=i.settings.debugEnabled),i.settings.crudcreatename&&(k=i.settings.crudcreatename),i.settings.crudreadname&&i.settings.crudreadname,i.settings.crudupdatename&&(T=i.settings.crudupdatename),i.settings.cruddeletename&&(S=i.settings.cruddeletename),i.settings.crudreadallname&&(A=i.settings.crudreadallname),i.settings.dateformat&&(N=i.settings.dateformat),i.settings.datetimeformat&&(C=i.settings.datetimeformat),i.settings.timeformat&&(P=i.settings.timeformat),i.settings.timestampformat&&(j=i.settings.timestampformat),i.settings.honourLocale&&(I=i.settings.honourLocale),i.settings.freezeLoaderId&&(B=i.settings.freezeLoaderId),i.settings.freezeLoaderHtml&&(E=i.settings.freezeLoaderHtml),i.settings.initialLoaderScreen&&(M=i.settings.initialLoaderScreen),i.settings.numApiWebWorkers&&(J=i.settings.numApiWebWorkers),i.settings.defaultLanguage&&(Y=i.settings.defaultLanguage),i.settings.schemaIntlEnabled&&(ee=i.settings.schemaIntlEnabled),i.settings.defCurrency&&(te=i.settings.defCurrency),i.settings.baseUrl&&(ie=i.settings.baseUrl),i.settings.crossDomain&&(ne=i.settings.crossDomain),i.settings.prefilterRegex&&(se=i.settings.prefilterRegex),i.settings.isRecord&&(le=i.settings.isRecord),i.settings.recordSilently&&i.settings.recordSilently,i.settings.lazyLoad&&(ae=i.settings.lazyLoad),i.settings.disableContextMenu&&(he=i.settings.disableContextMenu),i.settings.layerFile&&(s=i.settings.layerFile),i.settings.disableBackForwardButton&&(ge=i.settings.disableBackForwardButton),i.settings.disableBackForwardButtonCompletely&&(pe=i.settings.disableBackForwardButtonCompletely),i.settings.generateCorrelationId&&(oe=i.settings.generateCorrelationId),i.settings.enableRouteModules&&(be=i.settings.enableRouteModules),i.settings.compressedModuleFiles&&(ce=i.settings.compressedModuleFiles)),!0===ge&&(!0===pe?(window.history.pushState(null,null,document.URL),window.addEventListener("popstate",(function(){window.history.pushState(null,null,document.URL)}))):window.onbeforeunload=function(){return"Do you really want to navigate away from the application?"}),i.globals&&(F=mergeVars(F,i.globals)),i.router&&(D=i.router),i.intlmap&&Object.keys(i.intlmap).length>0&&(Z=i.intlmap),i.overrides&&Ne("Object",i.overrides)&&(me=i.overrides);var u=!0===window.onlyFaugCore?[]:Se;!0===i.compressedScript&&(u=[])}!0!==window.onlyFaugCore||isNaN(window.numApiWebWorkers)||(J=window.numApiWebWorkers),void 0!==ta&&J>0?o=new ta("w-api-call.js",J,"ApiWorkerPool",(function(e,t){t&&St(!1)})):J=0;var f=D.routes;for(var m in D.fragments={},D.aliases)if(D.aliases.hasOwnProperty(m)&&Ne("Array",D.aliases[m]))for(var h=0;h<D.aliases[m].length;h++)f[D.aliases[m][h]]=f[m];for(var m in f)if(f.hasOwnProperty(m)){var g=f[m];if(!0===g.isTemplate&&Ne("Array",g.options)&&g.options.length>0&&Ne("Object",g.routes)){var v=g.routes,y=g.options;for(var _ in v)if(v.hasOwnProperty(_)){var w=v[_].props;for(h=0;h<y.length;h++){var O=Fg.copy(v[_]);O.props=void 0;var z={};if(Ne("Array",y[h]))for(var V=0;V<y[h].length;V++)z["arg"+(V+1)]=y[h][V];else z={arg1:y[h]};var L=Fg.templatize(_,z,!0,void 0,!1);if(Ne("Array",w)&&w.length>0)for(V=0;V<w.length;V++){var U=it(O,w[V]);Ne("String",U)&&(U=Fg.templatize(U,z,!0,void 0,!1),nt(O,w[V],U))}f[L]=O}}delete f[m]}}for(var m in f)if(f.hasOwnProperty(m)){var q=m.split("/"),H=[];for(h=1;h<q.length;h++){var W;q[h]=q[h].trim(),0==q[h].indexOf(":")&&q[h].length>1?(W="a:"+q[h].substring(1),H.push(W)):q[h].length>1&&(W="v:"+q[h],H.push(W))}if(f[q[0]]&&q[0]!==m){var X=f[m];delete f[m],Ne("Array",f[q[0]])?(f[q[0]].push(X),D.fragments[q[0]].push(H)):(f[q[0]]=[f[q[0]],X],D.fragments[q[0]]=[D.fragments[q[0]],H])}else{X=f[m];delete f[m],f[q[0]]=X,D.fragments[q[0]]=H}}if(!0!==i.compressedScript){var G=t.getDateLib(I);if(Ne("String",G)&&""!=G.trim()&&u.push([G.trim()]),Ne("Array",G)&&G.length>0)for(h=0;h<G.length;h++)Ne("String",G[h])&&""!=G[h].trim()&&u.push([G[h].trim()]);var Q=t.getNumCurrLib();if(Ne("String",Q)&&""!=Q.trim()&&u.push([Q.trim()]),Ne("Array",Q)&&Q.length>0)for(h=0;h<Q.length;h++)Ne("String",Q[h])&&""!=Q[h].trim()&&u.push([Q[h].trim()]);var K=t.getUnitLib();if(Ne("String",K)&&""!=K.trim()&&u.push([K.trim()]),Ne("Array",K)&&K.length>0)for(h=0;h<K.length;h++)Ne("String",K[h])&&""!=K[h].trim()&&u.push([K[h].trim()]);var de=t.getDateTimePickerLib();if(Ne("String",de)&&""!=de.trim()&&u.push([de.trim()]),Ne("Array",de)&&de.length>0)for(h=0;h<de.length;h++)Ne("String",de[h])&&""!=de[h].trim()&&u.push([de[h].trim()]);var ue=t.getDialogLib();if(Ne("String",ue)&&""!=ue.trim()&&u.push([ue.trim()]),Ne("Array",ue)&&ue.length>0)for(h=0;h<ue.length;h++)Ne("String",ue[h])&&""!=ue[h].trim()&&u.push([ue[h].trim()]);var fe=t.getIntlLib();if(Ne("String",fe)&&""!=fe.trim()&&u.push([fe.trim()]),Ne("Array",fe)&&fe.length>0)for(h=0;h<fe.length;h++)Ne("String",fe[h])&&""!=fe[h].trim()&&u.push([fe[h].trim()]);var ve=t.getTemplateEngineLib();if(Ne("String",ve)&&""!=ve.trim()&&u.push([ve.trim()]),Ne("Array",ve)&&ve.length>0)for(h=0;h<ve.length;h++)Ne("String",ve[h])&&""!=ve[h].trim()&&u.push([ve[h].trim()]);var ye=t.getDomDiffLib();if(Ne("String",ye)&&""!=ye.trim()&&u.push([ye.trim()]),Ne("Array",ye)&&ye.length>0)for(h=0;h<ye.length;h++)Ne("String",ye[h])&&""!=ye[h].trim()&&u.push([ye[h].trim()]);if(i.modules&&i.modules.length>0){!0;for(h=0;h<i.modules.length;h++)if(Ne("String",i.modules[h])&&""!=i.modules[h].trim()&&u.push([i.modules[h].trim()]),Ne("Array",i.modules[h])&&i.modules[h].length>0)for(V=0;V<i.modules[h].length;V++)Ne("String",i.modules[h][V])&&""!=i.modules[h][V].trim()&&u.push([i.modules[h][V].trim()])}if(!Y){var Te=$("html").attr("lang");void 0!==Te&&""!=Te.trim()&&(Y=Te)}Y||(Y="en");var Ce=$("html").attr("data-faug-module");if(void 0!==Ce&&""!=Ce.trim()){!0;var Pe=Ce.split(",");for(h=0;h<Pe.length;h++)Ne("String",Pe[h])&&""!=Pe[h].trim()&&u.push([Pe[h].trim()+".js"])}}if(!0===window.onlyFaugCore)return Faug.execFunc("onBeforeInit",[]),void Faug.init();var je=$("html").attr("data-route-modules");void 0!==je&&/true|1|yes|y|no|false|0/.test(je.toLowerCase())&&(be=/true|1|yes|y/.test(je.toLowerCase())),Fg.isN(ie)||0!=ie.toLowerCase().indexOf("http://")&&0!=ie.toLowerCase().indexOf("https://")||Fg.isN(se)||!(se.length>0)?(se=void 0,ie="",$.ajaxPrefilter((function(e){Faug.execFunc("onBeforeAjaxCall",[e]),!0===ne&&(e.crossDomain=ne)}))):(se=new RegExp(se),$.ajaxPrefilter((function(e){Faug.execFunc("onBeforeAjaxCall",[e]),!Fg.isN(ie)&&se.test(e.url)&&0!=e.url.indexOf(ie)&&(0==e.url.indexOf("/")?e.url=ie+e.url:e.url=ie+"/"+e.url),!0===ne&&(e.crossDomain=ne)})));var De=function(a,r){if(a&&a.length>0)for(var i=0;i<a.length;i++)if("_schema_config_"==a[i][3][1])try{c={};var n=JSON.parse(a[i][2].responseText);for(var s in n=JSON.parse(n.data))if(n.hasOwnProperty(s)){var o=JSON.stringify(n[s],Kt);try{o=JSON.parse(o);try{gt(o,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+s+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+s+", error = "+e)}}if(me&&me.schemas)for(var s in c)c.hasOwnProperty(s)&&me.schemas[s]&&(c[s].details.name=me.schemas[s],c[me.schemas[s]]=c[s],delete c[s])}catch(e){console.log("Problem parsing compressed schema"),c={}}else if("_tmpl_config_"==a[i][3][1])try{var l=JSON.parse(a[i][2].responseText);for(var d in l=JSON.parse(l.data)){o=l[d];Ne("String",o)?p[d]=new Function("arg",o):p[d]=o[0]}}catch(e){console.log("Problem parsing _tmpl_config_"),c={}}else $.globalEval(a[i][2].responseText);if(ae){R=mergeVars(r.lazySchemas,r.schemas),e={};for(i=0;i<r.templates.length;i++){var u=r.templates[i];Ne("Array",r.templates[i])&&(u=r.templates[i][0]),e[u]=r.templates[i]}}if(Faug.execFunc("onBeforeInit",[]),rt){Zt(0,r,me,h=function(){var e=Faug.handleRoute(void 0,!0);!1!==e[1]||r.router.firstroute===Faug.getRoute()?(Faug.init(),Faug.firstRoute()):0==e[1]&&Faug.handleRoute(void 0)})}else{var f=Yt("flocale");f&&""!=f.trim()&&(Y=f);var m=Y,h=function(){var e=Faug.handleRoute(void 0,!0);!1!==e[1]||r.router.firstroute===Faug.getRoute()?(Faug.init(),Faug.firstRoute()):0==e[1]&&Faug.handleRoute(void 0)},g=function(e,t,a){return function(){Zt(0,e,t,a)}},v=t.setInitCompleteCb(g(r,me,h));t.registerLocale(m),t.registerCurrency(te),t.initDateLib(),t.initDateTimePickerLib(),t.initNumCurrLib(),t.initUnitLib(),t.initDialogLib(),t.initIntlLib(Z),t.initTemplateEngineLib(),t.initDomDiff(),v||g(r,me,h)}};$(window).on("hashchange",(function(e){if(re={},Faug.execFunc("onBeforeRouteChange",[a,location.hash,e,!1]),be){var t=location.hash.substring(1,location.hash.indexOf(":"));if(""!=t&&-1==ea.indexOf(t))return ea.push(t),void function(e,t){if(ce)$.fetchMultipleFilesRawMT([["fjs-config_"+e+"_s.json","json",!0],["fjs-config_"+e+"_t.json","json",!0]]).done((function(e){if(0==e[0][0])try{var a=JSON.parse(e[0][2].responseText);for(var r in a=JSON.parse(a.data))if(a.hasOwnProperty(r)){var i=JSON.stringify(a[r],Kt);try{i=JSON.parse(i);try{gt(i,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+r+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+r+", error = "+e)}}if(me&&me.schemas)for(var r in c)c.hasOwnProperty(r)&&c.schemas[r]&&(c[r].details.name=c.schemas[r],c[me.schemas[r]]=c[r],delete c[r])}catch(e){console.log("Problem parsing compressed schema"),c={}}if(1==e[1][0])try{var n=JSON.parse(e[1][2].responseText);for(var s in n=JSON.parse(n.data))s in p||(i=n[s],Ne("String",i)?p[s]=new Function("arg",i):p[s]=i[0])}catch(e){console.log("Problem parsing templates"),c={}}t()})).fail((function(e){alert("Problem loading compressed module files")}));else{var a="",r={};b&&("queryparam"==b.aTokenWhere?a="?"+b.aTokenName+"="+b.aTokenValue:"header"!=b.aTokenWhere||r.hasOwnProperty(b.aTokenName)||(r[b.aTokenName]=b.aTokenValue)),$.fetchMultipleFilesRawMT([["fjs-config_"+e+".json"+a]]).done(function(e,t){return function(e){Zt(0,e[0][2].responseJSON,void 0,t)}}(0,t)).fail((function(e){alert("Problem loading module files")}))}}(t,function(e,t){return function(){a=r,r=t,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,t,e]),Wt&&(Wt(),Wt=void 0)}}(e,location.hash));a=r,r=location.hash,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,location.hash,e])}else a=r,r=location.hash,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,location.hash,e]);Wt&&(Wt(),Wt=void 0)})),Faug.getProperty("initialLoaderScreen")&&Faug.freezeUI(!1),!0===i.compressedSchemasFile&&(delete i.compressedSchemas,delete i.schemas,u.push(["fjs-config_s.json","_schema_config_"])),!0===i.compressedCompiledSchemaHtmlTemplatesFile&&(delete i.compressedCompiledSchemaHtmlTemplates,delete i.templates,u.push(["fjs-config_t.json","_tmpl_config_"])),Ne("String",s)&&-1!=s.indexOf(".json")?(Fg.freezeUI(!0),$.fetchMultipleFilesRawMT([[s]]).done((function(e){Fg.freezeUI(!1),e=e[0][2].responseJSON,Fg.setProperty("cdfs",e),e.table.search&&e.table.search.regex&&(xe=new RegExp(e.table.search.regex),e.table.search.errorFunc&&(Oe=e.table.search.errorFunc)),e.search&&e.search.regex&&(_e=e.search.selector,we=new RegExp(e.search.regex),e.search.errorFunc&&(Fe=e.search.errorFunc)),e.input&&e.input.regex&&($e=new RegExp(e.input.regex),ke=e.input.errorFunc,$e&&ke&&$(document).on("input","input,textarea",(function(e){if("1"!=$(this).attr("data-rgo"))if($(this).attr("data-regex")&&ke){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!new RegExp($(this).attr("data-regex")).test($(this).val()))return Fg.execFunc(ke,[$(this)]),e.stopPropagation(),!1}else if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!$e.test($(this).val()))return Fg.execFunc(ke,[$(this)]),e.stopPropagation(),!1}))),e.form.file&&e.form.file.maxSizeMb&&e.form.file.errorFunc&&(l=e.form.file.maxSizeMb,d=e.form.file.errorFunc),0==u.length?De(void 0,i):$.fetchMultipleFilesRawMT(u).done(function(e){return function(t){De(t,e)}}(i)).fail((function(e){Faug.getProperty("initialLoaderScreen")&&Faug.freezeUI(!1),alert("Problem loading required files")}))})).fail((function(e){Faug.freezeUI(!1),alert("Problem loading Faug layer file")}))):0==u.length?De(void 0,i):$.fetchMultipleFilesRawMT(u).done(function(e){return function(t){De(t,e)}}(i)).fail((function(e){Faug.getProperty("initialLoaderScreen")&&Faug.freezeUI(!1),alert("Problem loading required files")}))},this.FetchFilesPromise=function(e,t){var a,r,i=[],n=e?e.length:0,s=void 0,o=void 0,l=[],d=[];function u(e,t,a,r,i,n,s){if(t&&0!=t.length)for(var o=0;o<t.length;o++){var l=t[o],d=!(l.length>2)||l[2],u=u||{};if(b&&l[0].startsWith("fjs-config")&&l[0].endsWith(".json"))if("queryparam"==b.aTokenWhere)-1==(f=l[0]).indexOf("?")?f+="?"+b.aTokenName+"="+b.aTokenValue:"?"==f[f.length-1]?f+=b.aTokenName+"="+b.aTokenValue:f+="&"+b.aTokenName+"="+b.aTokenValue,l[0]=f;else"header"!=b.aTokenWhere||u.hasOwnProperty(b.aTokenName)||(u[b.aTokenName]=b.aTokenValue);if(Ne("String",oe)){var c=Fg.execFunc(oe,[l[0],"GET"]);if(c.valid&&c.result){var f=l[0];u["X-Correlation-Id"]=c.result,-1==f.indexOf("?")?f+="?X_Correlation_Id="+c.result:"?"==f[f.length-1]?f+="X_Correlation_Id="+c.result:f+="&X_Correlation_Id="+c.result,l[0]=f}}Fg.freezeUI(!0),$.ajax({type:"GET",url:l[0],dataType:"text",headers:u,success:function(t,a,r,i,n,s,o){return function(o,l,d){Fg.freezeUI(!1),i.push([r,!0,d,t]),a&&a(r,!0,d,t),n==i.length&&(i.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(l,a,o,r,i,n,0),error:function(t,a,r,i,n,s,o){return function(o,l,d){Fg.freezeUI(!1),i.push([r,!1,o,t,l,d]),s.push(1),a&&a(r,!1,o,t,l,d),n==i.length&&(i.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(l,a,o,r,i,n,0),cache:d,async:!0})}}Ne("Array",e)&&!Ne("Array",e[0])&&(e=[e],n=1),this.repeat=function(e,t,i,n,s){return r[0]=i?1*i:-1,r[1]=0,a=setInterval(function(e,t,a,r,i){return function(){e.push(t).proceed(undefined,i),a[0]>0&&(a[1]=a[1]+1,a[0]==a[1]&&e.stop())}}(this,e,n,0,s),t),this},this.stop=function(){return a&&clearInterval(a),this},this.schedule=function(e,t,a,r,i){var n=t;return a&&(t=Fg.getDateUtil(t,a).date().getTime(),n=(new Date).getTime()-t),setTimeout(function(e,t,a,r){return function(){e.push(t).proceed(a,r)}}(this,e,r,i),n),this},this.push=function(e){return d.push(e),this},this.proceed=function(e,t){return d.length>0&&(n=d.length,u(this,d,e,i,n,l,!0===t)),d=[],this},this.done=function(e){return s?(s(i),this):(s=e,this)},this.fail=function(e){return o?(o(i),this):(o=e,this)},u(this,e,t,i,n,l)},this.ApisPromise=function(e,t,a,r){var i,n,s=[],o=e?e.length:0,l=void 0,d=void 0,u=[],c=!0===a,f=[];function m(e,t,a,r,i,n,s,o){if(t&&0!=t.length)for(var l=0;l<t.length;l++){var d=t[l];d[0]&&Fg.freezeUI(!0);var u=d.length>5?d[5]:{};if(b)if("queryparam"==b.aTokenWhere)-1==(f=d[2]).indexOf("?")?f+="?"+b.aTokenName+"="+b.aTokenValue:"?"==f[f.length-1]?f+=b.aTokenName+"="+b.aTokenValue:f+="&"+b.aTokenName+"="+b.aTokenValue,d[2]=f;else"header"!=b.aTokenWhere||u.hasOwnProperty(b.aTokenName)||(u[b.aTokenName]=b.aTokenValue);if(Ne("String",oe)){var c=Fg.execFunc(oe,[d[2],d[1]]);if(c.valid&&c.result){var f=d[2];u["X-Correlation-Id"]=c.result,-1==f.indexOf("?")?f+="?X_Correlation_Id="+c.result:"?"==f[f.length-1]?f+="X_Correlation_Id="+c.result:f+="&X_Correlation_Id="+c.result,d[2]=f}}/get/i.test(d[1])&&(content=void 0,d.length>3&&(d[3]=void 0),d.length>4&&(d[4]=void 0)),$.ajax({headers:u,type:d[1],processData:!1,url:d[2],contentType:d.length>3?d[3]:void 0,data:d.length>4?d[4]:void 0,success:function(t,a,r,i,n,s,o,l){return function(d,u,c){t[0]&&Fg.freezeUI(!1),i.push(o?[r,!0,l?c.responseJSON?c.responseJSON:c.responseText:c]:1),a&&a(r,!0,l?c.responseJSON?c.responseJSON:c.responseText:c),n==i.length&&(o&&i.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(d,a,l,r,i,n,s,o),error:function(t,a,r,i,n,s,o){return function(l,d,u){t[0]&&Fg.freezeUI(!1),i.push(o?[r,!1,l,d,u]:0),s.push(1),a&&a(r,!1,l,d,u),n==i.length&&(o&&i.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(d,a,l,r,i,n,s)})}}Ne("Array",e)&&!Ne("Array",e[0])&&(e=[e],o=1),this.repeat=function(e,t,a,r,s){n[0]=a?1*a:-1,n[1]=0,i=setInterval(function(e,t,a,r,i){return function(){e.push(t).proceed(undefined,i),a[0]>0&&(a[1]=a[1]+1,a[0]==a[1]&&e.stop())}}(this,e,r,0,s),t)},this.stop=function(){i&&clearInterval(i)},this.schedule=function(e,t,a,r,i){var n=t;a&&(n=(t=Fg.getDateUtil(t,a).date().getTime())-(new Date).getTime()),n<=0&&(n=0),setTimeout(function(e,t,a,r){return function(){e.push(t).proceed(a,r)}}(this,e,r,i),n)},this.push=function(e){return f.push(e),this},this.proceed=function(e,t,a){return f.length>0&&(o=f.length,m(this,f,e,s,o,u,c=!0===t,a)),f=[],this},this.done=function(e){return l?(c?l(s):l(),this):(l=e,this)},this.fail=function(e){return d?(c?d(s):d(),this):(d=e,this)},m(this,e,t,s,o,u,c,r)},this.ApisPromiseMT=function(e,t,a,r,i){var n,s=[],o=e?e.length:0,l=void 0,d=void 0,u=[],c=!0===a,f=[],m=[],h=[0];function g(e,t,a,r,i,n,s,o,l){if(t&&0!=t.length)for(var d=0;d<t.length;d++){var u=t[d],c=l.length>d?l[d]:void 0;Qe.apply(void 0,u).done(function(t,a,r,i,n,s,o,l,d){return function(t,u,c){i.push(o?[r,!0,l?c.responseJSON?c.responseJSON:c.responseText:c,d]:1),a&&a(r,!0,l?c.responseJSON?c.responseJSON:c.responseText:c,d),n==i.length&&(o&&i.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(0,a,d,r,i,n,s,o,c)).fail(function(t,a,r,i,n,s,o,l){return function(t,d){i.push(o?[r,!1,d,l,d.statusText]:0),s.push(1),a&&a(r,!1,d,l,d.statusText),n==i.length&&(o&&i.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(0,a,d,r,i,n,s,c))}}Ne("Array",e)&&!Ne("Array",e[0])&&(e=[e],o=1),Ne("Array",i)&&!Ne("Array",i[0])&&(i=[i]),this.repeat=function(e,t,a,r,i){h[0]=a?1*a:-1,h[1]=0,n=setInterval(function(e,t,a,r,i){return function(){e.push(t).proceed(r,i),a[0]>0&&(a[1]=a[1]+1,a[0]==a[1]&&e.stop())}}(this,e,r,h,i),t)},this.stop=function(){n&&clearInterval(n)},this.schedule=function(e,t,a,r,i){var n=t;a&&(t=Fg.getDateUtil(t,a).date().getTime(),n=(new Date).getTime()-t),setTimeout(function(e,t,a,r){return function(){e.push(t).proceed(a,r)}}(this,e,r,i),n)},this.push=function(e,t){return f.push(e),m.push(t),this},this.proceed=function(e,t,a){return f.length>0&&(o=f.length,g(this,f,e,s,o,u,c=!0===t,a,m)),f=[],m=[],this},this.done=function(e){return l?(c?l(s):l(),this):(l=e,this)},this.fail=function(e){return d?(c?d(s):d(),this):(d=e,this)},g(this,e,t,s,o,u,c,r,i)},this.columnCount=function(e){if(Fg.is("String",e)&&(e=$(e)),!e||0==e.length)return 0;var t=0;return $("tr:nth-child(1) th").each((function(){$(this).attr("colspan")?t+=+$(this).attr("colspan"):t++})),0==t&&$("tr:nth-child(1) td").each((function(){$(this).attr("colspan")?t+=+$(this).attr("colspan"):t++})),t},this.moveColumn=function(e,t,a,r){var i;t!=a&&e.find("tr").each((function(){var e=(i=$(this).children("th, td")).eq(t).is(":visible");!1===r&&e?i.eq(t).addClass("hidden"):!0!==r||e||i.eq(t).removeClass("hidden"),i.eq(t).detach().insertBefore(i.eq(a))}))},this.table=function(e){var t;function a(e,t,r){if(e&&0!=e.length){var i,n=e.state(),s=n.pagenum*n.count,o=s+n.count,l=e.find("._t_tb");e.closest("._t_mc").children("._t_gc").addClass("hidden");var d=e.closest("._t_mc").data("config");if(!0!==n.nodata){if(i=n.data.length,o=o>n.data.length?n.data.length:o,l.html(""),!0===n.sort){var u=[].concat(n.data);e.find('._t_hc[faug-sort-dir="asc"],._t_hc[faug-sort-dir="desc"],._t_hc[faug-sort-dir="none"]').each((function(){var e="none"!==$(this).attr("faug-sort-dir");e?(e="asc"===$(this).attr("faug-sort-dir"),$(this).parent().find("i").removeClass(),e?$(this).parent().find("i").addClass("fa fa-fw fa-sort-asc"):$(this).parent().find("i").addClass("fa fa-fw fa-sort-desc")):(e=void 0,$(this).parent().find("i").removeClass(),$(this).parent().find("i").addClass("fa fa-fw fa-sort"));var t=$(this).attr("faug-sort-fnc"),a=$(this).attr("faug-sort-prop");u.sort((function(r,i){var n=r[a],s=i[a];return"number"==t&&(n=parseInt(n),s=parseInt(s)),void 0===e||!0===e?n<s?-1:n>s?1:0:n>s?-1:n<s?1:0}))}))}for(var c=s;c<o;c++){var f=$(Fg.templatize(Te.table.items.tbodytr,{},!1,void 0,void 0,"tbodytr"));f.attr("faug-row-pos",c);for(var m=0;m<n.cols.length;m++){var h=n.cols[m];if(!0===h.isLoT)f.append(Fg.templatize(Te.table.items.tbodytd,{content:u[c][h.ct]},!1,void 0,void 0,"tbodytd"));else{var g=Fg.templatize(h.ct,{row:u[c]},!0);f.append(g)}}l.append(f)}}else{var p=e.find(">tbody>tr").not(".faug-hiden-old").not(".faug-hiden-srch");o=o>(i=p.length)?i:o;var v=(i%n.count>0?1:0)+Math.floor(i/n.count);if(!0===d.pagination.invokeApiOnChange&&(i<n.count?e.closest("._t_mc").find("._t_f31,.next").addClass("hidden"):e.closest("._t_mc").find("._t_f31,.next").removeClass("hidden")),n.pagenum>=v&&!0!==d.pagination.invokeApiOnChange)return 0==i?(e.closest("._t_mc").find("._t_fc").addClass("hidden"),e.closest("._t_mc").children("._t_gc").removeClass("hidden")):(e.closest("._t_mc").find("._t_fc").removeClass("hidden"),e.closest("._t_mc").children("._t_gc").addClass("hidden")),void F(e,d);!0===d.pagination.invokeApiOnChange&&(s=0,o=d.count);for(c=0;c<s;c++)void 0===$(p[c]).attr("faug-row-pos")&&$(p[c]).attr("faug-row-pos",c),$(p[c]).addClass("hidden");for(c=s;c<o;c++)void 0===$(p[c]).attr("faug-row-pos")&&$(p[c]).attr("faug-row-pos",c),$(p[c]).removeClass("hidden");for(c=o;c<i;c++)void 0===$(p[c]).attr("faug-row-pos")&&$(p[c]).attr("faug-row-pos",c),$(p[c]).addClass("hidden");!0===n.sort&&e.find('._t_hc[faug-sort-dir="asc"],._t_hc[faug-sort-dir="desc"],._t_hc[faug-sort-dir="none"]').each((function(){var a=1*$(this).attr("faug-tbl-pos");if(t==a){var r="none"!==$(this).attr("faug-sort-dir");r?(r="asc"===$(this).attr("faug-sort-dir"),$(this).closest("._t_hc").find("i").removeClass(),r?$(this).closest("._t_hc").find("i").addClass("fa fa-fw fa-sort-asc"):$(this).closest("._t_hc").find("i").addClass("fa fa-fw fa-sort-desc")):(r=void 0,$(this).closest("._t_hc").find("i").removeClass(),$(this).closest("._t_hc").find("i").addClass("fa fa-fw fa-sort"));var i=$(this).attr("faug-sort-fnc");$(this).attr("faug-sort-prop");p.sort((function(e,t){var n=void 0===r?1*$(e).attr("faug-row-pos"):$($(e).children("tbody tr td")[a]).text(),s=void 0===r?1*$(t).attr("faug-row-pos"):$($(t).children("tbody tr td")[a]).text();return"number"!=i&&(isNaN(n)||isNaN(s))||(n=parseInt(n),s=parseInt(s)),void 0===r||!0===r?n<s?-1:n>s?1:0:n>s?-1:n<s?1:0})),$.each(p,(function(e,t){$(t).detach()})),$.each(p,(function(t,a){e.find(">tbody").append(a)}))}}))}F(e,d);var y=e.closest("._t_mc").find("._t_f21");v=(i%n.count>0?1:0)+Math.floor(i/n.count);r&&(e.state("pagenum",0),n.pagenum=0);var b=v>0?n.pagenum+1:0,_=(b+"").length<=2?2:(b+"").length;y.find("._t_f211").css("width",10*_+"px"),y.find("._t_f211").val(b),y.find("._t_f212").html(v),y.find("._t_f211").off();if(y.find("._t_f211").on("keypress",function(e,t){return function(r){var i=r.keyCode||r.which,n=$(this).val();i=r.keyCode||r.which;if(n+=i=String.fromCharCode(i),isNaN(n))return $(this).val(e),!1;if((n*=1)>t||n<0||n==e)return $(this).val(e),!1;var s=$(this).closest("._t_mc").data("config"),o=$(this).closest("._t_mc").find("._t_tl"),l=n-1,d=1*o.state("count"),u=o.state("data"),c=o.state("nodata"),f=1*o.state("tcount");if(u&&l*d<u.length||c&&l*d<f||c&&!0===s.pagination.invokeApiOnChange)if(!0===s.pagination.invokeApiOnChange){var m=l;o.state("pagenum",m);var h=d,g=m*h;Fg.ic(s.schemaName,{_f_start:g,_f_count:h,_f_pagenum:m,_f_search_text:""},s.op)}else{l=l;var p=$("._t_mc").find("._t_ps").val();o.state("pagenum",l),a(o),$("._t_mc").find("._t_ps").val(p)}return!1}}(b,v)),0==i?(e.closest("._t_mc").find("._t_fc").addClass("hidden"),e.closest("._t_mc").children("._t_gc").removeClass("hidden")):(e.closest("._t_mc").find("._t_fc").removeClass("hidden"),e.closest("._t_mc").children("._t_gc").addClass("hidden")),d&&d.afterPaintCb&&Fg.execFunc(d.afterPaintCb,[e]),d&&d.stickyHdrOffsetFn){var w=Fg.execFunc(d.stickyHdrOffsetFn,[e]);w.valid&&w.result&&!isNaN(w.result)&&($.fn.stickyTableHeaders?e.stickyTableHeaders({fixedOffset:w.result}):console.warn("Please include jquery.stickytableheaders.min.js script"))}}function F(e,t){if(e.find("thead>tr").eq(0).find("th").length>0){var a=e.data("col-settings");function r(e,t){if(e&&Object.keys(e).length>0){var a=[],r=[];t.find("thead>tr").eq(0).find("th").each((function(){r.push($(this).text().trim()),a.push("")}));for(var i=Object.keys(e),n=0;n<i.length;n++)a[e[i[n]][0]]=i[n];for(n=0;n<r.length;n++){var s=a.indexOf(r[n]);n!=s&&Fg.moveColumn(t,n,s)}t.find("tr").each((function(){for(var t=$(this).children("th, td"),a=0;a<i.length;a++){var r=!t.eq(e[i[a]][0]).hasClass("hidden");!e[i[a]][1]&&r?t.eq(e[i[a]][0]).addClass("hidden"):e[i[a]][1]&&!r&&t.eq(e[i[a]][0]).removeClass("hidden")}})),t.data("col-settings",e)}}if(!a){var i=(Fg.isN(Fg.getRoute())?location.href+"":Fg.getRoute())+(e.attr("id")?e.attr("id"):e.attr("class"));if(t.tblSettingsIdFunc){var n=Fg.execFunc(t.tblSettingsIdFunc,[e]);n.valid&&n.result&&(i=n.result);var s=localStorage.getItem(i);if(s)try{a=JSON.parse(s),Fg.freezeUI(!0),r(a,e),Fg.freezeUI(!1)}catch(e){}}else t.tblSettingsFunc&&Fg.execFunc(t.tblSettingsFunc,[e,r])}}}}function r(e,t,r,i,n,s){if(n=n||{},Fg.is("String",r)&&(r=$(r)),r&&0!=r.length){s.ttbl=r;var o=r.parent().hasClass("_t_bc"),l=void 0===e.download||!0===e.download.enabled,d=void 0===e.downloadpdf||!0===e.downloadpdf.enabled;if(Te.table.container.items.header.items.itemperpage_yes.items={options:""},Te.table.container.items.header.items.searchdownload.items.search.items={_f_search_text:""},e.search&&e.search.enabled&&(Te.table.container.items.header.items.searchdownload.items.search.items._f_search_text=n._f_search_text?n._f_search_text:""),o)m=r.closest("._t_mc"),h=r.closest("._t_hc"),g=r.closest("._t_bc"),p=r.closest("._t_gc"),r.closest("._t_fc");else{var u={page_enabled:e.pagination&&!0===e.pagination.enabled,search_enabled:e.search&&e.search.enabled,dwnld_enabled:l,dwnldpdf_enabled:d,invoke_apionchange:e.pagination&&!0===e.pagination.invokeApiOnChange,options:""};if(u.page_enabled&&e.pagination.numpages){i=e.pagination.numpages[0],n&&n._f_count&&n._f_count>0&&(i=n._f_count),n&&!isNaN(n._f_count)&&0==n._f_count&&(i=0);for(var c=0;c<e.pagination.numpages.length;c++){var f=0==e.pagination.numpages[c]?"All":e.pagination.numpages[c];Te.table.container.items.header.items.itemperpage_yes.items.options+=Fg.templatize(Te.table.items.pagelistitem,{display:f,pagenum:e.pagination.numpages[c],selected:1*i===e.pagination.numpages[c]?"selected":""},!1,void 0,void 0,"pagelistitem")}}var m,h=(m=$(Fg.templatize(Fg.getTemplate(Te.table.container,u),{},!1))).find("._t_hc"),g=m.find("._t_bc"),p=m.find("._t_gc");m.find("._t_fc");Te.table.container.items.header.items.itemperpage_yes.items={options:""},Te.table.container.items.header.items.searchdownload.items.search.items={search_text:""}}m.data("config",e);var v;i=-1;if(e.tFunc){var y=Fg.execFunc(e.tFunc,[t]);y.valid&&y.result&&Fg.is("Array",y.result)&&(t=y.result)}if(t&&Fg.is("Array",t)){if(0==t.length)r.closest("._t_mc").find("._t_fc").addClass("hidden"),p.removeClass("hidden");else{r=Fg.templatize(Te.table.items.table,{},!1,void 0,void 0,"table");i=i<=0?t.length:i,r.state({pagenum:0,count:i,cols:e.columns,data:t,sort:e.sort&&e.sort.enabled}),g.append(r);if(e.columns){var b=Fg.getString(Te.table.items.thead),_=Fg.getString(Te.table.items.theadtr);b.append(_),r.append(b);for(c=0;c<e.columns.length;c++){var w=e.columns[c],F=$(Fg.templatize(Te.table.items.theadth,{},!1,void 0,void 0,"theadth"));if(F.attr("faug-tbl-pos",c),F.html(w.ht+"-"),e.sort&&e.sort.enabled&&e.sort.fields){for(var x=!1,O="",k="",T=0;T<e.sort.fields.length;T++)if(-1!=e.sort.fields[T].indexOf(c+1)){x=!0,k=e.sort.fields[T][1],O=e.sort.fields[T].length>2?e.sort.fields[T][2]:"";break}x&&(F.attr("faug-sort-dir","none"),F.attr("faug-sort-fnc",O),F.attr("faug-sort-prop",k))}_.append(F)}var S=Fg.templatize(Te.table.items.tbody,{},!1,void 0,void 0,"tbody");r.append(S),a(r)}}$(e.parent).append(m)}else{r.addClass("_t_tl"),r.find(">thead").addClass("_t_th"),r.find(">thead>tr").addClass("_t_hr"),r.find(">thead>tr>th").addClass("_t_hc"),r.find(">tbody").addClass("_t_tb"),r.find(">tbody>tr").addClass("_t_rw");r.find(">tbody>tr").length,r.find(">tbody>tr.hidden").length;r.find(">tbody>tr").removeClass("faug-hiden-old"),r.find(">tbody>tr.hidden").addClass("faug-hiden-old");var A=r.parent();o||(r.appendTo(g),A.append(m));var N=0;r.find(">thead>tr>th").each((function(){$(this).attr("faug-tbl-pos",N++),$(this).attr("faug-sort-dir","none"),$(this).attr("faug-sort-fnc",""),$(this).attr("faug-sort-prop",""),o||$(this).append(Te.table.items.sorthtml)})),r.state({pagenum:n._f_pagenum?n._f_pagenum:0,count:n._f_count?n._f_count:e.pagination.numpages[0],sort:e.sort&&e.sort.enabled,nodata:!0,tcount:r.find(">tbody>tr").not("faug-hiden-old").length}),a(r)}if(l&&(h.find("._t_dw").off("click"),h.find("._t_dw").on("click",function(e){return function(){e.download()}}(s))),d&&(h.find("._t_dwpdf").off("click"),h.find("._t_dwpdf").on("click",function(e){return function(){e.downloadPdf()}}(s))),m.find("._t_stg").off("click"),m.find("._t_stg").on("click",function(e){return function(){var t=e.data("config"),a=e.find("._t_tl"),r="",i=[];if(a.find("th").length>0){var n=a.data("col-settings");if(n){for(var s=Object.keys(n).length,o=0;o<s;o++)for(var l in n)if(n.hasOwnProperty(l)&&o==n[l][0]){i.push(l);var d={name:l,active:n[l][1]?"active":""};r+=Fg.templatize(Te.table.settings.items.itemshtml.template,d,!1);break}}else a.find("thead>tr").eq(0).find("th").each((function(){i.push($(this).text().trim());var e={name:$(this).text().trim(),active:$(this).is(":visible")?"active":""};r+=Fg.templatize(Te.table.settings.items.itemshtml.template,e,!1)}));var u=Te.table.settings.template.replace("<%itemshtml%>",r);Fg.showModalForm(u,"_table_settings_","<h5>Column Settings</h5>",!0,"",!1),$("#_table_settings_").find("._t_stg_lst").sortable({revert:!0}),$("#_table_settings_").find("._t_stg_lst").find("li").dblclick((function(){$(this).toggleClass("active")})),$("#_table_settings_").find("._t_stg_but").click((function(){var e=0,r=[],n={};$("#_table_settings_").find("._t_stg_lst").find("li").each((function(){r.push($(this).text().trim()),n[$(this).text().trim()]=[e++,$(this).hasClass("active")]}));for(var s=0;s<i.length;s++){var o=r.indexOf(i[s]);s!=o&&Fg.moveColumn(a,s,o)}a.find("tr").each((function(){for(var e=$(this).children("th, td"),t=Object.keys(n),a=0;a<t.length;a++){var r=!e.eq(n[t[a]][0]).hasClass("hidden");!n[t[a]][1]&&r?e.eq(n[t[a]][0]).addClass("hidden"):n[t[a]][1]&&!r&&e.eq(n[t[a]][0]).removeClass("hidden")}})),a.data("col-settings",n);var l=(Fg.isN(Fg.getRoute())?location.href+"":Fg.getRoute())+(a.attr("id")?a.attr("id"):a.attr("class"));if(t.tblSettingsIdFunc){var d=Fg.execFunc(t.tblSettingsIdFunc,[a]);d.valid&&d.result&&(l=d.result,localStorage.setItem(l,JSON.stringify(n)))}else t.onTblSettingsSave&&Fg.execFunc(t.onTblSettingsSave,[a,JSON.stringify(n)]);$("#_table_settings_").modal("hide")})),$("#_table_settings_").modal("show")}}}(m)),e.sort&&e.sort.enabled&&m.find("._t_hc[faug-sort-dir]").on("click",(function(e,t){var r=$(this).attr("faug-sort-dir");"none"==r?$(this).attr("faug-sort-dir","asc"):"asc"==r?$(this).attr("faug-sort-dir","desc"):$(this).attr("faug-sort-dir","none"),a($(this).closest("._t_mc").find("._t_tl"),1*$(this).attr("faug-tbl-pos"))})),e.search&&e.search.enabled&&e.search.fields){var C=m.find("._t_sb"),P=m.find("._t_sb");if(!0===e.search.invokeApiOnChange&&e.search.events){if(e.search.selector&&$(e.search.selector).length>0?(C.off(),C.addClass("hidden"),$(e.search.selector).off(),C=$(e.search.selector)):C.off(),n&&"search"===n._f_originated_from){C.focus();var j=C.val();C.val("").val(j)}for(var D in e.search.events)if(e.search.events.hasOwnProperty(D))for(var I=e.search.events[D],B=D.split(","),E=0;E<B.length;E++)C.on(B[E]+"."+E,function(e,t,a){return function(r){if($(this).attr("data-regex")&&ke){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!new RegExp($(this).attr("data-regex")).test($(this).val()))return Fg.execFunc(ke,[$(this)]),r.stopPropagation(),!1}else if($e&&ke){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!$e.test($(this).val()))return Fg.execFunc(ke,[$(this)]),r.stopPropagation(),!1}else if(xe&&"file"!=$(this).prop("type")&&""!=$(this).val()&&!xe.test($(this).val()))return Fg.execFunc(Oe,[$(this)]),r.stopPropagation(),!1;var i=t.parent().parent().parent().parent().find("._t_tl").state();e.crudop&&(e.crudop.vars||(e.crudop.vars={}),e.crudop.vars._f_start="value@0",e.crudop.vars._f_count="value@"+i.count,e.crudop.vars._f_pagenum="value@1",e.crudop.vars._f_search_text="value@"+$(this).val(),e.crudop.vars._f_originated_from="value@search"),t.val($(this).val());var n=function(e,t,a){Me(e)(t,a)||""!=a.val()||Me(e)(t,a,void 0,void 0,!0)};"keyup"!=a.toLowerCase()&&"keydown"!=a.toLowerCase()&&"keypress"!=a.toLowerCase()||(n=function(e,t,a){clearTimeout(qe),qe=setTimeout(function(e,t,a){return function(){Me(e)(t,a)||""!=a.val()||Me(e)(t,a,void 0,void 0,!0)}}(e,t,a),1e3)}),n(e,r,t)}}(I,P,B[E]))}else Fg.useComponent("search-filter-table-rows",[[C,P],"keyup",function(e){return e.closest("._t_mc").find("._t_tl").find("._t_rw")},function(e){return e.children("td")},e.search.type,(v=e.search.fields,function(e,t){return-1!=v.indexOf(t+1)}),function(e){var t=e[0].closest("._t_mc").find("._t_tl");t.find(">tbody>tr").not(".hidden").removeClass("faug-hiden-srch"),t.find(">tbody>tr.hidden").addClass("faug-hiden-srch"),a(t,void 0,!0),e[0].focus()},[xe,Oe]])}e.pagination&&!0===e.pagination.enabled&&(e.pagination.numpages&&(m.find("._t_ps").off("change"),m.find("._t_ps").on("change",(function(){var e=$(this).closest("._t_mc").data("config"),t=$(this).closest("._t_mc").find("._t_tl"),r=1*t.state("pagenum"),i=1*$(this).val(),n=t.state("data"),s=t.state("nodata"),o=1*t.state("tcount");if((n&&n.length/i<=r||s&&o/i<=r||s&&!0===e.pagination.invokeApiOnChange)&&(r=0),t.state("count",i),!0===e.pagination.invokeApiOnChange){t.state("pagenum",1);var l=i;Fg.ic(e.schemaName,{_f_start:0,_f_count:l,_f_pagenum:0,_f_search_text:$(this).closest("._t_mc").find("._t_sb").val()},e.op)}else t.state("pagenum",r),a(t)}))),m.find("._t_f31").off("click"),m.find("._t_f31").on("click",(function(){var e=$(this).closest("._t_mc").data("config"),t=$(this).closest("._t_mc").find("._t_tl"),r=1*t.state("pagenum"),i=1*t.state("count"),n=t.state("data"),s=t.state("nodata"),o=1*t.state("tcount");if(n&&(r+1)*i<n.length||s&&(r+1)*i<o||s&&!0===e.pagination.invokeApiOnChange)if(!0===e.pagination.invokeApiOnChange){var l=r+1;t.state("pagenum",l);var d=i,u=l*d;Fg.ic(e.schemaName,{_f_start:u,_f_count:d,_f_pagenum:l,_f_search_text:$(this).closest("._t_mc").find("._t_sb").val()},e.op)}else{r+=1;var c=$("._t_mc").find("._t_ps").val();t.state("pagenum",r),a(t),$("._t_mc").find("._t_ps").val(c)}})),m.find("._t_f11").off("click"),m.find("._t_f11").on("click",(function(){var e=$(this).closest("._t_mc").data("config"),t=$(this).closest("._t_mc").find("._t_tl"),r=1*t.state("pagenum"),i=1*t.state("count");if(r>0||!0===e.pagination.invokeApiOnChange&&t.state("pagenum")&&t.state("pagenum")>0)if(!0===e.pagination.invokeApiOnChange){var n=r-1;t.state("pagenum",n);var s=i,o=n*s;Fg.ic(e.schemaName,{_f_start:o,_f_count:s,_f_pagenum:n,_f_search_text:$(this).closest("._t_mc").find("._t_sb").val()},e.op)}else{r-=1;var l=$("._t_mc").find("._t_ps").val();t.state("pagenum",r),a(t),$("._t_mc").find("._t_ps").val(l)}})))}}function i(e,a,r){if(a&&a.id&&(e="#"+a.id),!e&&t)return t;if(Fg.is("String",e)&&(e=$(e)),e){e.parent();var i=0;e.find(">thead").length>0?0==(i=e.find(">thead>tr>th").length)&&(i=e.find(">thead>tr>td").length):i=e.find(">tbody>tr>td").length}if(a?(a.sort||(a.sort={enabled:!0,fields:[],invokeApiOnChange:!1}),a.search||(a.search={enabled:!0,fields:[],type:"ci",invokeApiOnChange:!1}),a.pagination||(a.pagination={enabled:!0,numpages:[10,25,50,100,200],invokeApiOnChange:!1})):a={sort:{enabled:!0,fields:[],invokeApiOnChange:!1},search:{enabled:!0,fields:[],type:"ci",invokeApiOnChange:!1},pagination:{enabled:!0,numpages:[10,25,50,100,200],invokeApiOnChange:!1}},e){if(!a.sort.fields||Fg.is("Array",a.sort.fields)&&0==a.sort.fields.length){a.sort.fields=[];for(var n=0;n<i;n++)a.sort.fields.push(n+1)}if(!a.search.fields||Fg.is("Array",a.search.fields)&&0==a.search.fields.length){a.search.fields=[];for(n=0;n<i;n++)a.search.fields.push(n+1)}}return t=a}return this.fromHtml=function(e,a){i(e,t)&&r(t,void 0,e,a,void 0,this)},this.paint=function(e,a,i){t&&(t.id&&(e="#"+t.id),r(t,a,e,void 0,i,this))},this.download=function(e,a){t&&(Fg.isN(e)&&(e="data_"+(new Date).getTime()+".csv"),Fg.tableToCSV(this.ttbl,e,a))},this.downloadPdf=function(e,a,r,i,n,s,o,l){t&&Fg.downloadPdf(this.ttbl,e,a,r,i,n,s,o,l)},this.c=i(void 0,e),this},this.tableToCSV=function(e,t,a,r,i){var n=Fg.isN(t)?"report.csv":t;i=!1!==i,r=!r||r.length>1?",":r;var s=[];a&&""!==a&&""!=a.trim()&&s.push(a+"\n\n\n");for(var o=e.children("thead").children("tr"),l=e.children("tbody").children("tr"),d=0;d<1;d++){for(var u=[],c=$(o[d]).children("td, th"),f=0;f<c.length;f++){-1!=(m=c[f].innerText).indexOf("\n")&&(m=m.replace(/\n/g,"\\n")),-1!=m.indexOf('"')&&(m=m.replace(/"/g,'\\"')),u.push((i?'"':"")+m+(i?'"':""))}s.push(u.join(r))}for(d=0;d<l.length;d++){for(u=[],c=$(l[d]).children("td, th"),f=0;f<c.length;f++){var m;-1!=(m=c[f].innerText).indexOf("\n")&&(m=m.replace(/\n/g,"\\n")),i&&-1!=m.indexOf('"')&&(m=m.replace(/"/g,'\\"')),m.indexOf(r),u.push((i?'"':"")+m+(i?'"':""))}s.push(u.join(r))}var h=new Blob([s.join("\n")],{type:"text/csv"}),g=document.createElement("a");g.download=n,g.href=window.URL.createObjectURL(h),g.style.display="none",document.body.appendChild(g),g.click()},this.paintTable=function(e,t){var a=t||{};$(e).closest("._t_mc").data("config")&&(a=$(e).closest("._t_mc").data("config")),new Fg.table(a).fromHtml(e)},this.downloadPdf=function(e,t,a,r,i,n,s,o,l){Fg.isN(a)&&(a=""),(Fg.isN(t)||isNaN(t))&&(t=e.children("thead").children("tr")?e.children("thead").children("tr").eq(0).find("th").length>0?e.children("thead").children("tr").eq(0).find("th").length:e.children("thead").children("tr").eq(0).find("td").length:e.children("tbody").children("tr")?e.children("tbody").children("tr").eq(0).find("td").length:11);var d,u=t&&t>10?new jsPDF("l"):new jsPDF;d=t&&t>10?{html:Fg.is("String",e)?"#"+e:e[0],theme:"grid",didDrawPage:function(e){u.setFontSize(20),u.setTextColor(40),u.setFontStyle("normal"),r&&u.addImage(r,"JPEG",e.settings.margin.left,15,10,10),u.text(a,e.settings.margin.left,22);var t="Page "+u.internal.getNumberOfPages();"function"==typeof u.putTotalPages&&(t+=" of {total_pages_count_string}"),u.setFontSize(10);var i=u.internal.pageSize,n=i.height?i.height:i.getHeight();u.text(t,e.settings.margin.left,n-10)},styles:{overflow:"linebreak",cellWidth:12,minCellWidth:5,fontSize:5},margin:{top:30}}:{html:Fg.is("String",e)?"#"+e:e[0],theme:"grid",didDrawPage:function(e){u.setFontSize(20),u.setTextColor(40),u.setFontStyle("normal"),r&&u.addImage(r,"JPEG",e.settings.margin.left,15,10,10),u.text(a,e.settings.margin.left,22);var t="Page "+u.internal.getNumberOfPages();"function"==typeof u.putTotalPages&&(t+=" of {total_pages_count_string}"),u.setFontSize(10);var i=u.internal.pageSize,n=i.height?i.height:i.getHeight();u.text(t,e.settings.margin.left,n-10)},margin:{top:30}},Fg.isN(n)||(d.didDrawPage=n),Fg.isN(s)||(d.styles=s),Fg.isN(o)||(d.theme=o),Fg.isN(l)||(d.margin=l),u.autoTable(d),"function"==typeof u.putTotalPages&&u.putTotalPages("{total_pages_count_string}"),u.save(Fg.isN(i)?"report.pdf":i)},"undefined"!=typeof Promise&&(this.FgRecorder=function(e){this.silent=!0===e,this.cmdlist=[],this.typedValue="",this.target,this.event,this.commands=[],this.lat,this.st=0;var t,a=(t=this,function(a){var r=a.target;if(""!=t.typedValue){var i="type "+t.typedValue+" xpath@'"+Fg.getXPath($(t.target))+"'";e?t.cmdlist.push(i):console.log(i)}var n=(new Date).getTime();t.lat&&n-t.lat>100&&(i="sleep "+(n-t.lat)/1e3,t.silent?t.cmdlist.push(i):console.log(i)),t.typedValue="",t.target=r,t.event="click",t.lat=(new Date).getTime(),r.options&&r.options.selectedIndex?(t.event="select",i="select index@"+(r.options.selectedIndex-1)+" xpath@'"+Fg.getXPath($(r))+"'",t.silent?t.cmdlist.push(i):console.log(i)):(i="click xpath@'"+Fg.getXPath($(r))+"'",t.silent?t.cmdlist.push(i):console.log(i))}),r=function(e){return function(t){var a=t.target,r=t.keyCode;if(8==r)e.typedValue.length>0&&(e.typedValue=e.typedValue.substring(0,e.typedValue.length-1));else if(9==r){if(""!=e.typedValue){var i=(new Date).getTime();if(e.lat&&i-e.lat>100){var n="sleep "+(i-e.lat)/1e3;e.silent?e.cmdlist.push(n):console.log(n)}n="type "+e.typedValue+" xpath@'"+Fg.getXPath($(e.target))+"'";e.silent?e.cmdlist.push(n):console.log(n)}e.typedValue=""}e.target=a,e.event="keyup",13!=r&&(e.lat=(new Date).getTime())}}(this),i=function(e){return function(t){var a=t.target;e.target=a,e.typedValue+=String.fromCharCode(t.which),e.event="keypress",13!=t.keyCode&&(e.lat=(new Date).getTime())}}(this);this.startRecording=function(){this.cmdlist.length=0,this.silent?this.cmdlist.push("open chrome"):console.log("open chrome"),this.silent?this.cmdlist.push("goto "+document.location):console.log("goto "+document.location),document.addEventListener("click",a,!0),document.addEventListener("keyup",r,!0),document.addEventListener("keypress",i,!0)},this.stopRecording=function(){this.emit(),this.cmdlist.length=0,document.removeEventListener("click",a,!0),document.removeEventListener("keyup",r,!0),document.removeEventListener("keypress",i,!0),this.typedValue="",this.target=null,this.event="",this.lat=null};var n=/type "((?:[^"\\]|\\.)*)" xpath@'((?:[^'\\]|\\.)*)'/,s=/click xpath@'((?:[^'\\]|\\.)*)'/,o=/select index@([0-9]+) xpath@'((?:[^'\\]|\\.)*)'/,l=/sleep ([0-9\.]+)/;return this.emit=function(){console.log(this.cmdlist.join("\n"))},this.play=function(e){if(Fg.is("Array",e)){this.st=0;var t=Promise.resolve(),a=this;e.forEach((function(e){t=t.then((function(){return a.execInt(e)})).then((function(e){e&&console.log(e)}))}))}else Fg.is("String",e)&&this.execute(e)},this.execute=function(e){this.execInt(e).then((function(e){e&&console.log(e)}))},this.execInt=function(e){var t="Invalid command";if(l.test(e)){if(r=l.exec(e)){var a=1*r[1];this.st+=a,t=void 0}}else if(n.test(e)){var r=n.exec(e),i=this.st;if(this.st=0,r){a=r[1];var d=r[2];if(u=document.evaluate(d,document,null,XPathResult.ANY_TYPE,null).iterateNext())return new Promise((function(e){i<=0?($(u).focus(),$(u).val(a),$(u).blur(),e('type "'+a+"\" xpath@'"+d+"'")):(console.log("sleep "+1e3*i),setTimeout(function(e,t,a,r){return function(){$(e).focus(),$(e).val(t),$(e).blur(),r('type "'+t+"\" xpath@'"+a+"'")}}(u,a,d,e),1e3*i))}))}}else if(s.test(e)){r=s.exec(e),i=this.st;if(this.st=0,r){d=r[1];if(u=document.evaluate(d,document,null,XPathResult.ANY_TYPE,null).iterateNext())return new Promise((function(e){i<=0?($(u).click(),$(u).focus(),e("click xpath@'"+d+"'")):(console.log("sleep "+1e3*i),setTimeout(function(e,t,a){return function(){$(e).click(),$(e).focus(),a("click xpath@'"+t+"'")}}(u,d,e),1e3*i))}))}}else if(o.test(e)){r=o.exec(e),i=this.st;if(this.st=0,r){var u;a=1*r[1];if(d=(d=r[2]).replace(/\\'/g,"'"),u=document.evaluate(d,document,null,XPathResult.ANY_TYPE,null).iterateNext())return new Promise((function(e){i<=0?($(u)[0].selectedIndex=a,e("select index@"+a+" xpath@'"+d+"'")):(console.log("sleep "+1e3*i),setTimeout(function(e,t,a,r){return function(){$(e)[0].selectedIndex=t,r("select index@"+t+" xpath@'"+a+"'")}}(u,a,d,e),1e3*i))}))}}return new Promise((function(e){e(t)}))},this}),"undefined"!=typeof Worker&&(this.FaugWebWorker=function(e,t,a){var r,i,n=e,s=t,o=a;try{r=new Worker(n)}catch(e){if(!(e instanceof DOMException))throw e;var l=function(e){var t,a='importScripts("'+e+'");';try{t=new Blob([a],{type:"application/javascript"})}catch(e){var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);r.append(a),t=r.getBlob("application/javascript")}return t}(workerUrl),d=d||webkitURL,u=d.createObjectURL(l);r=new Worker(u),d.revokeObjectURL(u)}this.setObject=function(e){i=e},this.getObject=function(){return i},this.getName=function(){return s},this.send=function(e){r.postMessage(e)},this.setOnMsgCallback=function(e){(o=e)&&r.addEventListener("message",(function(e){o(e)}),!1)},this.stop=function(){r.terminate()}}),"undefined"!=typeof Worker){var ta=function(e,t,a,r){var i=t||2,n=a||"UNWP-"+(new Date).getTime(),s=e,o=[],l=[];function d(e,t){var a,r,i=e,n=[],s=0;this.done=function(e){return s>0&&!n[s-1][3]?n[s-1][3]=e:a=e,this},this.fail=function(e){return s>0&&!n[s-1][4]?n[s-1][4]=e:r=e,this},this.__continue=function(e,t){s=e,n=t},this.resolve=function(e){if(a.apply(void 0,e),s>0){s--;var t=n[e[3]];n.splice(e[3],1);var r=t[1].apply(t[0],t[2]);r.__continue(s,n),t[3]&&(r=r.done(t[3])),t[4]&&(r=r.fail(t[4]))}},this.reject=function(e){if(r.apply(void 0,e),s>0){s--;var a=n[e[3]];n.splice(e[3],1);var i=a[0].apply(t,a[1]);i.__continue(s,n),a[2]&&(i=i.done(a[2])),a[3]&&(i=i.fail(a[3]))}},this.then=function(e){s++;var t=arguments;return t.push(s-1),n.push([i,i.execute,t,void 0,void 0]),this},this.get=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.get,e,void 0,void 0]),this},this.put=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.put,e,void 0,void 0]),this},this.post=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.post,e,void 0,void 0]),this},this.del=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.del,e,void 0,void 0]),this},this.api=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.api,e,void 0,void 0]),this}}this.execute=function(e){var t=new d(this,Fg);if(o.length>0){var a=o.shift();a.setObject(t),a.send(e)}else l.push({t:e,f:t});return t};for(var u=0;u<i;u++){var c=new Fg.FaugWebWorker(s,n+"-ApiWorker"+(u+1));c.setOnMsgCallback(function(e,t,a,r,i){return function(a){var n=a.data,s=n.shift();if(!0===s[0])if(Faug.execFunc("onAjaxCallDone",[Ge(n[1])]),!0===Fg.gp("catchApiUncaughtExceptions"))try{r.getObject().resolve([n[0],n[1].statusText,n[1]])}catch(a){console.error(a)}else r.getObject().resolve([n[0],n[1].statusText,n[1]]);else if(Faug.execFunc("onAjaxCallFail",[Ge(n[1])]),!0===Fg.gp("catchApiUncaughtExceptions"))try{r.getObject().reject([n[0],n[1]])}catch(a){console.error(a)}else r.getObject().reject([n[0],n[1]]);if("function"==typeof i&&i(s[0],s[1]),0==e.length&&t.length>0){var o=t.shift();r.setObject(o.f),r.send(o.t)}else e.push(r)}}(o,l,0,c,r)),o.push(c)}return this};this.WorkerPool=ta}return this.dotify=function(e){var t={};return function e(a,r){for(var i in a){var n=a[i],s=r?r+"."+i:i;n&&"object"==typeof n?e(n,s):t[s]=n}}(e),t},this.design=function(e,t){return s.render(e,t),s},this.useComponent=function(e,t,a){var r=de[e];r&&(r.init&&r.init.apply(void 0,a),r.use.apply(void 0,t),r.destroy&&r.destroy())},this.testEquality=function(e,t){var a=[];return function e(t,r){if(t===r)return!0;if(!(t instanceof Object&&r instanceof Object))return!1;if(t.constructor!==r.constructor)return!1;for(var i in t)if(t.hasOwnProperty(i)){if(!r.hasOwnProperty(i))return!1;if(t[i]===r[i])continue;if("object"!=typeof t[i])return!1;if(-1!==a.indexOf(t[i]))throw new Error("Cannot compare some cyclical objects");if(a.push(t[i]),!e(t[i],r[i]))return!1}for(i in r)if(r.hasOwnProperty(i)&&!t.hasOwnProperty(i))return!1;return!0}(e,t)},this.diff=function(e,a){return t.getDomDiff(e,a)},this.compareAndApplyDiff=function(e,a,r){return t.compareDomAndApplyDiff(e,a,r)},this.applyDiff=function(e,a){return t.applyDomDiff(e,a)},s=new function(){var e={display:1,show:[["true","Yes"],["false","No"]],custom:1,required:[["true","Yes"],["false","No"]],attrs:1,style:1,stylepos:["append","prepend","clear"],classpos:["append","prepend","clear"],attrpos:["append","prepend","clear"],header:1,icon:1,label:1,helptext:1,customTemplate:1,showlabel:[["true","Yes"],["false","No"]],showicon:[["true","Yes"],["false","No"]],showhelptext:[["true","Yes"],["false","No"]],autocomplete:[["on","Yes"],["off","No"]],maxlength:1,placeholder:1,readonly:[["true","Yes"],["false","No"]]};function t(a,r,i,n,s,o,l,d){var u=a,c="";if(u=Fg.is("Object",r)&&r.display?r.display:a.substring(0,1).toUpperCase()+a.substring(1),Fg.is("Object",r)){c="hidden"!==r.ui&&r.show+""!="false"?'style="background-color: #bed !important;"':("hidden"!==r.ui&&r.show+""!="false"||r.required+""!="false")&&r.required+""=="false"?'style="background-color: white !important;"':'style="background-color: yellow !important;"',n>1&&(c='style="background-color: inherit !important;"');var f=[];for(var m in i=[],r)r.hasOwnProperty(m)&&(f.push(r[m]),i.push(m));r=f}var h=s;1==n?h=d+"_"+a+"_id":n>1&&(h="");for(var g='<div id="'+h+'" key="'+a+'" '+c+' class="jsonTitleCls col-md-'+(0==n?"12":"3")+" "+(0==n?"tab-pane fade "+(o?"in active":""):"conf_prop "+(1==n?"":"hidden"))+'" draggable="'+(1==n?"true":"false")+'" data-open="0" data-level="'+n+'" null>'+(0==n?"":u+'<span class="tglCls"></span><div class="clearfix addBorderCls"></div>'),p=!1,v=0;v<r.length;v++){var y=r[v],b=l+"['"+(m=i[v])+"']";if((!(n>0)||e[m])&&(0!=n||"hidden"!==y.ui))if(Fg.is("Object",y)){var _=t(m,y,null,n+1,void 0,void 0,b,s);""!=_&&(p=!0,g+=_)}else{if(p=!0,g+='<div class="conf_prop col-md-12 jsonLableWrap hidden" data-level="'+(n+1)+'" data-open="0" null><div class="conf_name" style="">'+m+':&nbsp;</div><div class="conf_value form-group" style="display:inline-block;">',1==e[m])g+='<input type="text" name="'+b+'" class="form-control" style="width:300px" value="'+Fg.eh(y)+'"/>';else{g+='<select class="form-control" name="'+b+'" style="width:300px">';for(var w=0;w<e[m].length;w++){var F=Fg.is("Array",e[m][w])?e[m][w][0]:e[m][w],x=Fg.is("Array",e[m][w])?e[m][w][1]:e[m][w];g+='<option value="'+F+'" '+(F+""==y+""?"selected":"")+">"+Fg.eh(x)+"</option>"}g+="</select>"}g+="</div></div>"}}return p?g+"</div>":""}function a(e,a,r,i){var n=[],s=[];if(r&&r.length>0)for(var o=0;o<r.length;o++)e[r[o]]&&(n.push(e[r[o]]),s.push(r[o]));else{for(var l in e)e.hasOwnProperty(l)&&"hidden"!==e[l].ui&&e[l].show+""!="false"&&"false"!==e[l].required&&(n.push(e[l]),s.push(l));for(var l in e)e.hasOwnProperty(l)&&-1==s.indexOf(l)&&"false"===e[l].required&&(n.push(e[l]),s.push(l));for(var l in e)e.hasOwnProperty(l)&&-1==s.indexOf(l)&&(n.push(e[l]),s.push(l))}return t("",n,s,0,"spec"+i,a,"properties")}var r=!1;this.render=function(e,t){var i=Fg.getSchema(e),n=i.properties,s=i.dynamicAspects,o=(i.propertyOrder,"");if(s&&s.length>0){o='<ul class="nav nav-tabs jsonTabsWrap">';var l=1;o+='<li class="col-lg-3 col-md-4 col-sm-6 col-xs-12 colnopad '+(1==l?"active":"")+'"><a class="jsonTitleTruncateCls" data-toggle="tab" href="#spec'+l+++'">Default</a></li>';for(var d=0;d<s.length;d++){var u=!1;for(var c in s[d].valueset)s[d].valueset.hasOwnProperty(c)&&("propertyOrder"==c||-1!=c.indexOf("properties."))&&(u=!0);if(u){var f=s[d].cond;Fg.is("String",s[d].name)&&""!=s[d].name.trim()&&(f=s[d].name.trim()),o+='<li class="col-lg-3 col-md-4 col-sm-6 col-xs-12 colnopad '+(1==l?'class="active"':"")+'"><a class="jsonTitleTruncateCls" data-toggle="tab" title="'+f+'" href="#spec'+l+++'">'+f+"</a></li>"}}o+="</ul>",o+='<div class="tab-content col-padng-5" schemaName="'+e+'">',l=1,o+=a(n,!0,i.propertyOrder,1);var m,h=jQuery.extend({},n);for(d=0;d<s.length;d++){u=!1;for(var c in s[d].valueset)if(s[d].valueset.hasOwnProperty(c))if("propertyOrder"==c)u=!0,m=s[d].valueset[c];else if(-1!=c.indexOf("properties.")){u=!0;var g=c.replace("properties.","");Fg.setrefNewObj(h,g,s[d].valueset[c])}u&&(o+=a(h,!1,m,++l))}o+="</div>"}else o+='<div class="col-padng-5" schemaName="'+e+'">',o+=a(n,!0,i.propertyOrder,1),o+="</div>";t?$(t).html(o):$("body").html(o),$(".conf_prop").on("click",(function(e){e.stopPropagation();var t=1*$(this).attr("data-level")+1;"0"==$(this).attr("data-open")?($(this).attr("data-open","1"),$(this).find("div[data-level="+t+"]").removeClass("hidden")):($(this).attr("data-open","0"),$(this).find("div[data-level="+t+"]").addClass("hidden"))})),$(".jsonTitleCls").on("dragstart",(function(e){e.dataTransfer=e.originalEvent.dataTransfer,$("#"+e.target.id).removeClass("jsonTitleBorderCls"),$("#"+e.target.id).addClass("jsonTitleBorderCls"),r||(r=!0,e.dataTransfer.setData("text/plain",e.target.id),e.dropEffect="move",console.log(e.target.id))})),$(".jsonTitleCls").on("dragover",(function(e){e.preventDefault(),e.dataTransfer=e.originalEvent.dataTransfer,e.dataTransfer.dropEffect="move",$("#"+e.target.id).removeClass("jsonTitleBorderCls")})),$(".jsonTitleCls").on("drop",(function(e){if(r){r=!1,e.preventDefault(),e.dataTransfer=e.originalEvent.dataTransfer;var t=e.dataTransfer.getData("text/plain");console.log(t),$("#"+t).removeClass("jsonTitleBorderCls");var a=$(document.getElementById(t)),i=$(e.target),n=$("<div>").insertAfter(i);i.insertAfter(a),a.insertBefore(n),n.remove();var s=$(e.target).attr("id");$("#"+s).removeClass("jsonTitleBorderCls")}}))},this.toSchema=function(){$(".jsonTitleCls.active").serializeObject();var e=$(".jsonTitleCls.active").parent().attr("schemaName");Fg.getSchema(e)}},this},Fg=Faug;function __loadfaugconfig(e){var t={},a=Faug.getConfigPath(),r={};e&&("queryparam"==e.aTokenWhere?a+="?"+e.aTokenName+"="+e.aTokenValue:"header"==e.aTokenWhere&&(r[e.aTokenName]=e.aTokenValue)),$.ajax({dataType:"json",url:a,headers:r}).done((function(e){!0===(t=e).compressedScript?Faug.initRouter(t):$.fetchMultipleFilesMT([[t.settings.extensionFile?t.settings.extensionFile:"faug-ext-globalize.js"]]).done((function(){Faug.initRouter(t)})).fail((function(e){alert("Problem loading Faug extension library")}))})).fail((function(e){console.log("Error loading config.json ("+e+")")}))}$(document).ready((function(){window.app&&app.initialize&&app.initialize(),"undefined"!=typeof FaugWebWorker&&($.fetchMultipleFilesWWASync=function(e,t){var a=$.Deferred(),r=new FaugWebWorker("w-fetch-file.js","FetchMultipleFiles");return r.setObject(t),r.setOnMsgCallback(function(e,t){return function(a){try{if(Faug.is("Object",a.data)){for(var r=0;r<a.data.r;r++)a.data.r[r][2]=xhrObj(a.data.r[2]);a.data.e?e.reject(a.data.r):e.resolve(a.data.r),t.stop()}else Faug.is("Array",a.data)?(a.data[2]=xhrObj(a.data[2]),t.getObject()&&t.getObject()(a.data)):e.reject(a)}catch(a){console.error(a),t.stop()}}}(a,r)),r.send(e),a}),$.fn.state=function(e,t){if(0!=$(this).length)if(void 0!==t)$(this)[0].__fs||($(this)[0].__fs={}),$(this)[0].__fs[e]=t;else{if(Fg.is("Object",e))return void($(this)[0].__fs=e);if($(this)[0].__fs)return void 0!==e?$(this)[0].__fs[e]:$(this)[0].__fs}};if($.fetchMultipleFilesChained=function(e,t,a,r){var i,n=$.Deferred();return i=e.reduce((function(e,r){return e.pipe(function(e,t,a){return!0!==a&&!1!==a&&(a=!0),function(r){var i=e.length>1?e[1]:"";""==i&&(/\.json/.test(e[0])?i="json":/\.js/.test(e[0])?i="script":/\.html/.test(e[0])&&(i="html"));var n=!(e.length>2)||e[2];return $.ajax({type:"GET",url:e[0],dataType:i,error:function(e,t,a){console.log(a)},cache:n,async:a}).pipe(function(e,a){return function(r){return"script"==e?$.globalEval(r):t&&t([a[0],r,e,a.slice(3)]),null}}(i,e))}}(r,t,a))}),n.promise()),n.resolve(r),i},$.fetchFile=function(e,t,a,r,i){void 0===r&&(r=!1);var n=n||{},s=Fg.getProperty("authObject");return s&&("queryparam"==s.aTokenWhere?-1==e.indexOf("?")?e+="?"+s.aTokenName+"="+s.aTokenValue:"?"==e[e.length-1]?e+=s.aTokenName+"="+s.aTokenValue:e+="&"+s.aTokenName+"="+s.aTokenValue:"header"==s.aTokenWhere&&!n.hasOwnProperty(s.aTokenName)&&s.aTokenValue&&(n[s.aTokenName]=s.aTokenValue)),$.ajax({type:"GET",url:e,dataType:t,success:i,error:function(e,t,a){console.log(a)},headers:n,cache:a,async:r})},$.fetchMultipleFilesRawMT=function(e,t){for(var a=new Fg.ApisPromiseMT,r=0;r<e.length;r++)a.push([!0,"get",e[r][0]],e[r]);return a.proceed(t,!0)},$.fetchMultipleFilesMT=function(e,t){for(var a=new Fg.ApisPromiseMT,r=0;r<e.length;r++)a.push([!0,"get",e[r][0]],e[r]);return a.proceed(function(e,t){return function(a,r,i){if(!0===r){var n=e[a],s=n.length>1?n[1]:"";""==s&&(/\.json/.test(n[0])?s="json":/\.js/.test(n[0])?s="script":/\.html/.test(n[0])&&(s="html")),"script"==s?$.globalEval(i.responseText):t&&t([n[0],i.responseText,s,n.slice(3)])}}}(e,t),!0)},Faug.setProperty("recorder",new Fg.FgRecorder(!0)),(e=Faug.execFunc("asLibrary",[])).valid)Faug.initLib();else{var e;(e=Faug.execFunc("onLoad",[])).valid&&Faug.sp("loadconfigafterauth",e.result);var t=!0===window.onlyFaugCore;Faug.gp("loadconfigafterauth")||t||__loadfaugconfig();var a=!0===window.noFaugExtension;t&&!a&&$.fetchMultipleFilesMT([["faug-ext-globalize.js"]]).done((function(){Faug.initRouter({})})).fail((function(e){alert("Problem loading Faug extension library")}))}})).on("deviceready",(function(){Faug.execFunc("onCordovaLoad",[])})),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0==this.indexOf(e)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var a=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)&&(t=a.length),t-=e.length;var r=a.indexOf(e,t);return-1!==r&&r===t}),"undefined"!=typeof module&&module.exports&&(module.exports={Faug:Faug,Fg:Faug});
	console.log("loaded faugjs...");

	var recorder;
	var running = false;
	setInterval(function() {
		if(!recorder) {
			recorder = new Fg.FgRecorder(true);
		}
		chrome.storage.local.get(["event"], function(d) {
			if(d && d.event) {
				if(d.event=="start") {
					if(!running) recorder.startRecording();
					running = true;
					chrome.storage.local.remove(["event"], function() {
					});
				} else if(d.event=="stop") {
					if(running) recorder.stopRecording();
					running = false;
					chrome.storage.local.remove(["event"], function() {
					});
				}
			}
		});
		//no-op
	}, 100);
}
